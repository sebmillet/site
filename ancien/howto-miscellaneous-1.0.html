<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
<title>Trucs et Astuces sur Debian Testing</title>
<meta name="generator" content="Bluefish 1.0.7">
<meta name="author" content="Sébastien Millet">
<meta name="date" content="2009-12-31T11:01:06+0100">
<meta name="copyright" content="">
<meta name="keywords" content="linux,debian,miscellaneous">
<meta name="description" content="Trucs et Astuces sur Debian Testing (janvier - mars 2007)">
<meta name="ROBOTS" content="all">
<meta http-equiv="content-type" content="text/html; charset=UTF-8" >
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
</head>

<body>

<br>

<h1>Trucs et Astuces sur Debian Testing<br>
Document version 1.0</h1>

<hr>

<a href="index.html">Retour à la page d'accueil</a>

<hr>

<h2>Table des matières</h2>

<ul>
  <li><a href="#introduction">1 Introduction</a></li>
  <li><a href="#trucsastuces">2 Trucs et Astuces</a></li>
  <ul>
    <li><a href="#codage_fr">2.1 Codage des caractères en français</a></li>
    <li><a href="#su_root">2.2 su root sans saisir le mot de passe</a></li>
    <li><a href="#auto_usb">2.3 Montage automatique des clés USB et des CD-ROM</a></li>
    <li><a href="#chiffrement_homedir">2.4 Chiffrement de volume</a></li>
    <li><a href="#cable_null_modem">2.5 Connexion de deux machines avec un cable Null modem</a></li>
    <li><a href="#transfert_linux">2.6 Transfert entre deux Linux</a></li>
    <li><a href="#jvm_iceweasel">2.7 JAVA Sun&nbsp;&reg; sur Iceweasel (firefox)</a></li>
    <li><a href="#root_x">2.8 Utiliser l'interface X en tant que root</a></li>
    <li><a href="#wheel_sudo">2.9 Autoriser le groupe wheel à tout exécuter avec <code>sudo</code></a></li>
    <li><a href="#config_kernel_startup">2.10 Configuration du noyau au démarrage</a></li>
    <li><a href="#paquetages_utiles">2.11 Paquetages que j'ajoute à l'installation de base</a></li>
    <li><a href="#ajout_cd">2.12 Ajouter un CD dans <code>/etc/apt/source.list</code></a></li>
    <li><a href="#horloge_utc">2.13 Définir si l'horloge est en UTC ou pas</a></li>
    <li><a href="#reglage_fuseau_courant">2.14 Régler le fuseau horaire courant</a></li>
    <li><a href="#config_vim">2.15 Configuration système de Vim</a></li>
    <li><a href="#config_kdm_photos">2.16 Configurer kdm avec les photos</a></li>
    <li><a href="#numlock_start_console">2.17 Numlock au démarrage (console)</a></li>
    <li><a href="#numlock_start_kde">2.18 Numlock au démarrage (KDE)</a></li>
    <li><a href="#reconfigure_x">2.19 Reconfigurer X</a></li>
    <li><a href="#police_gvim">2.20 Changer la police de gvim à l'exécution de <code>gvim</code> en ligne de commande</a></li>
    <li><a href="#umask_cmd">2.21 Modifier les droits par défaut des fichiers et répertoires créés</a></li>
    <li><a href="#trucs_bash">2.22 Quelques trucs sur bash</a></li>
    <li><a href="#commandes_utiles">2.23 Quelques commandes utiles</a></li>
    <li><a href="#install_mplayer">2.24 Installation de MPlayer</a></li>
    <li><a href="#apt_key">2.25 Le programme <code>apt-key</code></a></li>
    <li><a href="#modifier_format_video">2.26 Modifier le format d'une vidéo</a></li>
    <li><a href="#changer_navigateur_kde">2.27 Changer le navigateur par défaut de KDE</a></li>
    <li><a href="#lister_fichiers">2.28 Lister les fichiers par date, sous-répertoires inclus</a></li>
    <li><a href="#verif_orthographe">2.29 Vérification orthographique</a></li>
    <li><a href="#stardict">2.30 Stardict (dictionnaire)</a></li>
    <li><a href="#config_fontes_x">2.31 Configuration des fontes sur X</a></li>
    <li><a href="#compilation_noyau">2.32 Compilation du noyau</a></li>
    <li><a href="#driver_nvidia">2.33 Installer le driver nVidia</a></li>
    <li><a href="#copie_ecran_x">2.34 Faire une copie d'écran sous X</a></li>
    <li><a href="#auto_eject_close">2.35 Auto-eject et auto-close</a></li>
    <li><a href="#apt_tour">2.36 Tour très rapide des outils APT</a></li>
    <li><a href="#syslogconf">2.37 Modification de <code>syslog.conf</code></a></li>
    <li><a href="#compress_cd">2.38 Récupérer un CD audio sous forme de fichier son</a></li>
    <li><a href="#ape_to_mp3">2.39 Convertir une image APE, compressée en RAR, en un ensemble de fichiers MP3</a></li>
    <li><a href="#hwclock_ko">2.40 L'heure système est décalée</a></li>
    <li><a href="#unilignes_perl">2.41 Quelques uni-lignes PERL</a></li>
    <li><a href="#cd_console">2.42 Gravage de CD en ligne de commande</a></li>
    <li><a href="#bash">2.43 Maîtrise de bash</a></li>
    <li><a href="#trucs_google">2.44 Trucs Google</a></li>
    <li><a href="#magic_sysrq">2.45 Combinaisons de touches avec CONFIG_MAGIC_SYSRQ activé</a></li>
    <li><a href="#ssh_config">2.46 Chiffrer avec SSH un protocole qui ne l'est pas</a></li>
    <li><a href="#gimp_plastic">2.47 GIMP - créer un objet en plastique translucide</a></li>
    <li><a href="#gconf">2.48 Configuration avec gconf-editor</a></li>
    <li><a href="#conky">2.49 Configuration conky</a></li>
    <li><a href="#cpp11">2.50 Nouveautés C++11</a></li>
    <li><a href="#weboob">2.51 Weboob, WEB Out Of Browser</a></li>
    <li><a href="#abcde_ancien">2.52 Installer une version antérieure du logiciel abcde</a></li>
    <li><a href="#selection_logicielle">2.53 Sauvegarder et rétablir la sélection logicielle</a></li>
    <li><a href="#debian_wheezy">2.54 Quelques trucs sur Debian Wheezy</a></li>
    <li><a href="#kde_fonts">2.55 Améliorer le rendu des applications GTK dans KDE</a></li>
    <li><a href="#build_deb_rpm">2.56 Construire des paquetages DEB et RPM</a></li>
    <li><a href="#commandes">2.57 Quelques trucs bien utiles en ligne de commande</a></li>
    <li><a href="#openvpn_autostart">2.58 Démarrage automatique d'openvpn</a></li>
    <li><a href="#copie_dvd">2.59 Copie de DVD</a></li>
    <li><a href="#lancer_logiciel_sans_reseau">2.60 Lancer un logiciel en bloquant son accès au réseau</a></li>
    <li><a href="#easy2boot">2.61 Easy2Boot</a></li>
    <li><a href="#sortieprocessus">2.62 Changer la sortie d'un processus en cours d'exécution</a></li>
    <li><a href="#manips_pdf">2.63 Manipulations de fichier PDF</a></li>
    <li><a href="#retouche_photos">2.64 Retouche photographies</a></li>
    <li><a href="#journalctl">2.65 Logs avec journalctl</a></li>
    <li><a href="#linuxpratiqueessential1">2.97 Résumé Linux Pratique Essentiel numéro 1</a></li>
    <li><a href="#logiciels_a_etudier">2.98 Logiciels non testés, à étudier un jour</a></li>
    <li><a href="#quelques_url">2.99 Quelques URL utiles</a></li>
  </ul>
</ul>

<hr>

<h2><a name="introduction">1 Introduction</a></h2>

<p>
Cette rubrique liste quelques trucs et astuces pour gagner du temps dans la configuration
de la Debian Testing de début 2007.<br>
Elle est conçue comme un historique des manipulations que je réalise une fois
le système installé, et elle me sert de guide si j'installe Debian sur
une machine.
</p>

<hr>

<h2><a name="trucsastuces">2 Trucs et Astuces</a></h2>

<h3><a name="codage_fr">2.1 Codage des caractères en français</a></h3>

<p>
Cette section se focalise sur la pratique, après avoir très brièvement
rappelé quelques principes. Wikipedia décrit en détail tout ce qu'il faut
savoir sur les codages existants, je ne vais pas les recopier ici.
</p>

<h4>2.1.1 Codage des caractères en français - rappels</h4>

<h5>2.1.1.1 Introduction - tables de caractères existantes</h5>

<p>
Il existe de nombreuses normes pour encoder les caractères. Même sans parler
des caractères accentués, plusieurs choix existent, dont ASCII et EBCDIC.
L'URL <a href="http://www.dynamoo.com/technical/ascii-ebcdic.htm">
http://www.dynamoo.com/technical/ascii-ebcdic.htm</a> décrit ces deux standards.<br>
L'EBCDIC est utilisé sur les gros systèmes IBM, les codages
que l'on rencontre en pratique sont tous basés sur ASCII,
<a href="http://www.asciitable.com/">http://www.asciitable.com/</a>
</p>

<p>
ASCII est un standard de fait mais ne code aucun caractère accentué.
Pour y parvenir, plusieurs solutions existent.
</p>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td><b>Codepages</b></td>
    <td>Solution historique, plusieurs constructeurs et éditeurs ayant
créé leurs propres codepages (dont Microsoft et IBM). En règle
générale, les codepages sont compatibles ASCII, mais ce n'est pas obligatoire.<br>
Il est assez difficile de s'y retrouver parmi les codepages existants. Ils sont
sensés être normalisés par l'ANSI, mais cela n'est pas toujours
le cas. Ils constituent le standard historique MS-DOS&nbsp;&reg; et Windows&nbsp;&reg;.<br>
<b>MS-DOS&nbsp;&reg;</b>&nbsp;:&nbsp;les langues d'Europe occidentale (dont le Français) sont
codées avec le codepage 850 (<em>cp850</em>), édité par IBM. Il est identique
à la table "ASCII étendue" (8 bits au lieu de 7 pour ASCII simple).<br>
<b>Windows&nbsp;&reg;</b>&nbsp;:&nbsp;le codepage d'Europe occidentale est le 1252. Il est
très proche du code <em>ISO-8859-1</em>, il arrive même qu'il y ait des confusions
entre les deux, certains programmes annonçant un affichage <em>ISO-8859-1</em> alors qu'il
s'agit de <em>cp1252</em>, et vice-versa.<br>
Liste des <em>codepages</em>&nbsp;:&nbsp;
<a href="http://www.i18nguy.com/unicode/codepages.html">http://www.i18nguy.com/unicode/codepages.html</a>
</td>
  </tr>
  <tr>
    <td><b>ISO-8859-*</b></td>
    <td>Normalisation pour les langues européennes, compatible ASCII.<br>
Liste des codes ISO-8859&nbsp;:&nbsp;
<a href="http://en.wikipedia.org/wiki/Iso-8859">http://en.wikipedia.org/wiki/Iso-8859</a>.</td>
  </tr>
  <tr>
    <td><b>Unicode</b></td>
    <td>Encodage universel, compatible ASCII.<br>
Le codage "canonique" Unicode est l'encodage sur 16 bits, <em>UTF-16</em>, soit
deux octets. Nous verrons plus loin qu'il existe d'autres codages Unicode.
Les octets peuvent être rangés de deux manières distinctes :<br>
<b>1-</b> Octet de poids fort en premier (<em>"BE"</em>, big endian).<br>
<b>2-</b> Octet de poids faible en premier (<em>"LE"</em>, little endian).<br>
Un texte Unicode peut démarrer par un BOM (<em>Byte Order Mark</em>), qui indique
l'ordre des octets,
<a href="http://unicode.org/unicode/faq/utf_bom.html#22">http://unicode.org/unicode/faq/utf_bom.html#22</a>.<br>
Page d'accueil d'Unicode&nbsp;:&nbsp;
<a href="http://www.unicode.org">http://www.unicode.org</a>.</td>
  </tr>
  <tr>
    <td><b>UCS</b></td>
    <td>UCS = <em>Universal Character Set</em>.<br>
Autre encodage universel, non compatible ASCII (semble-t-il ; UCS est
peu utilisé en Europe). UCS et Unicode sont étroitement liés, Unicode
étant beaucoup plus populaire (en Europe) qu'UCS.<br>
Pas d'URL de référence autre que celle d'Unicode.</td>
  </tr>
</table>

<h5>2.1.1.2 Compatibilité ASCII d'un système de codage</h5>

<p>
"Compatible ASCII" signifie que la base du codage, pour les caractères non
accentués, est ASCII. Ce qui signifie que même si votre système ne reconnaît
pas le codage utilisé, les caractères ASCII (non accentués) seront affichés
correctement. Cela est très pratique, car en Français par exemple, un texte
sans caractères accentués est inconfortable mais parfaitement lisible. Les
codages compatibles ASCII sont donc plus robustes.
</p>

<h5>2.1.1.3 Codages régionaux</h5>

<p>
Les <em>codepages</em> et les normes <em>ISO-8859-n</em> ne permettent
de coder que quelques langues simultanément. Ainsi la norme <em>ISO-8859-1</em>, conçue pour les
langues d'Europe occidentale, ne permet pas de coder les caractères islandais, turcs, grecs,
etc.
</p>

<p>
Les codages <em>ISO-8859-1</em>, <em>ISO-8859-2</em>, ..., couvrent les langues européennes. Pour
le français, les deux normes envisageables sont <em>ISO-8859-1</em> (Europe occidentale)
et <em>ISO-8859-15</em> (Europe occidentale + symbole euro et quelques adaptations mineures).
</p>

<h5>2.1.1.4 Codages universels</h5>

<p>
Unicode et UCS sont universels, ils permettent de coder n'importe quel
caractère de n'importe quelle langue.
</p>

<p>
Unicode et UCS sont déclinés en plusieurs codages possibles, adaptés
au contexte. Unicode codé sur un octet a pour nom <b>UTF-8</b>. Cela ne signifie pas
que tout caractère prend un seul octet - un caractère peut nécessiter
entre 1 et 6 octets pour être codé. Avec <em>UTF-8</em> la notion
d'ordre des octets n'intervient pas, c'est pourquoi le BOM (Byte Order Mark)
est peu utilisé dans ce codage, quoiqu'il existe.
</p>

<p>
<em>UTF-8</em> est optimisé pour les langues européennes, car les caractères non accentués sont
codés sur un seul octet. Cela étant, <em>UTF-8</em>, comme tout codage Unicode, est universel.<br>
Coder du français en <em>UTF-16</em> ou en <em>UTF-32</em> ne pose aucun problème, mais en moyenne,
le texte prendra le double et le quadruple d'octets pour être représenté, respectivement.
</p>

<h5>2.1.1.5 Codage du français dans la pratique</h5>

<p>
Dans la pratique lorsque nous voudrons coder un texte, ou définir un codage par défaut sur Linux,
nous aurons les choix suivants.<br>
Je ne présente pas <em>cp850</em> ou <em>cp1252</em> comme des choix, car ils appartiennent
au monde Microsoft, de plus ils tendent à être de moins en moins utilisés y compris sur
Windows&nbsp;&reg;, où le standard est désormais Unicode.
</p>

<ol>
  <li><b>ISO-8859-1</b><br>
Ce codage porte également le nom "latin1". C'est le codage historique.
Le codepage 1252 (Microsoft Windows&nbsp;&reg;) en est si proche que les
deux sont facilement interchangeables.</li>
  <li><b>ISO-8859-15</b><br>
Également désigné par les noms "latin9" ou "euro". Ce codage modifie de
manière mineure <em>ISO-8859-1</em>. L'apport le plus connu est l'ajout du symbole
euro &euro;. Il corrige aussi l'absence de caractère <b>&oelig;</b>.</li>
  <li><b>UTF-8</b><br>
Unicode sur 8 bits.
</ol>

<h5>2.1.1.6 Choix d'un codage par défaut</h5>

<p>
Sur Linux, comment choisir entre <em>ISO-8859-1</em>, <em>ISO-8859-15</em> et <em>UTF-8</em> ?<br>
Le tableau suivant liste les points à considérer.
</p>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td></td>
    <td><b>ISO-8859-1 ou ISO-8859-15</b></td>
    <td><b>UTF-8</b></td>
  </tr>
  <tr>
    <td>Avantages</td>
    <td>- Codage historique, supporté <em>partout</em>.<br>
- Un octet et un seul pour chaque caractère, ce qui facilite la programmation.<br>
- Très proche de <em>cp1252</em>, ce qui facilite les échanges avec le monde Microsoft&nbsp;&reg;.
    <td>- Codage universel.<br>
- Unicode est le standard recommandé pour le web.<br>
- Unicode est le standard de fait sur le web.</td>
  </tr>
  <tr>
    <td>Inconvénients</td>
    <td>- Non universel.<br>
- N'est pas la recommandation officielle pour le web.</td>
    <td>- A tendance à être moins souvent géré que <em>ISO-8859-n</em>.<br>
- Nombre d'octets variable pour représenter un caractère, ce qui
rend ce codage compliqué à gérer en programmation.</td>
  </tr>
</table>

<p>
On peut se demander pourquoi je mentionne la facilité de programmation (qui donne
l'avantage à ISO-8859), sachant que la plupart des gens ne sont pas développeurs.
En fait la programmation concerne aussi le contenu web (PHP, Java, Javascript, ...), ce qui
élargit le périmètre.<br>
La complexité d'Unicode explique que certains programmes (anciens) supportent
ISO-8859 uniquement.
</p>

<h4>2.1.2 Codage des caractères en français - la pratique sur Debian</h4>

<p>
Une documentation très utile se trouve ici :
<a href="http://www.debian.org/doc/manuals/fr/debian-fr-howto/ch3.html">http://www.debian.org/doc/manuals/fr/debian-fr-howto/ch3.html</a>
</p>

<h5>2.1.2.1 Pré-requis - paquetages Debian</h5>

<p>
Le paquetage <code>locales</code> doit être installé, ce qui est le cas par défaut. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l locales</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  locales                   2.3.6.ds1-10              GNU C Library: National Language (locale) data [support]
</code></pre></td></tr></table>

<h5>2.1.2.2 Choisir entre <em>ISO-8859-1</em>, <em>ISO-8859-15</em> et <em>UTF-8</em></h5>

<p>
Personnellement, je choisis le codage proposé avec Debian par défaut, à savoir,
<em>UTF-8</em>.<br>
Tout ça pour en arriver là ? Eh oui !<br>
Sauf qu'avec les clés USB utilisées sous Windows&nbsp;&reg;, ça se complique. Même
avec Windows&nbsp;XP&nbsp;&reg;&nbsp;service&nbsp;pack&nbsp;2, les noms de fichier
sont toujours en <em>ISO-8859-1</em> (ou en <em>cp1252</em>, il est difficile de
les différencier).<br>
Résultat, aujourd'hui, j'utilise <em>UTF-8</em>, en sachant que j'ai régulièrement des
caractères accentués dans les noms de fichier qui sont affichés comme un point
d'interrogation.
</p>

<h5>2.1.2.3 Choisir entre <em>ISO-8859-1</em> et <em>ISO-8859-15</em></h5>

<p>
Si vous souhaitez rester sur un codage ISO-8859, <em>ISO-8859-15</em> est plus moderne,
sachant que certains programmes risquent de ne pas le gérer. Personnellement, je
l'ai utilisé durant deux ans sans rencontrer de difficulté supplémentaire par rapport à
<em>ISO-8859-1</em>.
</p>

<h5>2.1.2.4 Choisir la localisation</h5>

<p>
"Localisation" signifie "réglages régionaux".<br>
Exécuter<br>
<code>dpkg-reconfigure locales</code><br>
Je recommande de sélectionner les 3 options disponibles pour le français, à
savoir <em>fr_FR</em>, <em>fr_FR.UTF-8</em> et <em>fr_FR@euro</em>, ensuite
choisir <em>fr_FR.UTF-8</em> comme codage par défaut.
Ce changement ce n'est pas pris en compte à la volée, pour en voir (en partie) les effets,
il faut ré-ouvrir une session. Cela n'est parfois pas suffisant, et pour écrire
les paragraphes qui suivent, j'ai dû redémarrer Linux.
</p>

<p>
Copie d'écran (1). Remarquez l'affichage insolite des bordures de cadre, dû au
passage d'<em>ISO-8859-15</em> à <em>UTF-8</em> comme codage par défaut, sans
redémarrage de Linux.
</p>

<img src="img/h212-sshot1.png" width="584" height="425" border="4" alt="">

<p>
Copie d'écran (2). Pour cette deuxième image, je n'avais pas modifié le
codage en cours de route, donc les bordures sont affichées correctement.
</p>

<img src="img/h212-sshot2.png" width="584" height="425" border="4" alt="">

<p>
Les codages que vous sélectionnez sont listés dans <code>/etc/locale.gen</code>.<br>
Mon fichier <code>/etc/locale.gen</code> :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>fr_FR.UTF-8 UTF-8

fr_FR@euro ISO-8859-15

fr_FR ISO-8859-1

</code></pre></td></tr></table>

<h5>2.1.2.5 Afficher la localisation en cours</h5>

<p>
Quel est ma localisation ? Exécuter la commande <code>set | grep LANG</code> pour
avoir simplement le codage, la commande <code>locale</code> pour tout afficher.<br>
Exemples :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code> Afficher uniquement le codage des caractères
sebastien@maison-2:~$ <b>set | grep LANG</b>
LANG=fr_FR@euro

  Exemple avec "fr_FR ISO-8859-1" sélectionné par défaut
maison-2:~# <b>locale</b>
LANG=fr_FR
LC_CTYPE="fr_FR"
LC_NUMERIC="fr_FR"
LC_TIME="fr_FR"
LC_COLLATE="fr_FR"
LC_MONETARY="fr_FR"
LC_MESSAGES="fr_FR"
LC_PAPER="fr_FR"
LC_NAME="fr_FR"
LC_ADDRESS="fr_FR"
LC_TELEPHONE="fr_FR"
LC_MEASUREMENT="fr_FR"
LC_IDENTIFICATION="fr_FR"
LC_ALL=

  Exemple avec "fr_FR@euro ISO-8859-15" sélectionné par défaut
maison-2:~# <b>locale</b>
LANG=fr_FR@euro
LC_CTYPE="fr_FR@euro"
[...]
LC_IDENTIFICATION="fr_FR@euro"
LC_ALL=

  Exemple avec "fr_FR.UTF-8 UTF-8" sélectionné par défaut
maison-2:~# <b>locale</b>
LANG=fr_FR.UTF-8
LC_CTYPE="fr_FR.UTF-8"
[...]
LC_IDENTIFICATION="fr_FR.UTF-8"
LC_ALL=
</code></pre></td></tr></table>

<h5>2.1.2.6 Identifier le codage utilisé dans un texte</h5>

<p>
Le texte peut être contenu dans un fichier, ou bien être un nom de fichier.
Une méthode est de choisir un type de codage (sur le navigateur ou dans un terminal X,
c'est possible avec la plupart des terminaux) et de contrôler l'affichage des caractères.<br>
Si vous avez choisi <em>UTF-8</em> et que les accents s'affichent bien, c'est que le
contenu est <em>UTF-8</em>, idem avec <em>ISO-8859-1</em> et <em>-15</em>
</p>

<p>
Une autre méthode, radicale, qui a l'avantage d'être fiable à 100%, consiste
à afficher les octets du fichier (ou du nom de fichier) que l'on souhaite examiner.
Ainsi j'ai écrit la chaîne<br>
<code>-é-</code><br>
dans un fichier <code>alpha</code>, que j'ai codé de deux manières différentes, j'expliquerai plus
loin comment.
</p>

<p>
Contenu binaire des fichiers selon le codage.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>hexdump -e '"" 1/1 "%02x" "\n"' alpha.iso-8859-15</b>
2d
e9
2d
0a
maison-2:~# <b>hexdump -e '"" 1/1 "%02x" "\n"' alpha.utf-8</b>
2d
c3
a9
2d
0a
</code></pre></td></tr></table>

<p>
Tous les codes qui suivent sont écrits en hexadécimal.
</p>

<p>
En <em>ISO-8859-15</em>, le e minuscule accent aigu, <b>é</b>, est codé sur un seul octet, <b>e9</b>.<br>
En <em>UTF-8</em>, le <b>é</b> est codé sur deux octets, <b>c3</b> puis <b>a9</b>.
</p>

<p>
Autre exemple, avec un nom de fichier.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>set | grep LANG</b>
LANG=fr_FR.UTF-8
maison-2:~# <b>touch -- -é-</b>
maison-2:~# <b>ls -- -é-</b>
-é-
maison-2:~# <b>ls -- -é- | hexdump -e '"" 1/1 "%02x" "\n"'</b>
2d
c3
a9
2d
0a
</code></pre></td></tr></table>

<p>
Et si on passe au codage par défaut <em>ISO-8859-15</em>, que se passe-t-il ?<br>
A noter qu'entre les deux manipulations, j'ai redémarré Linux.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>set | grep LANG</b>
LANG=fr_FR@euro
maison-2:~# <b>touch -- -é-2</b>
maison-2:~# <b>ls -- -é-2</b>
-é-2
maison-2:~# <b>ls -- -é-2 | hexdump -e '"" 1/1 "%02x" "\n"'</b>
2d
e9
2d
32
0a
maison-2:~# <b>ls -l</b>
total 148
-rw-r--r-- 1 root root     0 2007-02-11 13:06 -Ã©-
-rw-r--r-- 1 root root     0 2007-02-11 14:05 -é-2
maison-2:~# <b>ls -- -Ã©- | hexdump -e '"" 1/1 "%02x" "\n"'</b>
2d
c3
a9
2d
0a
</code></pre></td></tr></table>

<p>
Les noms de fichier sont écrits tels quels dans le système de fichier, et
dans l'exemple qui précède, un codage <em>ISO-8859-15</em> et <em>UTF-8</em> cohabitent.
On voit ici qu'en passant à <em>ISO-8859-15</em>, le fichier créé avec un nom codé en
<em>UTF-8</em> (car créé alors que le codage par défaut était <em>UTF-8</em>)
n'est plus affiché correctement. La séquence <em>Ã©</em> est typique d'un texte <em>UTF-8</em>
affiché en <em>ISO-8859-1</em>. A l'inverse, un texte <em>ISO-8859-15</em> affiché en <em>UTF-8</em>
produira des points d'interrogation, car la plupart des codes <em>latin9</em> produisent des séquences
<em>UTF-8</em> illégales. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/mnt/usb2# <b>ls z*</b>
z?
maison-2:/mnt/usb2# <b>ls z* | hexdump -e '"" 1/1 "%02x" "\n"'</b>
7a
e9
0a
</code></pre></td></tr></table>

<p>
Ici le ? était un e accent aigu, ce ce que l'on peut voir avec la
commande <code>hexdump</code>.
Durant la rédaction de ces pages, il m'est
arrivé par erreur de créer deux fichiers différents ayant même nom, mais
encodés différemment - pour le système de fichiers, ils étaient bien distincts.
</p>

<p>
Ce mode de fonctionnement déporte dans l'espace utilisateur les problèmes
de représentation des caractères. C'est une règle générale, que j'ai constatée
sur tous les systèmes de fichiers, y compris VFAT (le plus utilisé sur clé USB).
</p>

<h5>2.1.2.7 Cas particulier du système de fichier VFAT</h5>

<p>
Ce système et, de manière différente, NTFS, permet de définir
un jeu de caractère, avec l'option <code>iocharset</code>. Saut que cela ne
permet pas d'afficher convenablement des caractères <em>ISO-8859-1</em> sur une console
<em>UTF-8</em>, ni l'inverse. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/mnt/usb2# <b>set | grep LANG</b>
LANG=fr_FR.UTF-8
maison-2:/mnt/usb2# <b>mount</b>
[...]
/dev/sdg1 on /misc/usb2 type vfat (rw,noexec,nosuid,nodev,sync,umask=000,iocharset=iso8859-15)
maison-2:/mnt/usb2# <b>ls z*</b>
z?
maison-2:/mnt/usb2# <b>ls z* | hexdump -e '"" 1/1 "%02x" "\n"'</b>
7a
e9
0a
</code></pre></td></tr></table>

<p>
Ici, <code>/mnt/usb2</code> (clé USB) est monté avec l'option <em>ISO-8859-15</em>, ce qui ne permet
pas pour autant d'afficher les accents. Inversement, avec une localisation
<em>ISO-8859-15</em>, les caractères <em>UTF-8</em> ne s'affichent pas correctement.<br>
Si quelqu'un sait comment gérer cette situation autrement qu'en utilisant
<b>fr_FR@euro</b> comme localisation par défaut, je lui en serais reconnaissant...
</p>

<h5>2.1.2.8 Convertir un fichier d'UTF-8 en ISO-8859-15 avec Vi</h5>

<p>
Je parle d'un fichier texte, et je ne traiterai pas le cas du BOM
(<em>Byte Order Mark</em>). Sachez que Vi sait gérer le BOM, avec l'option
<code>bomb</code>.<br>
Naturellement, dans tout ce qui suit, <em>ISO-8859-15</em> peut être remplacé par
<em>ISO-8859-1</em>.
</p>

<ol>
  <li>Ouvrir le fichier dans Vi, en exécutant <code>vi</code><br>
Surtout n'exécutez pas <code>vi <em>nom_fichier</em></code>. Vi tentera de déterminer
tout seul le type du fichier, et si le fichier contient des séquences illégales,
le résultat peut être inattendu.</li>
  <li>Exécuter les commandes Vi suivantes<br>
<code>:e ++enc=utf-8 <em>nom_fichier</em></code><br>
<code>:set fileencoding=iso-8859-15</code><br>
<code>:wq!</code></li>
</ol>

<h5>2.1.2.9 Convertir un fichier d'ISO-8859-15 en UTF-8 avec Vi</h5>

<ol>
  <li>Ouvrir le fichier dans Vi, en exécutant <code>vi</code><br>
  <li>Exécuter les commandes Vi suivantes<br>
<code>:e ++enc=iso-8859-15 <em>nom_fichier</em></code><br>
<code>:set fileencoding=utf-8</code><br>
<code>:wq!</code></li>
</ol>

<p>
L'exécution de <code>vi -c ":set fileencoding=..."</code> ne fonctionne pas, car c'est comme
si cette commande était exécutée à la main, après l'ouverture du fichier par Vi,
donc après que Vi a déterminé le type d'encodage du fichier.<br>
Naturellement, ces manipulations fonctionnent aussi avec <code>vim</code> (invoqué
à la place de <code>vi</code> de manière transparente) et <code>gvim</code>.
</p>

<h5>2.1.2.10 Le programme <code>convmv</code></h5>

<p>
Ce programme est capable de modifier l'encodage des <em>noms</em> de fichier donnés en paramètre.
Il convertit les noms des fichiers, pas leur contenu... Il fait partie du paquetage convmv.<br>
Exemple de commande, pour convertir depuis latin1 vers utf-8, dans tous les répertoires, récursivement&nbsp;:<br>
<code><b>convmv -f latin1 -t utf-8 --notest -r *</b></code>
</p>

<hr>

<h3><a name="su_root">2.2 su root sans saisir le mot de passe</a></h3>

<p>
Nous allons modifier la configuration de PAM.
Plus loin dans ce document, un paragraphe évoque (rapidement) PAM,<br>
<a href="#remarque_PAM">Remarque au sujet de PAM</a>
</p>

<p>
Dans le fichier <code>/etc/pam.d/su</code>, dé-commenter la ligne<br>
<code>auth       sufficient pam_wheel.so trust</code><br>
Ensuite, créer le groupe <em>wheel</em> et y ajouter les utilisateurs qui
doivent pouvoir devenir root en exécutant <code>su</code>, sans mot de passe.
Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>groupadd wheel</b>
maison-2:~# <b>groups sebastien</b>
sebastien : sebastien dialout cdrom floppy audio video plugdev netdev powerdev
maison-2:~# <b>usermod -G sebastien,dialout,cdrom,floppy,audio,video,plugdev,netdev,powerdev,wheel sebastien</b>
maison-2:~# <b>groups sebastien</b>
sebastien : sebastien dialout cdrom floppy audio video plugdev netdev powerdev wheel

  Fichier /etc/pam.d/su après modification (quelques commentaires ont été enlevés)
#
# The PAM configuration file for the Shadow `su' service
#

# This allows root to su without passwords (normal operation)
auth       sufficient pam_rootok.so
[...]
# Uncomment this if you want wheel members to be able to
# su without a password.
<b>auth       sufficient pam_wheel.so trust</b>
[...]
session       required   pam_env.so readenv=1
[...]
session       required   pam_env.so readenv=1 envfile=/etc/default/locale
[...]
session    optional   pam_mail.so nopen

@include common-auth
@include common-account
@include common-session
</code></pre></td></tr></table>

<p>
<b>Utilisation d'un autre groupe</b>
</p>

<p>
Le groupe wheel est particulier. Si vous préférez passer par un autre groupe,
ajouter la ligne suivante :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code> auth  sufficient  pam_succeed_if.so use_uid user ingroup <em>nom_groupe</em>
</code></pre></td></tr></table>

<hr>

<h3><a name="auto_usb">2.3 Montage automatique des clés USB et des CD-ROM</a></h3>

<p>
Nous allons voir l'installation et l'utilisation du système autofs, version 4.
KDE et Gnome savent gérer le montage automatique de volume, grâce au
système d-bus. d-bus fonctionne de manière irréprochable, mais personnellement,
je trouve autofs encore plus pratique. Avec autofs, un volume peut être monté
automatiquement au moment où l'on s'en sert, et démonté ensuite, après
un délai réglable. Il n'y a pas à cliquer où que ce soit, ça fonctionne en mode texte,
et c'est 100% automatique.<br>
Ce système sert aussi aux CDROM, mais il lui arrive de provoquer des perturbations
avec des graveurs de CD tels que k3b.<br>
Bref.
</p>

<h4>2.3.1 Pré-requis</h4>

<h5>2.3.1.1 Paquetages Debian</h5>

<p>
Le paquetage s'appelle autofs. Exemple sur ma Debian.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l autofs</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                        Version                    Description
+++-==========================-==========================-====================================================================
ii  autofs                     4.1.4-13                   kernel-based automounter for Linux
</code></pre></td></tr></table>

<h5>2.3.1.2 Options de compilation du noyau</h5>

<p>
<b>Pour utiliser autofs, il est inutile de recompiler le noyau</b><br>
Si toutefois vous le recompilez, il faut inclure l'option <code>AUTOFS4_FS</code>,
qui se trouve dans la partie <code>File systems</code>. Le titre de cette option est
<code>Kernel automounter version 4 support (also supports v3)</code>.
</p>

<h4>2.3.2 Service autofs</h4>

<p>
Le service s'appelle autofs et est démarré comme tout service, grâce à
un script dans <code>/etc/init.d</code> référencé dans différents runlevel. Quand le
paquetage est installé, le service est configuré pour être lancé automatiquement
au démarrage de la machine. Vous pouvez le vérifier avec rcconf
(paquetage rcconf), service <em>autofs</em>, qui doit être coché.
</p>

<p>
Comme d'habitude, le fonctionnement d'autofs en tant que service est
contrôlé dans le fichier <code>/etc/default/autofs</code>.<br>
Fichier <code>/etc/default/autofs</code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Timeout value in seconds (default: 300)
TIMEOUT=300

# Direct maps are only partially implemented
# and could silently break things. See /usr/share/doc/autofs/README.direct for information
# about current limitations and check your configurations before enabling them.
DISABLE_DIRECT=1

# The LDAP URI for auto.master
# (e. g. LDAPURI="ldap://ldapserver.example.com/")
#LDAPURI=

# The LDAP base for auto.master
# (e. g. LDAPBASE="ou=auto.master,ou=Automount,dc=example,dc=com")
#LDAPBASE=

# Restart autofs automatically on upgrades -- normally, you want this, but
# if you have critical files on autofs-mounted directories (the new autofs
# .deb file, for instance), you may want to set this to 1
#AUTOFS_DONT_RESTART_ON_UPGRADES=
</code></pre></td></tr></table>

<h4>2.3.3 Configuration d'autofs</h4>

<p>
La configuration d'autofs est effectuée dans le fichier <code>/etc/auto.master</code>,
l'usage étant d'utiliser des sous-fichiers de nom <code>/etc/auto.*</code>.<br>
En cas de changement de la configuration, il faut redémarrer le service, en
exécutant la commande<br>
<code>/etc/init.d/autofs restart</code>
</p>

<p>
Mon fichier <code>/etc/auto.master</code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#
# $Id: auto.master,v 1.4 2005/01/04 14:36:54 raven Exp $
#
# Sample auto.master file
# This is an automounter map and it has the following format
# key [ -mount-options-separated-by-comma ] location
# For details of the format look at autofs(5).
#/misc  /etc/auto.misc --timeout=60
#/smb /etc/auto.smb
/misc /etc/auto.misc  --timeout=5
#/net /etc/auto.net
</code></pre></td></tr></table>

<p>
Mon fichier <code>/etc/auto.misc</code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#
# $Id: auto.misc,v 1.2 2003/09/29 08:22:35 raven Exp $
#
# This is an automounter map and it has the following format
# key [ -mount-options-separated-by-comma ] location
# Details may be found in the autofs(5) manpage

cdrom   -fstype=iso9660,ro,nosuid,nodev,noexec  :/dev/cdrom
usb1    -fstype=vfat,sync,nosuid,nodev,noexec,umask=000,iocharset=iso8859-15  :/dev/sdf1
usb2    -fstype=vfat,sync,nosuid,nodev,noexec,umask=000,iocharset=iso8859-15  :/dev/sdg1

# the following entries are samples to pique your imagination
[...]
</code></pre></td></tr></table>

<p>
Ces fichiers configurent autofs ainsi :
</p>

<ul>
  <li>En cas d'accès à <code>/misc/cdrom</code>, <code>/misc/cdrom</code> est monté
automatiquement sur le périphérique <code>/dev/cdrom</code>. Idem avec <code>usb1</code> et <code>usb2</code>.</li>
  <li>Option <b>--timeout=5</b>&nbsp;-&gt;&nbsp;Une fois sorti du système de fichier,
il est démonté automatiquement après 5 secondes.</li>
  <li>Quelques options règlent le montage des systèmes de fichier :
  <ul>
    <li><b>iso9660</b>, <b>vfat</b>&nbsp;-&gt;&nbsp;Type du système de fichier.
    <li><b>ro</b>&nbsp;-&gt;&nbsp;Le CD est en lecture seule.</li>
    <li><b>nosuid,nodev,noexec</b>&nbsp;-&gt;&nbsp;Options de sécurité.</li>
    <li><b>sync</b>&nbsp;-&gt;&nbsp;Les opérations d'écriture sur la clé USB sont faites de
manière synchrone. Cela diminue de risque de corrompre la clé si elle est débranchée
inopinément. D'après la documentation de mount, seuls les systèmes de fichiers ext2 et ext3
gèrent cette option. À voir.</li>
    <li><b>umask=000</b>&nbsp;-&gt;&nbsp;Les utilisateurs ont tous les droits
sur la clé.</li>
    <li><b>iocharset=iso8859-15</b>&nbsp;-&gt;&nbsp;Est sensé prendre en compte cet encodage
sur la clé. Dans la pratique, ne sert à rien (?).</li>
  </ul>
</ul>

<p>
autofs crée à la volée le répertoire <code>/misc</code>. Les sous-répertoires de
<code>/misc</code> (<code>/misc/cdrom</code>, ...) ne sont pas visibles tant que
l'on n'y accède pas. L'accès peut consister à lire le contenu, ou bien à le définir
comme répertoire courant (commande <code>cd /misc/cdrom</code>). Si l'on se
contente de lire le contenu, le périphérique est monté, lu, puis après 5 secondes,
il est démonté. Comme ce mécanisme est transparent, cela ne pose aucun problème.
</p>

<p>
Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>cd /misc</b>
maison-2:/misc# <b>ls -l</b>
total 0
maison-2:/misc# <b>cd cdrom</b>
-su: cd: cdrom: Aucun fichier ou répertoire de ce type
maison-2:/misc# <b>ls -l</b>
total 0
  [insertion d'un DVD dans le lecteur]
maison-2:/misc# <b>cd cdrom</b>
maison-2:/misc/cdrom# <b>ls</b>
autorun.bat  debian  doc      isolinux    pics  README.html          README.mirrors.txt  tools
autorun.inf  dists   install  md5sum.txt  pool  README.mirrors.html  README.txt
maison-2:/misc/cdrom# <b>cd ..</b>
maison-2:/misc# <b>ls -l</b>
total 4
dr-xr-xr-x 10 root root 4096 2005-06-05 14:36 cdrom
  [attente de quelques secondes]
maison-2:/misc# <b>ls -l</b>
total 0
maison-2:/misc#
</code></pre></td></tr></table>

<p>
Le fonctionnement décrit ci-dessus manque de confort car on ne voit pas
le répertoire tant que l'on n'y a pas accédé. Du coup, la complétion
automatique (ligne de commande du shell) ne fonctionne pas, et dans
un programme graphique tel que Konqueror, il faut saisir
leur nom au clavier.
</p>

<p>
La solution consiste à créer des liens symboliques pointant sur les répertoires
gérés par autofs.<br>
J'ai créé <code>/mnt/cdrom</code> pointant sur <code>/misc/cdrom</code>, idem pour
<code>usb1</code> et <code>usb2</code>. Résultat, <code>/mnt/cdrom</code> est
toujours visible, et il est monté et démonté automatiquement. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>cd /mnt</b>
maison-2:/mnt# <b>ls -l</b>
total 0
maison-2:/mnt# <b>ln -s /misc/cdrom cdrom</b>
maison-2:/mnt# <b>ln -s /misc/usb1 usb1</b>
maison-2:/mnt# <b>ln -s /misc/usb2 usb2</b>
maison-2:/mnt# <b>ls -l</b>
total 0
lrwxrwxrwx 1 root root 11 2007-02-17 12:36 cdrom -> /misc/cdrom
lrwxrwxrwx 1 root root 10 2007-02-17 12:37 usb1 -> /misc/usb1
lrwxrwxrwx 1 root root 10 2007-02-17 12:37 usb2 -> /misc/usb2
maison-2:/mnt# <b>cd cdrom</b>
-su: cd: cdrom: Aucun fichier ou répertoire de ce type
maison-2:/mnt#
</code></pre></td></tr></table>

<p>
Avec ce système, j'accède au CD et aux deux ports USB uniquement
à travers les noms <code>/mnt/cdrom</code>, <code>/mnt/usb1</code> et
<code>/mnt/usb2</code>, qui sont toujours visibles.
</p>

<hr>

<h3><a name="chiffrement_homedir">2.4 Chiffrement de volume</a></h3>

<p>
Je vais décrire plusieurs opérations :
</p>

<ul>
  <li>Création et utilisation d'un volume chiffré</li>
  <li>Montage d'un volume chiffré au login d'un utilisateur, à la volée</li>
  <li>Montage d'un volume chiffré au démarrage de Linux</li>
</ul>

<h4>2.4.1 Pré-requis</h4>

<h5>2.4.1.1 Paquetages Debian</h5>

<p>
Le paquetage s'appelle cryptsetup. Il dépend (entre autres) de
dmsetup. Exemple sur ma Debian.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>dpkg -l "*setup"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                           Version                       Description
+++-=============================-=============================-==========================================================================
[...]
ii  cryptsetup                    1.0.4+svn26-1                 configures encrypted block devices
ii  dmsetup                       1.02.08-1                     The Linux Kernel Device Mapper userspace library
[...]
</code></pre></td></tr></table>

<h5>2.4.1.2 Options de compilation du noyau</h5>

<p>
TODO
</p>

<h4><a name="m242">2.4.2 Création d'un volume chiffré</a></h4>

<p>
La commande <code>cryptsetup</code> permet de créer un volume chiffré. Elle
peut être vue comme un raccourci simplifié des commandes permettant de créer un
volume chiffré avec <code>dmsetup</code> seul.
</p>

<p>
Exemple de création d'un volume chiffré.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>/sbin/cryptsetup -c twofish -h sha512 -s 256 create _my_ciphered_dev_sda5 /dev/sda5</b>
Command failed: Incompatible libdevmapper 1.02.08 (2006-07-17)(compat) and kernel driver
sebastien@maison-2:~$ <b>su -</b>
maison-2:~# <b>/sbin/cryptsetup -c twofish -h sha512 -s 256 create _my_ciphered_dev_sda5 /dev/sda5</b>
Enter passphrase:
maison-2:~# <b>dmsetup info _my_ciphered_dev_sda5</b>
Name:              _my_ciphered_dev_sda5
State:             ACTIVE
Tables present:    LIVE
Open count:        0
Event number:      0
Major, minor:      254, 0
Number of targets: 1
maison-2:~# <b>dmsetup table _my_ciphered_dev_sda5</b>
0 18249777 crypt twofish-cbc-plain 755f22d17396775dc2f8525a9aca98b47c0248c892f11dfb9355487be88851c8 0 8:5 0
maison-2:~# <b>cryptsetup status _my_ciphered_dev_sda5</b>
/dev/mapper/_my_ciphered_dev_sda5 is active:
  cipher:  twofish-cbc-plain
  keysize: 256 bits
  device:  /dev/.static/dev/sda5
  offset:  0 sectors
  size:    18249777 sectors
  mode:    read/write
</code></pre></td></tr></table>

<p>
<b>Remarque</b>
</p>

<p>
Lorsque <code>cryptsetup</code> est exécuté sans les privilèges super-utilisateur,
cela produit l'erreur "Incompatible libdevmapper..." que l'on peut voir ci-dessus.
</p>

<h4>2.4.3 Utilisation d'un volume chiffré</h4>

<p>
Un volume géré par <code>dmsetup</code> est vu comme <code>/dev/mapper/<em>nom_dm</em></code>.
Ainsi le volume créé tout-à-l'heure est vu comme
<code>/dev/mapper/_my_ciphered_dev_sda5</code>. Ce nom de volume doit ensuite être
utilisé comme un volume normal, pour y créer un système de fichier, le monter, etc.<br>
Exemple.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>mkfs.ext3 /dev/mapper/_my_ciphered_dev_sda5</b>
[...]
maison-2:~# <b>mkdir /mnt/rep_chiffre</b>
maison-2:~# <b>mount -t ext3 /dev/mapper/_my_ciphered_dev_sda5 /mnt/rep_chiffre</b>
maison-2:~# <b>ls -al /mnt/rep_chiffre</b>
total 24
drwxr-xr-x 3 root root  4096 2007-02-17 15:39 .
drwxr-xr-x 3 root root  4096 2007-02-17 15:40 ..
drwx------ 2 root root 16384 2007-02-17 15:39 lost+found
maison-2:~# <b>mount</b>
[...]
/dev/mapper/_my_ciphered_dev_sda5 on /mnt/rep_chiffre type ext3 (rw)
maison-2:~#
</code></pre></td></tr></table>

<h4>2.4.4 Montage d'un volume chiffré au login</h4>

<p>
Rédigé d'après un article paru dans <em>Linux Magazine</em>.<br>
Le volume chiffré monté au login sera le répertoire personnel de l'utilisateur,
qui sera <code>/chome/sebastien</code>.<br>
L'URL <a href="http://EncryptionHOWTO.sourceforge.net">http://EncryptionHOWTO.sourceforge.net</a> est
un peu datée (2000 ; elle ne parle pas du <em>device mapper</em>) mais elle peut être utile.
</p>

<h4>2.4.4.1 Pré-requis - paquetages Debian</h4>

<p>
Le paquetage pour monter un volume chiffré à la volée est libpam-mount. Il permet
également le montage de volumes SAMBA (partage Windows) et NFS. Le paquetage
openssl est également requis, pour chiffrer le fichier contenant la clé.<br>
Sur ma Debian :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l libpam-mount</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  libpam-mount              0.18-3                    PAM module that can mount volumes for a user session
sebastien@maison-2:~$ <b>dpkg -l openssl</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  openssl                   0.9.8c-4                  Secure Socket Layer (SSL) binary and related cryptographic tools
</code></pre></td></tr></table>

<p>
Naturellement, libpam-mount ne fonctionne que si PAM est utilisé. C'est le cas par défaut.
</p>

<p>
<b><a name="remarque_PAM">Remarque au sujet de PAM</a></b>
</p>

<p>
<b>PAM</b> signifie <em>Pluggable Authentication Modules</em>, c'est un système
permettant de gérer l'authentification.<br>
Son point fort est d'être conçu dès l'origine comme étant totalement configurable à l'aide de
modules. PAM est configuré dans le fichier <code>/etc/pam.conf</code> et surtout dans
le répertoire <code>/etc/pam.d</code>. Les modules se trouvent dans <code>/lib/security</code>.
Ses possibilités sont illimitées.
</p>

<p>
Page d'accueil de PAM : <a href="http://www.kernel.org/pub/linux/libs/pam">http://www.kernel.org/pub/linux/libs/pam</a><br>
<a name="manuels_PAM"></a>
&nbsp;&nbsp;&nbsp;Manuels PAM : <a href="http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html">http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html</a><br>
Documentation sur l'authentification Linux : <a href="http://www.faqs.org/docs/Linux-HOWTO/User-Authentication-HOWTO.html">http://www.faqs.org/docs/Linux-HOWTO/User-Authentication-HOWTO.html</a>
</p>

<h4>2.4.4.2 Volume chiffré - préparation</h4>

<p>
Méthode employée :
</p>

<ul>
  <li>Créer une clé aléatoire (de 256 bits), qui servira ultérieurement à chiffrer le volume</li>
  <li>Chiffrer cette clé avec le même mot de passe du login de l'utilisateur, et l'écrire dans un fichier</li>
  <li>Créer un volume chiffré en déchiffrant à la volée le contenu du fichier, grâce au mot de passe du login<br><br></li>
  <li>Au login de l'utilisateur, libpam-mount retrouvera la clé de chiffrement du volume en déchiffrant
le fichier grâce au mot de passe du login</li>
</ul>

<p>
Ainsi la clé de chiffrement du volume n'est jamais enregistrée en clair - si quelqu'un parvient à récupérer
le fichier contenant la clé, il ne peut rien en faire sans le mot de passe.
</p>

<p>
<b>Création du fichier contenant la clé de chiffrement</b>
</p>

<p>
Des exemples très utiles sont donnés dans le fichier <code>/usr/share/doc/libpam-mount/README.Debian.gz</code>,
et ce qui suit (y compris la configuration de libpam-mount) ne fait que le copier.<br>
Ci-dessous nous utilisons <code>dd</code> avec <code>/dev/urandom</code> pour produire 32
octets aléatoires (soit 256 bits), que nous chiffrons avec <code>openssl</code>.<br>
Ensuite nous donnons au fichier le propriétaire et les droits appropriés, car même s'il est chiffré,
autant ne pas exposer son contenu.
</p>

<p>
Ci-dessous, l'utilisateur lui-même ne peut pas modifier le fichier contenant la clé.
C'est aussi bien comme ça, autant faire ce genre de manipulation en tant que root.
</p>

<p>
<b>Attention, la perte de ce fichier signifie la perte irrémédiable du volume chiffré !</b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>dd if=/dev/urandom bs=1c count=32 | openssl enc -aes-256-ecb > /home/sebastien.key</b>
32+0 enregistrements lus
32+0 enregistrements écrits
32 octets (32 B) copiés, 0,000130692 seconde, 245 kB/s
enter aes-256-ecb encryption password:[saisie du mot de passe du login de l'utilisateur]
Verifying - enter aes-256-ecb encryption password:[saisie du mot de passe du login de l'utilisateur]
maison-2:~# <b>chown sebastien.sebastien /home/sebastien.key</b>
maison-2:~# <b>chmod 400 /home/sebastien.key</b>
maison-2:~# <b>ls -l /home</b>
[...]
-r--------  1 sebastien sebastien   64 2007-02-18 16:21 sebastien.key
[...]
</code></pre></td></tr></table>

<p>
<b>Protéger le fichier sur ext2 ou ext3</b>
</p>

<p>
Avec <code>chattr</code>, le fichier peut être verrouillé à 100%. Même le super-utilisateur
ne pourra pas le modifier ni le supprimer, sauf à ôter la protection décrite ci-dessous.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/home# <b>chattr +i sebastien.key</b>
maison-2:/home# <b>lsattr sebastien.key</b>
----i------------- sebastien.key
maison-2:/home# <b>rm sebastien.key</b>
rm: détruire un fichier protégé en écriture fichier régulier `sebastien.key'? y
rm: ne peut enlever `sebastien.key': Opération non permise
</code></pre></td></tr></table>

<p>
<b>Création du volume chiffré</b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>openssl enc -d -aes-256-ecb -in /home/sebastien.key | cryptsetup -c twofish -h sha512 -s 256 create _dev_sda5 /dev/sda5</b>
enter aes-256-ecb decryption password:[saisie du mot de passe du login de l'utilisateur]
maison-2:~#
</code></pre></td></tr></table>

<p>
A ce stade nous disposons d'un volume <code>/dev/mapper/_dev_sda5</code>, chiffré avec une clé se
trouvant dans le fichier <code>/home/sebastien.key</code>, lequel fichier est lui-même chiffré
avec le mot de passe de <code>sebastien</code>.<br>
Il est donc question ici de deux chiffrements bien distincts :
</p>

<ul>
  <li>Le chiffrement du fichier <code>/home/sebastien.key</code></li>
  <ul>
    <li>Algorithme : aes-256-ecb</li>
    <li>Clé : mot de passe du login de l'utilisateur <code>sebastien</code></li>
  </ul>
  <li>Le chiffrement du volume <code>/dev/sda5</code></li>
  <ul>
    <li>Algorithme : twofish, hash : sha512, taille de clé : 256 bits</li>
    <li>Clé : le contenu (décodé) de <code>/home/sebastien.key</code></li>
  </ul>
</ul>

<h4>2.4.4.3 Configuration de libpam-mount</h4>

<p>
<b>Fichier <code>/etc/security/pam_mount.conf</code></b>
</p>

<p>
J'ai laissé uniquement les lignes non commentées, et mis en gras les lignes modifiées par rapport
au fichier d'origine.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>[...]
debug 0
[...]
<b>mkmountpoint 0</b>
[...]
fsckloop /dev/loop7
[...]
options_allow nosuid,nodev,loop,encryption,fsck
[...]
options_require nosuid,nodev
[...]
lsof /usr/bin/lsof %(MNTPT)
fsck /sbin/fsck -p %(FSCKTARGET)
losetup /sbin/losetup -p0 "%(before=\"-e\" CIPHER)" "%(before=\"-k\" KEYBITS)" %(FSCKLOOP) %(VOLUME)
unlosetup /sbin/losetup -d %(FSCKLOOP)
cifsmount /bin/mount -t cifs //%(SERVER)/%(VOLUME) %(MNTPT) -o "user=%(USER),uid=%(USERUID),gid=%(USERGID)%(before=\",\" OPTIONS)"
smbmount /usr/bin/smbmount   //%(SERVER)/%(VOLUME) %(MNTPT) -o "username=%(USER),uid=%(USERUID),gid=%(USERGID)%(before=\",\" OPTIONS)"
ncpmount /usr/bin/ncpmount   %(SERVER)/%(USER) %(MNTPT) -o "pass-fd=0,volume=%(VOLUME)%(before=\",\" OPTIONS)"
smbumount /usr/bin/smbumount %(MNTPT)
ncpumount /usr/bin/ncpumount %(MNTPT)
fusemount  /sbin/mount.fuse    %(VOLUME) %(MNTPT) "%(before=\"-o\" OPTIONS)"
fuseumount /usr/bin/fusermount -u %(MNTPT)
[...]
umount /bin/umount %(MNTPT)
[...]
lclmount /bin/mount -p0 -t %(FSTYPE) %(VOLUME) %(MNTPT) "%(before=\"-o\" OPTIONS)"
cryptmount /bin/mount -t crypt "%(before=\"-o\" OPTIONS)" %(VOLUME) %(MNTPT)
nfsmount /bin/mount %(SERVER):%(VOLUME) %(MNTPT) "%(before=\"-o\" OPTIONS)"
mntagain /bin/mount --bind %(PREVMNTPT) %(MNTPT)
[...]
mntcheck /bin/mount # For BSDs (don't have /etc/mtab)
pmvarrun /usr/sbin/pmvarrun -u %(USER) -o %(OPERATION)
[...]
<b>volume sebastien crypt - /dev/sda5 /chome/sebastien exec,fsck,nodev,nosuid,fstype=ext3,cipher=twofish,hash=sha512,keysize=256 aes-256-ecb /home/sebastien.key</b>
[...]
</code></pre></td></tr></table>

<p>
L'option <b>mkmountpoint</b> vaut 1 par défaut, comme le répertoire de montage sera créé d'avance,
je préfère la mettre à 0.<br>
Ici le montage est effectué dans <code>/chome/sebastien</code>.
</p>

<p>
<b>Fichier <code>/etc/pam.d/common-pammount</code></b>
</p>

<p>
En cas d'échec du montage du volume chiffré, il faut demander à libpam-mount de faire
échouer le login - en effet, c'est le répertoire personnel de l'utilisateur qui est monté.<br>
Pour ce faire, nous allons remplacer <code>optional</code> par <code>required</code>
dans les lignes <code>auth</code> et <code>session</code>.
</p>

<p>
Comme d'habitude, j'ai enlevé les commentaires et mis en gras les lignes modifiées.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>[...]
<b>auth       required   pam_mount.so use_first_pass</b>
<b>session    required   pam_mount.so use_first_pass</b>
[...]
</code></pre></td></tr></table>

<p>
l'option <b>use_first_pass</b> évite de demander plusieurs fois le mot de passe à
l'utilisateur.
</p>

<h4>2.4.4.4 Répertoire de montage</h4>

<p>
Par défaut, un répertoire monté a pour propriétaire root.root et comme droits, 755 (=&gt; pas
d'accès en écriture pour les utilisateurs autres que root). Comme il s'agit d'un répertoire
personnel, c'est ennuyeux : l'utilisateur doit avoir accès en écriture à son répertoire
personnel, de plus il doit pouvoir en interdire l'accès aux autres utilisateurs s'il le souhaite.
</p>

<p>
La commande <code>mount</code> ne permet pas de régler cela, et je n'ai pas trouvé de solution
avec libpam-mount ou <code>cryptsetup</code>, ni avec <code>tune2fs</code>. La solution que
j'ai trouvée consiste à :
</p>

<ul>
  <li>Monter le répertoire</li>
  <li>Définir le propriétaire du répertoire</li>
  <li>Définir le niveau d'accès</li>
  <li>Démonter le répertoire</li>
</ul>

<p>
Naturellement les commandes à exécuter sont :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>mkdir /chome</b>
maison-2:~# <b>mkdir /chome/sebastien</b>
maison-2:~# <b>mount -t ext3 /dev/mapper/_dev_sda5 /chome/sebastien</b>
maison-2:~# <b>mount</b>
[...]
/dev/mapper/_dev_sda5 on /chome/sebastien type ext3 (rw)
maison-2:~# <b>chown sebastien.sebastien /chome/sebastien</b>
maison-2:~# <b>chmod 750 /chome/sebastien</b>
maison-2:~# <b>umount /chome/sebastien</b>
</code></pre></td></tr></table>

<p>
Lors de montages ultérieurs, ces informations sont rémanentes.<br>
Pourquoi ?<br>
Je l'ignore, et si quelqu'un pouvait m'éclairer, ça m'arrangerait.<br>
Il semble que le propriétaire et les droits après <code>mount</code>
sont totalement distincts de ce qu'ils sont <code>avant</code>.<br>
Bref, à l'arrivée, le répertoire <code>/chome/sebastien</code> a les bons droits et propriétaire,
mais cette solution est gruiiik car j'ignore l'origine de cette rémanence, et il est
possible que l'information "saute" un jour.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>ls -l /chome</b>
total 4
drwxr-x--- 23 sebastien sebastien 4096 2007-02-18 15:46 sebastien
</code></pre></td></tr></table>

<h4>2.4.4.5 Répertoire personnel de l'utilisateur</h4>

<p>
A modifier avec la commande<br>
<code>usermod -d <em>nouveau_répertoire</em> -u <em>login</em></code>
</p>

<h4>2.4.4.6 Montage au login console</h4>

<p>
Par "login console" on entend le login en mode texte dans l'un des 6 terminaux
virtuels qui existent par défaut (Alt+F1..Alt+F6 ou bien Ctrl+Alt+F1..Ctrl+Alt+F6
depuis l'interface graphique).
</p>

<p>
<b>Fichier <code>/etc/pam.d/login</code></b>
</p>

<p>
Il faut ajouter la ligne<br>
<code>@include common-pammount</code><br>
<b>après</b> les inclusions de <code>common-auth</code> et <code>common-session</code>.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>[...]
<b># Added by Sébastien Millet, February 2007</b>
<b>@include common-pammount</b>
</code></pre></td></tr></table>

<h4>2.4.4.7 Montage au login kdm</h4>

<p>
kdm est le pendant de xdm avec KDE, pour se loguer en mode graphique.
</p>

<p>
Faire dans le fichier <code>/etc/pam.d/kdm</code>, la même chose que décrit précédemment
avec <code>/etc/pam.d/login</code>.<br>
Comme ce fichier est court, je vais en donner l'intégralité ici :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#
# /etc/pam.d/kdm - specify the PAM behaviour of kdm
#
auth       required     pam_nologin.so
auth       required     pam_env.so readenv=1
auth       required     pam_env.so readenv=1 envfile=/etc/default/locale
@include common-auth
session    required     pam_limits.so
@include common-account
@include common-password
@include common-session

# Added by Sébastien Millet, February 2007
@include common-pammount
</code></pre></td></tr></table>

<p>
Même chose avec gdm, pour lequel il faut modifier <code>/etc/pam.d/gdm</code> (non testé).
</p>

<h4>2.4.4.8 Remarques</h4>

<p>
<b>Effets de bord lorsque le répertoire personnel d'un utilisateur n'est pas toujours disponible</b>
</p>

<p>
Certains programmes tels que procmail ou spamassassin prennent
en compte des fichiers ou répertoires se trouvant dans le répertoire
personnel, même lorsque l'utilisateur n'est pas logué. Pour contourner la difficulté il
faut, au choix :
</p>

<ul>
  <li>Déplacer les fichiers dans un répertoire toujours disponible, et créer
des liens symboliques. Il faut créer ces mêmes liens symboliques
dans le répertoire <em>non monté</em>.<br>
  <ul>
    <li>Pour procmail, il faut déplacer le fichier <code>~/.procmailrc</code></li>
    <li>Pour spamassassin, il faut déplacer le répertoire <code>~/.spamassassin</code></li>
  </ul>
  <li>Configurer les programmes pour ne pas prendre en compte les fichiers
personnels. Bon courage !</li>
</ul>

<p>
<b>Programme <code>pmvarrun</code></b>
</p>

<p>
Pour démonter automatiquement un volume lorsque l'utilisateur ferme la session,
libpam-mount comptabilise le nombre de login avec le programme <code>pmvarrun</code>.<br>
Si le décompte est erroné, <code>pmvarrun</code> permet de modifier ce décompte, en indiquant
la quantité à ajouter avec l'option -o (0 = afficher le décompte courant, sans le modifier).<br>
Exemple avec un seul login en cours pour l'utilisateur <code>sebastien</code>:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>pmvarrun -u sebastien -o 0</b>
1
</code></pre></td></tr></table>

<h4>2.4.5 Montage d'un volume chiffré au démarrage</h4>

<p>
Après avoir créé le volume, cf. <a href="#m242">2.4.2 Création d'un volume chiffré</a>,
modifier les fichiers <code>/etc/default/cryptdisks</code> et <code>/etc/crypttab</code>. Exemple
avec également une partition <em>swap</em> chiffrée :
</p>

<p>
<b>Fichier <code>/etc/default/cryptdisks</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Run cryptdisks at startup ?
CRYPTDISKS_ENABLE=Yes

# Mountpoints to mount, before starting cryptsetup. This is useful for
# keyfiles on removable media. Seperate mountpoints by space.
CRYPTDISKS_MOUNT=""

# Default check script, see /lib/cryptsetup/checks/
# Takes effect, if the 'check' option is set in crypttab without a value
CRYPTDISKS_CHECK=vol_id

# Default precheck script, see
# Takes effect, if the 'precheck' option is set in crypttab without a value
CRYPTDISKS_PRECHECK=

# Default timeout in seconds for password prompt
# Takes effect, if the 'timeout' option is set in crypttab without a value
CRYPTDISKS_TIMEOUT=180
</code></pre></td></tr></table>

<p>
<b>Fichier <code>/etc/crypttab</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># &lt;target device&gt; &lt;source device&gt; &lt;key file&gt; &lt;options&gt;
chome /dev/hda8 none  cipher=twofish
cswap /dev/hda6 /dev/random cipher=twofish,swap
</code></pre></td></tr></table>

<p>
<b>Fichier <code>/etc/fstab</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
[...]
/dev/mapper/cswap   none       swap    sw                                 0   0
[...]
/dev/mapper/chome   /chome     ext3    defaults,errors=continue           0   2
</code></pre></td></tr></table>

<h4>2.4.6 Les extensions LUKS</h4>

<p>
LUKS n'était pas disponible lors de l'écriture initiale de ce document.<br>
LUKS signifie <em>Linux Unified Key Setup</em>. C'est une extension de
cryptsetup permettant de gérer plusieurs mots de passe pour un volume,
et de modifier des mots de passe sans re-chiffrer le volume.
</p>

<p>
LUKS définit 8 slots en début de partition, qui permettent d'accéder à la clé maître,
laquelle chiffre le volume. Cette clé maître est totalement aléatoire. L'utilisateur
n'accède jamais directement à la clé maître. Ainsi, jusqu'à huit mots de passe peuvent
être définis pour accéder à un volume, et on peut facilement changer un mot de passe
(cela modifie le slot, mais pas la clé maître, ainsi les données chiffrées
n'ont pas à être réécrites).
</p>

<p>
Pour utiliser les extensions LUKS, il faut préciser luksFormat en premier paramètre
de cryptsetup (sans tiret), exemple&nbsp;:<br>
<code>cryptsetup luksFormat -c twofish -h sha512 /dev/sda5</code>
</p>

<p>
LUKS est décrit dans les pages de manuel de cryptsetup.
</p>

<hr>

<h3><a name="cable_null_modem">2.5 Connexion de deux machines avec un cable Null modem</a></h3>

<p>
Le document <a href="http://tldp.org/HOWTO/Serial-Laplink-HOWTO/index.html">http://tldp.org/HOWTO/Serial-Laplink-HOWTO/index.html</a>
peut être utile.
</p>

<ul>
  <li>L'une des deux machines exécutera le serveur PPP, elle sera appelée le <em>serveur</em>,
d'adresse IP 192.168.0.1.</li>
  <li>L'autre machine qui se connectera en tant que client PPP, sera appelée le <em>client</em>,
d'adresse IP 192.168.0.2.</li>
  <li>Le cable est branché sur le deuxième port série du serveur (ttyS1) et sur le premier
port série du client (ttyS0).</li>
  <li>L'utilisateur qui se connecte depuis le client est <em>sebastien</em>.</li>
</ul>

<h4>2.5.1 Pré-requis</h4>

<p>
Sur les deux machines, le paquetage ppp doit être installé. Dans cette suite de documents,
la rubrique <a href="howto-network-1.0.html#config-rtc">2.2 Connexion par RTC (modem téléphonique)</a>,
dans le document <a href="howto-network-1.0.html">Configuration réseau sur Debian Testing
(décembre 2006 - février 2007)</a>, décrit comment installer PPP. Ici, les paquetages pppconfig
et resolvconf sont inutiles.
</p>

<h4>2.5.2 Configuration de PPP sur le serveur</h4>

<p>
<b>Fichier <code>/etc/ppp/options</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/ppp/options
lock
</code></pre></td></tr></table>

<p>
<b>Fichier <code>/etc/ppp/pap-secrets</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Secrets for authentication using PAP
# client  server  secret      IP addresses
* * ""  192.168.0.2
</code></pre></td></tr></table>

<p>
<b>Fichier <code>/etc/ppp/options.ttyS1</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/ppp/options.ttyS1
lock
auth
login
asyncmap 0
crtscts
local
silent

# These two lines are necessary I don't know why.
# If not specified, errors "Received bad configure-ack" are
# raised on the client.
noaccomp
noccp

192.168.0.1:192.168.0.2
require-pap
115200
</code></pre></td></tr></table>

<h4>2.5.3 Configuration de PPP sur le client</h4>

<p>
<b>Fichier <code>/etc/ppp/options.ttyS0</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/ppp/options.ttyS0
lock
115200
crtscts
local
user sebastien
noauth
</code></pre></td></tr></table>
<p>

<b>Fichier <code>/etc/ppp/pap-secrets</code></b>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/ppp/pap-secrets
sebastien * <em>zesrvpassword</em>
</code></pre></td></tr></table>

<h4>2.5.4 Démarrage de la connexion</h4>

<p>
Sur le serveur, exécuter<br>
<code>/usr/sbin/pppd /dev/ttyS1 nodetach</code><br>
</p>

<p>
Sur le client, exécuter<br>
<code>/usr/sbin/pppd /dev/ttyS0 nodetach</code>
</p>

<p>
Résultat :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>TODO - je ne l'ai pas fait depuis un moment - avec un boîtier ADSL
on s'habitue vite au confort...
</code></pre></td></tr></table>

<hr>

<h3><a name="transfert_linux">2.6 Transfert entre deux Linux</a></h3>

<p>
On suppose que les deux Linux se voient sur un réseau TCP/IP.<br>
Pour procéder rapidement, j'utilise ssh.
</p>

<ol>
  <li>Installer le paquetage <b>openssh-server</b> si nécessaire. Sur ma Debian :
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l "openssh*"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  openssh-client            4.3p2-8                   Secure shell client, an rlogin/rsh/rcp replacement
ii  openssh-server            4.3p2-8                   Secure shell server, an rshd replacement
</code></pre></td></tr></table></li>
  <li>Démarrer le démon ssh en exécutant<br>
<code><b>/etc/init.d/ssh start</b></code></li>
  <li>Avec <code><b>rcconf</b></code>, désactiver le lancement du démon ssh au démarrage - je me
sers très rarement de ssh, autant ne pas le lancer automatiquement.</li>
  <li>Pour vérifier que le démon ssh est bien à l'écoute côté serveur, exécuter (sur le serveur)<br>
<code><b>ssh localhost</b></code></li>
  <li>Si le firewall décrit dans cette série de documents est activé, exécuter<br>
<code>iptables -I block 7 -m state --state NEW -p tcp -s <em>adresse_ip_source</em> --destination-port 22 -j ACCEPT</code><br>
Pour plus de détail, aller ici <a href="howto-network-1.0.html#firewall">3.3 Lancer le firewall automatiquement</a>,
dans le document <a href="howto-network-1.0.html">Configuration réseau sur Debian Testing
(décembre 2006 - février 2007)</a><br>
Si vous êtes paranoïaque, vous pouvez ajouter l'option <code>-m mac --mac-source 01:23:45:67:89:AB</code>. Résultat&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>iptables -vnL --line-numbers</b>
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
num   pkts bytes target     prot opt in     out     source               destination
1     6643 4297K block      0    --  *      *       0.0.0.0/0            0.0.0.0/0

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
num   pkts bytes target     prot opt in     out     source               destination
1        0     0 block      0    --  *      *       0.0.0.0/0            0.0.0.0/0

Chain OUTPUT (policy ACCEPT 6175 packets, 2030K bytes)
num   pkts bytes target     prot opt in     out     source               destination

Chain block (2 references)
num   pkts bytes target     prot opt in     out     source               destination
1     6366 4281K ACCEPT     0    --  *      *       0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
2      185 11410 ACCEPT     0    --  !eth0  *       0.0.0.0/0            0.0.0.0/0           state NEW
3        0     0 ACCEPT     tcp  --  eth0   *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:37351
4        0     0 ACCEPT     udp  --  eth0   *       0.0.0.0/0            0.0.0.0/0           udp dpt:37351
5        0     0 ACCEPT     tcp  --  eth0   *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:4662
6        0     0 ACCEPT     udp  --  eth0   *       0.0.0.0/0            0.0.0.0/0           udp dpt:4672
7        0     0 ACCEPT     tcp  --  *      *       192.168.1.3          0.0.0.0/0           state NEW tcp dpt:22
8       92  4303 DROP       0    --  *      *       0.0.0.0/0            0.0.0.0/0
</code></pre></td></tr></table></li>
  <li>Sur le poste client, exécuter <code>scp</code> pour transférer un ou plusieurs fichiers - l'option
<b>-r</b> permet de transférer des répertoires récursivement. Utiliser <b>-o&nbsp;User=<em>nom_login</em></b>
pour changer l'utilisateur. Exemple avec transfert de <code>.gftp</code> (côté local = client scp)
vers <code>~/trans</code> (côté distant = serveur ssh). Ici l'option <b>-o User=sebastien</b> est inutile
puisque le nom local est identique au nom distant.
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>scp -r -o User=sebastien .gftp 192.168.1.5:trans/</b>
The authenticity of host '192.168.1.5 (192.168.1.5)' can't be established.
RSA key fingerprint is 2a:59:9b:9d:ac:75:f6:60:a6:d4:cd:3b:70:5d:a7:aa.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.1.5' (RSA) to the list of known hosts.
sebastien@192.168.1.5's password:
gftprc                                                                                    100%   10KB  10.3KB/s   00:00
bookmarks                                                                                 100% 6133     6.0KB/s   00:00
gftp.log                                                                                  100% 5260     5.1KB/s   00:00
sebastien@maison-2:~$
</code></pre></td></tr></table></li>
</ol>

<hr>

<h3><a name="jvm_iceweasel">2.7 JAVA Sun&nbsp;&reg; sur Iceweasel (firefox)</a></h3>

<p>
Nous allons exécuter le fichier <code>.bin</code> à télécharger depuis le site de Sun&nbsp;&reg;,
mais en passant par make-jpkg pour une installation propre. Ainsi la machine virtuelle
sera gérée par APT.
</p>

<h4>Pré-requis</h4>

<p>
Installer le paquetage java-package. Pour fonctionner il a besoin (entre autres)
du paquetage fakeroot. Sur ma Debian :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l java-package</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  java-package              0.28                      utility for building Java(TM) 2 related Debian packages
sebastien@maison-2:~$ <b>dpkg -l fakeroot</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  fakeroot                  1.5.10                    Gives a fake root environment
</code></pre></td></tr></table>

<h4>Récupération du binaire d'installation</h4>

<p>
Télécharger le .bin correspondant à l'architecture depuis l'URL
<a href="http://java.com/fr/download/manual.jsp">http://java.com/fr/download/manual.jsp</a>. A la date
d'écriture de cette page (22/02/2007), le fichier pour mon PC 32 bits est
<code>jre-1_5_0_11-linux-i586.bin</code>.
</p>

<h4>Création du paquetage Debian</h4>

<p>
Exécuter <code>make-jpkg</code> sous <em>fakeroot</em>. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~/tmp$ <b>fakeroot make-jpkg jre-1_5_0_11-linux-i586.bin</b>
Creating temporary directory: /tmp/make-jpkg.sGcXn10801
Loading plugins: blackdown-j2re.sh blackdown-j2sdk.sh common.sh ibm-j2re.sh ibm-j2sdk.sh j2re.sh j2sdk-doc.sh j2sdk.sh j2se.sh sun-j2re.sh sun-j2sdk-doc.sh sun-j2sdk.sh
[...]
Detected product:
    Java(TM) Runtime Environment (JRE)
    Standard Edition, Version 1.5.0+update11
    Sun Microsystems(TM), Inc.
Is this correct [Y/n]:
[...]

sebastien@maison-2:~/tmp$ <b>ls -l</b>
total 47168
-rw-r----- 1 sebastien sebastien 17115102 2007-02-22 18:05 jre-1_5_0_11-linux-i586.bin
-rw-r----- 1 sebastien sebastien 31120704 2007-02-22 18:09 sun-j2re1.5_1.5.0+update11_i386.deb
</code></pre></td></tr></table>

<h4>Installation du paquetage Debian</h4>

<p>
Exécuter (en tant que root)<br>
<code>dpkg -i jre-1_5_0_11-linux-i586.bin</code>
</p>

<p>
Pour afficher des informations sur le paquetage créé, exécuter<br>
<code>dpkg-deb --info <em>nom_fichier_paquetage</em></code><br>
Pour afficher la liste des fichiers contenus dans le .deb, exécuter<br>
<code>dpkg -c <em>nom_fichier_paquetage</em></code><br>
Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~/tmp$ <b>dpkg-deb --info sun-j2re1.5_1.5.0+update11_i386.deb</b>
 nouveau paquet Debian, version 2.0.
 taille 31120704 octets : archive de contrôle = 19938 octets.
    1081 octets,    21 lignes      control
   50781 octets,   649 lignes      md5sums
    2634 octets,    95 lignes   *  postinst             #!/bin/bash
    1788 octets,    76 lignes   *  prerm                #!/bin/bash
 Package: sun-j2re1.5
 Version: 1.5.0+update11
 Section: non-free/devel
 Priority: optional
 Architecture: i386
 Depends: libasound2 (>> 1.0.12), libc6 (>= 2.3.6-6), libx11-6, libxext6, libxi6, libxp6, libxt6, libxtst6
 Recommends: netbase, libx11-6 | xlibs, libasound2, libgtk1.2
 Replaces: sun-j2re1.5debian
 Provides: java-virtual-machine, java-runtime, java2-runtime, java-browser-plugin, j2re1.5
 Installed-Size: 88408
 Maintainer: Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;
 Description: Java(TM) JRE, Standard Edition, Sun Microsystems(TM)
  The Java(TM) 2 Runtime Environment contains the Java virtual machine,
  runtime class libraries, and Java application launcher that are
  necessary to run programs written in the Java progamming language
  (this includes the Java 2 Plug-In for Netscape and Mozilla
  browsers). It is not a development environment and doesn't contain
  development tools such as compilers or debuggers. For development
  tools, see the Java 2 SDK, Standard Edition.
  .
  This package has been automatically created with java-package (0.28).

sebastien@maison-2:~/tmp$ <b>dpkg -l "sun*"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  sun-j2re1.5               1.5.0+update11            Java(TM) JRE, Standard Edition, Sun Microsystems(TM)
un  sun-j2re1.5debian         &lt;néant&gt;                  (aucune description n'est disponible)
</code></pre></td></tr></table>

<h4>Configuration de Iceweasel</h4>

<p>
Le site de Sun&nbsp;&reg; donne les instructions pour procéder. Pour une installation standard
de Iceweasel et de la machine virtuelle, dans le répertoire <code>/usr/lib/iceweasel/plugins</code>,
créer un lien symbolique vers <code>/usr/lib/j2re1.5-sun/plugin/i386/ns7/libjavaplugin_oji.so</code>
(de même nom). Ensuite redémarrer Iceweasel. Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-1:/usr/lib/iceweasel/plugins# <b>ln -s /usr/lib/j2re1.5-sun/plugin/i386/ns7/libjavaplugin_oji.so .</b>
maison-2:/usr/lib/iceweasel/plugins# <b>ls -l</b>
total 12
lrwxrwxrwx 1 root root   57 2007-02-06 14:34 libjavaplugin_oji.so -> /usr/lib/j2re1.5-sun/plugin/i386/ns7/libjavaplugin_oji.so
[...]
</code></pre></td></tr></table>

<h4>Test de la machine virtuelle</h4>

<p>
Aller à l'URL <a href="http://www.java.com/fr/download/help/testvm.xml">http://www.java.com/fr/download/help/testvm.xml</a>.
</p>

<hr>

<h3><a name="root_x">2.8 Utiliser l'interface X en tant que root</a></h3>

<p>
Sur Debian, par défaut, le super-utilisateur ne peut pas se connecter au serveur X.
Toute tentative de connexion provoque une erreur, même en définissant la variable DISPLAY.
Exemple :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>xeyes</b>
Error: Can't open display:
maison-2:~# <b>DISPLAY=:0.0 xeyes</b>
Xlib: connection to ":0.0" refused by server
Xlib: No protocol specified

Error: Can't open display: :0.0
maison-2:~#
</code></pre></td></tr></table>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td>Solution inqualifiable</td>
    <td>Se loguer dans l'interface graphique en tant que root&nbsp;!</td>
  </tr>
  <tr>
    <td>Solution plutôt gruiiik</td>
    <td>En tant qu'utilisateur standard logué sur une session X, exécuter<br>
<code><b>xhost +</b></code><br>
Par la suite, <em>tout</em> utilisateur pourra se connecter au serveur X.</td>
  </tr>
  <tr>
    <td>Solution un peu moins gruiiik</td>
    <td>En tant qu'utilisateur standard logué sur une session X, exécuter<br>
<code><b>xhost +local:root</b></code><br>
Par la suite, seul le super-utilisateur <em>local</em> pourra se connecter au serveur X.</td>
  </tr>
  <tr>
    <td><b>Solution propre</b></td>
    <td>Utiliser <code><b>kdesu</b></code> (KDE) ou <code><b>gksu</b></code> (Gnome).</td>
  </tr>
  <tr>
    <td>Solution permanente <u>(non recommandé)</u></td>
    <td>
      <ol>
        <li>Ajouter la commande<br>
<code>export DISPLAY=:0.0</code><br>
au fichier ~/.bashrc du super-utilisateur (si son shell est bash bien sûr).<br><br></li>
        <li>Créer le fichier <code>/etc/X11/Xsession.d/60xhost</code>, avec le contenu suivant&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Taken from 55numlockx (numlockx Debian package)

# In the script that called this, set -e has been set. Errors in any
# command will abort the entire script and X won't start. By putting
# this part in a subshell, any errors will abort the subshell - which
# we want, in case xhost fails.

# The 'true' at the end ensures that the entire script will never end
# with an error code, even if there was an error.

# Ariel Shkedi &lt;asdebian@dsgml.com&gt;

(
xhost +local:root
)

true
</code></pre></td></tr></table></li>
      </ol>
    </td>
  </tr>
</table>

<hr>

<h3><a name="wheel_sudo">2.9 Autoriser le groupe wheel à tout exécuter avec <code>sudo</code></a></h3>

<p>
Dans le fichier <code>/etc/sudoers</code>, ajouter la ligne<br>
<code>%wheel  ALL=(ALL) ALL</code><br>
Pour donner cette autorisation, mais sans obliger l'utilisateur à saisir son mot de passe, ajouter la ligne<br>
<code>%wheel  ALL=(ALL) NOPASSWD: ALL</code><br>
Aide sur la structure du fichier <code>/etc/sudoers</code>&nbsp;: <code><b>man sudoers</b></code>
</p>

<hr>

<h3><a name="config_kernel_startup">2.10 Configuration du noyau au démarrage</a></h3>

<p>
C'est utile pour configurer l'IP forwarding, les syn cookies, le niveau des messages
de debug du noyau...<br>
La configuration se trouve dans le fichier <code>/etc/sysctl.conf</code>.
<code><b>man sysctl.conf</b></code> pour afficher de l'aide.
</p>

<hr>

<h3><a name="paquetages_utiles">2.11 Paquetages que j'ajoute à l'installation de base</a></h3>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td>netselect-apt</td>
    <td>Exécuter <code><b>netselect-apt testing</b></code> pour optimiser <code>/etc/apt/sources.list</code></td>
  </tr>
  <tr>
    <td>apt-file</td>
    <td>Recherche d'un paquetage par nom de fichier avec <code><b>apt-file search <em>nom_fichier</em></b></code></td>
  </tr>
  <tr>
    <td>apt-show-versions</td>
    <td>Affichage des informations sur les versions des paquetages</td>
  </tr>
  <tr>
    <td>dosfstools</td>
    <td>Pour formater des clés USB en VFAT avec la commande <code><b>mkfs -t vfat</b></code></td>
  </tr>
  <tr>
    <td>ethtool</td>
    <td>Pour régler le fonctionnement de la carte Ethernet avec le programme <code><b>ethtool</b></code></td>
  </tr>
  <tr>
    <td>rcconf</td>
    <td>Pour définir les services lancés au démarrage avec <code><b>rcconf</b></code> - c'est un
front-end de <code><b>update-rc.d</b></code>, paquetage sysv-rc.</td>
  </tr>
  <tr>
    <td>tree</td>
    <td>Afficher les fichiers d'un répertoire sous la forme d'une arborescence avec la
commande <code><b>tree</b></code></td>
  </tr>
  <tr>
    <td><em>network-manager</em></td>
    <td>Enlevé pour éviter les interactions avec ma configuration réseau</td>
  </tr>
  <tr>
    <td>vim-full</td>
    <td>Version complète de vim</td>
  </tr>
  <tr>
    <td>autofs</td>
    <td>Décrit dans ce document <a href="#auto_usb">2.3 Montage automatique des clés USB et des CD-ROM</a></td>
  </tr>
  <tr>
    <td>cryptsetup</td>
    <td>Décrit dans ce document <a href="#chiffrement_homedir">2.4 Chiffrement de volume</a></td>
  </tr>
  <tr>
    <td>doc-linux-fr-html</td>
    <td>Version HTML (principalement dans le répertoire <code><b>/usr/share/doc/HOWTO/fr-html</b></code>)
de la documentation texte se trouvant dans le répertoire <code>/usr/share/doc/HOWTO/fr-txt</code>
(paquetage doc-linux-fr-text)</td>
  </tr>
  <tr>
    <td>gftp</td>
    <td>Transferts FTP (interface Gnome) avec la commande <code><b>gftp</b></code></td>
  </tr>
  <tr>
    <td>openssh-server</td>
    <td>Décrit dans ce document <a href="#transfert_linux">2.6 Transfert entre deux Linux</a></td>
  </tr>
  <tr>
    <td>gthumb</td>
    <td>Visualisation de photos avec vignettes, commande <code><b>gthumb</b></code></td>
  </tr>
  <tr>
    <td>imagemagick</td>
    <td>Manipulation d'images en ligne de commande, entre autres commandes,
<code><b>display</b></code>, <code><b>identify</b></code>, <code><b>import</b></code>,
<code><b>convert</b></code>, <code><b>animate</b></code>, <code><b>montage</b></code>,
<code><b>mogrify</b></code>
</td>
  </tr>
  <tr>
    <td>mplayer</td>
    <td>Lecture vidéo, cf. <a href="#install_mplayer">2.24 Installation de MPlayer</a> dans ce document</td>
  </tr>
  <tr>
    <td>baobab</td>
    <td>Affichage graphique (Gnome) des tailles des répertoires du disque</td>
  </tr>
  <tr>
    <td>aspell</td>
    <td>Vérification orthographique (installé par défaut)</td>
  </tr>
  <tr>
    <td>bchunk</td>
    <td>Convertit des images CD binaires (.bin ou .cue) en .cdr, .wav et .iso.</td>
  </tr>
  <tr>
    <td>deborphan</td>
    <td>Affichage des paquetages orphelins</td>
  </tr>
  <tr>
    <td>alien</td>
    <td>Installe des .rpm</td>
  </tr>
  <tr>
    <td>libc6-dev, gcc</td>
    <td>Nécessaire pour recompiler le noyau - Etch contient par défaut gcc-4.1 qui n'est pas pris en compte</td>
  </tr>
  <tr>
    <td>qt3-dev-tools, libqt3-mt-dev, libqt3-compat-headers, g++</td>
    <td>Pour configurer la recompilation du noyau avec <code>make xconfig</code> (interface QT&nbsp;=&gt;&nbsp;KDE)</td>
  </tr>
  <tr>
    <td>kernel-package</td>
    <td>Permet d'installer proprement un noyau que l'on a compilé soi-même (sous forme de paquetage)
avec la commande <code><b>make-kpkg</b></code></td>
  </tr>
  <tr>
    <td>file-browser-applet</td>
    <td>Pour afficher un menu répertoire dans la barre des menus GNOME</td>
  </tr>
  <tr>
    <td>alltray</td>
    <td>Mets n'importe quelle application dans le systray</td>
  </tr>
  <tr>
    <td>ntp</td>
    <td>Pour synchroniser l'heure sur le PC</td>
  </tr>
</table>

<hr>

<h3><a name="ajout_cd">2.12 Ajouter un CD dans <code>/etc/apt/source.list</code></a></h3>

<p>
Exécuter la command <code><b>apt-cdrom&nbsp;add</b></code>.
</p>

<hr>

<h3><a name="horloge_utc">2.13 Définir si l'horloge est en UTC ou pas</a></h3>

<p>
UTC = temps universel coordonné, équivalent dans les situations usuelles à GMT (différent si
vous possédez une horloge atomique).<br>
Dans le fichier <code>/etc/default/rcS</code>, <code>UTC=yes</code> ou <code>UTC=no</code>
indique la configuration.<br>
Attention, il y a un lien avec la configuration du noyau, dans lequel on trouve également
ce paramètre. Paramètre <b>CONFIG_APM_RTC_IS_GMT</b>.
</p>

<hr>

<h3><a name="reglage_fuseau_courant">2.14 Régler le fuseau horaire courant</a></h3>

<p>
Commande <code><b>tzconfig</b></code>.<br>
Septembre 2007&nbsp;: désormais il faut exécuter <code><b>tzselect</b></code>.
</p>

<p>
Le fuseau horaire courant est défini dans <code>/etc/timezone</code>.
</p>

<hr>

<h3><a name="config_vim">2.15 Configuration système de Vim</a></h3>

<p>
Il est possible de modifier <code>/etc/vim/vimrc</code>, mais ce fichier fait partie du paquetage vim,
et les futures mises à jour soit l'écraseront, soit le laisseront tel quel.<br>
Configurer Vim (au niveau système) dans le fichier <code><b>/etc/vim/vimrc.local</b></code>.<br>
Mon fichier <code>/etc/vim/vimrc.local</code>&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>" Local configuration file for vim
" /etc/vim/vimrc.local

set ignorecase
set shiftwidth=4
set tabstop=4
set hlsearch
set linebreak
syntax on
</code></pre></td></tr></table>

<hr>

<h3><a name="config_kdm_photos">2.16 Configurer kdm avec les photos</a></h3>

<ol>
  <li>Dans le répertoire <code>/usr/share/apps/kdm/faces</code>, créer les images
au format "Bitmap X" (XPM), avec pour nom <code><em>login</em>.face</code>
ou bien <code><em>login</em>.face.icon</code>. Compte tenu de la taille affichée, 70x70 est un bon format.<br>
Exemple avec une image uniquement pour l'utilisateur <em>sebastien</em> (<code>identify</code> fait partie
du paquetage imagemagick)&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/usr/share/apps/kdm/faces# <b>ls -al</b>
total 80
drwxr-xr-x 2 root      root       4096 2007-02-23 16:41 .
drwxr-xr-x 6 root      root       4096 2007-02-05 23:29 ..
lrwxrwxrwx 1 root      root         26 2007-02-15 20:44 .default.face -> ../pics/users/default1.png
-rw-r--r-- 1 sebastien sebastien 69405 2007-02-23 16:41 sebastien.face
maison-2:/usr/share/apps/kdm/faces# <b>identify sebastien.face</b>
sebastien.face XPM 70x70 PseudoClass 3704c 68kb
</code></pre></td></tr></table></li>
  <li>Dans le fichier <code>/etc/kde3/kdm/kdmrc</code>, quelques paramètres permettent de régler
le fonctionnement de l'interface "photos"&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>PreselectUser=Previous
FocusPasswd=true
EchoMode="ThreeStars"
</code></pre></td></tr></table></li>
  <li>C'est tout !<br><br></li>
</ol>

<p>
<b>Dernière minute</b><br>
Suite à une mise à jour de kdm il y a quelques semaines (janvier 2007), cela ne fonctionne plus&nbsp;!<br>
A suivre...
</p>

<hr>

<h3><a name="numlock_start_console">2.17 Numlock au démarrage (console)</a></h3>

<p>
Pour activer numlock sur les consoles texte, ajouter les lignes suivantes
au script d'init du shell (<code>/etc/profile</code> pour bash). Naturellement
en fonction de la syntaxe propre au shell utilisé, il faut adapter le code.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Pour les ordinateurs avec un pavé numérique...
# Active le pavé numérique quand on se logue en console
case "`tty`" in /dev/tty[1-6])
  setleds +num
esac
</code></pre></td></tr></table>

<hr>

<h3><a name="numlock_start_kde">2.18 Numlock au démarrage (KDE)</a></h3>

<ol>
  <li>Installer le paquetage numlockx</li>
  <li>L'installation de numlockx créé le fichier <code>/etc/X11/Xsession.d/55numlockx</code>,
sensé activer numlock. Avec KDE (ou kdm ?) ça ne fonctionne pas, il faut ajouter la ligne<br>
<code>numlockx on</code><br>
au fichier <code>/etc/kde3/kdm/Xsetup</code>.</li>
</ol>

<hr>

<h3><a name="reconfigure_x">2.19 Reconfigurer X</a></h3>

<p>
Exécuter <code><b>dpkg-reconfigure xserver-xfree86</b></code> (obsolète) ou bien
<code><b>dpkg-reconfigure xserver-xorg</b></code> (actuel).<br>
Pour savoir si X fonctionne avec Xfree86 ou x.org, exécuter <code><b>dpkg -l "xserver*"</b></code>.
</p>

<hr>

<h3><a name="police_gvim">2.20 Changer la police de gvim à l'exécution de <code>gvim</code> en ligne de commande</a></h3>

<p>
Dans <code>~/bashrc</code> (si le shell est bash), ajouter la ligne (par exemple)&nbsp;:<br>
<code>alias gvim='gvim -font "courier 10 pitch 12" -geom "80x30"'</code><br>
Pour afficher les fontes disponibles dans X&nbsp;: commande <code><b>xlsfonts</b></code>
</p>

<hr>

<h3><a name="umask_cmd">2.21 Modifier les droits par défaut des fichiers et répertoires créés</a></h3>

<p>
Commande <code>umask</code>, à ajouter à <code>~/bashrc</code> (si le shell est bash).
Exemple :<br>
<code>umask 027</code><br>
Les fichiers créés auront pour droits <code>-rw-r-----</code> (640), les répertoires,
<code>drwxr-x---</code> (750).
</p>

<hr>

<h3><a name="trucs_bash">2.22 Quelques trucs sur bash</a></h3>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td><code><b>jobs</b></code></td>
    <td>Affiche la liste des jobs en cours.</td>
  </tr>
  <tr>
    <td><code><b>history</b></code></td>
    <td>Affiche l'historique des commandes exécutées.</td>
  </tr>
  <tr>
    <td><code><b>fc</b></code></td>
    <td>Affiche l'historique et exécute la commande choisie.</td>
  </tr>
  <tr>
    <td>Substitution&nbsp;d'historique&nbsp;:&nbsp;<code><b>!^</b></code>,&nbsp;<code><b>!$</b></code>,&nbsp;<code><b>!*</b></code>,&nbsp;<code><b>!:n</b></code>,&nbsp;<code><b>!:n1-n2</b></code></td>
    <td>Pour rappeler depuis la dernière commande, respectivement, le premier argument,
le dernier, tous, le n-ième, les arguments de n1 à n2. Les arguments sont numérotés à partir de 1
(0 = nom du programme).</td>
  </tr>
  <tr>
    <td><code><b>shopt&nbsp;-s&nbsp;histverify</b></code></td>
    <td>A ajouter à <code><b>~/.bashrc</b></code>). Affiche la commande
modifiée avant de l'exécuter (si substitution d'historique). <code><b>shopt</b></code> pour afficher
les réglages en cours.</td>
  </tr>
  <tr>
    <td><code><b>set&nbsp;show-all-if-ambiguous&nbsp;on</b></code></td>
    <td>A ajouter à <code><b>~/.inputrc</b></code>). Complète automatiquement au lieu de
provoquer une alarme. Dans le manuel de bash, rechercher <code><b>^READLINE</b></code> pour
voir les autres possibilités de réglages.</td>
  </tr>
  <tr>
    <td><code><b>set&nbsp;-o</b></code></td>
    <td>Affiche encore d'autres réglages en cours. Exemple&nbsp;:&nbsp;<code><b>set -o vi</b></code>
rend facile la recherche dans l'historique (pour les utilisateurs de vi).</td>
  </tr>
  <tr>
    <td><code><b>function&nbsp;calc()&nbsp;{&nbsp;awk&nbsp;"BEGIN{&nbsp;print&nbsp;$*&nbsp;}";&nbsp;}</b></code></td>
    <td>A ajouter au fichier <code>~/.bashrc</code>.<br>
Permet d'effectuer un calcul en ligne de commande, exemple&nbsp;:
<code>calc&nbsp;'(2+7.2)*sin(3.14159)/(2.5*log(10))'</code>.<br>
D'après <a href="http://www.guilde.asso.fr/ressources/contrib/bash/bashrc.txt">http://www.guilde.asso.fr/ressources/contrib/bash/bashrc.txt</a></td>
  </tr>
</table>

<p>
Comment bien programmer en <b>bash</b>, d'après <em>Linux Magazine numéro 220</em>.
</p>

<ol>
    <li>Utilisation de la fonction <b>trap</b>.<br>
Exemple : plutôt que de supprimer un fichier temporaire à la fin du fichier
script, il est plus élégant d'intercepter l'événement de fin d'exécution et d'y
placer la suppression du fichier.<br>
<pre><code>
function finish {
    # ...
}

# Exécute la fonction finish lorsque le script est terminé, <em>y compris</em>
# en cas d'arrêt dû à une erreur.
trap finish EXIT</code></pre>
    </li>
    <li><b>shellcheck</b><br>
Vérifie un script, la syntaxe mais aussi et surtout le respect de certaines
bonnes pratiques.
    </li>
    <li>Tests unitaires<br>
D'après le magazine, <b>Bats</b> est mieux que <b>shUnit2</b> car <b>Bats</b>
peut produire une sortie au format <em>TAP</em>.
    </li>
    <li>Ajouter à tout script les lignes suivantes :<br>
<pre><code>set -euo pipefail
IFS=$'\n\t'</code></pre>
Explications&nbsp;:<br>
        <ol>
            <li><b>set -e</b> provoque l'arrêt du script dès qu'une erreur se
produit. Attention, "une erreur" se produit dès qu'un programme retourne une
valeur non nulle... Si en cours de script il faut appeler un programme
retournant une valeur non nulle en cas de succès (cas de <b>grep</b> par
exemple), il faut entourer l'appel avec <b>set +e</b> et <b>set -e</b>.
            </li>
            <li><b>set -u</b> interdit l'utilisation de variable non définie,
pratique pour détecter les fautes de frappe. C'est un peu le <b>use strict</b>
de Perl pour le bash...<br>
Pour lire les arguments $1, $2, etc., sans provoquer un arrêt du script en cas
de non définition, exécuter&nbsp;:<br>
<pre><code>mavar=${1:-}</code></pre>
            </li>
            <li><b>set -o pipefail</b> retournera un code d'erreur en cas de non
fonctionnement d'un pipe, plutôt que de retourner le code d'erreur de la
dernière commande (qui sera non pertinent en cas de défaillance en amont).
            </li>
            <li><b>IFS=$'\n\t'</b> supprime l'espace de la liste des
séparateurs. Par exemple quand on exécute <b>for mavar in ...; do</b>,
<em>IFS</em> est utilisée pour décomposer les chaînes en éléments qui seront
passés à <em>mavar</em>. À noter que par défaut, la valeur d'IFS est
<b>$' \n\t'</b>, c'est-à-dire début et fin de ligne, tabulation <em>et
espace</em>.
            </li>
        </ol>
    </li>
</ol>

<hr>

<h3><a name="commandes_utiles">2.23 Quelques commandes utiles</a></h3>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td><code><b>fuser</b></code></td>
    <td>Affiche quels processus utilisent un fichier donné ; permet d'envoyer un signal aux processus</td>
  </tr>
  <tr>
    <td><code><b>lsof</b></code></td>
    <td>Affiche la liste des fichiers ouverts</td>
  </tr>
  <tr>
    <td><code><b>netstat&nbsp;-ltnp<br>netstat&nbsp;-taupe</b></code></td>
    <td>Affiche quels ports sont à l'écoute, avec le nom des processus</td>
  </tr>
  <tr>
    <td><code><b>dd&nbsp;if=/dev/urandom&nbsp;bs=1&nbsp;count=32&nbsp;2&gt;&nbsp;/dev/null
|&nbsp;hexdump&nbsp;-e&nbsp;'""&nbsp;32/1&nbsp;"%02x"&nbsp;"\n"'</b></code></td>
    <td>Affiche une chaîne aléatoire de 32 octets (utile pour générer une clé WPA par exemple)</td>
  </tr>
  <tr>
    <td><code><b>stty&nbsp;-a</b></code></td>
    <td>Affiche les réglages du terminal</td>
  </tr>
  <tr>
    <td><code><b>stty&nbsp;tostop</b></code></td>
    <td>Arrêter les tâches d'arrière-plan qui tentent d'écrire sur le terminal</td>
  </tr>
  <tr>
    <td><code><b>find / -type f -perm +4000 | xargs ls -l</b></code></td>
    <td>Trouve les fichiers avec l'option SUID</td>
  </tr>
  <tr>
    <td><code><b>find / -type f -perm +2000 | xargs ls -l</b></code></td>
    <td>Trouve les fichiers avec l'option SGID</td>
  </tr>
  <tr>
    <td><code><b>xxd</b></code></td>
    <td>Affiche un fichier en représentation binaire ; pour éditer un fichier
binaire dans Vi, dans Vi, exécuter <code><b>:%!xxd</b></code></td>
  </tr>
  <tr>
    <td><code><b>xfontsel</b></code></td>
    <td>Sélectionneur de fontes dans X</td>
  </tr>
  <tr>
    <td><code><b>xlsfonts</b></code></td>
    <td>Lister les fontes disponibles dans X</td>
  </tr>
  <tr>
    <td><code><b>lsattr</b></code>, <code><b>chattr</b></code></td>
    <td>Attributs des fichiers et répertoires sur les systèmes de fichier ext2 et ext3</td>
  </tr>
  <tr>
    <td><code><b>badblocks</b></code></td>
    <td>Trouver les secteurs défectueux sur un volume ; appartient au paquetage mtools</td>
  </tr>
  <tr>
    <td><code><b>dpkg -l "lib*-perl"</b></code></td>
    <td>Afficher quels modules PERL sont installés</td>
  </tr>
  <tr>
    <td><code><b>xev</b></code>, <code><b>xmodmap</b></code>, <code><b>lineak</b></code>,
<code><b>xbindkeys</b></code></td>
    <td>Programmation du clavier multimédia</td>
  </tr>
  <tr>
    <td><code><b>update-alternatives</b></code></td>
    <td>Modifie les programmes invoqués pour réaliser certaines tâches</td>
  </tr>
  <tr>
    <td>Créer <code><b>/etc/udev/rules.d/00-ipod.rules</b></code>, y écrire<br>
<code><b>BUS:"scsi", SYSFS{nodev}="iPods", SYMLINK="ipod"</b></code></td>
    <td>Cela crée <code><b>/dev/ipod</b></code> lorsque ce périphérique est plugué</td>
  </tr>
  <tr>
    <td><code><b>lshal</b></code></td>
    <td>Liste le matériel</td>
  </tr>
  <tr>
    <td><code><b>dmidecode</b></code></td>
    <td>Décode les informations contenues dans le BIOS</td>
  </tr>
  <tr>
    <td><code><b>hdparm</b></code></td>
    <td>Règle le fonctionnement d'un disque dur ou lecteur de CDROM IDE</td>
  </tr>
  <tr>
    <td><code><b>smartctl</b></code></td>
    <td>Utilitaire SMART, pour Self-Monitoring, Analysis and Reporting</td>
  </tr>
  <tr>
    <td><code><b>blockdev --getsize <em>device</em></b></code></td>
    <td>Affiche la taille d'un périphérique de bloc, en nombre de blocs de 512 octets</td>
  </tr>
  <tr>
    <td><code><b>cat /etc/*release*</b></code></td>
    <td>Affiche la version de la distribution (testé sur Ubuntu 7.10)</td>
  </tr>
  <tr>
    <td><code><b>lsb_release -a</b></code></td>
    <td>Même chose que ci-dessus</td>
  </tr>
  <tr>
    <td><code><b>acpi -t</b></code></td>
    <td>Informations sur la batterie, la température du processeur...</td>
  </tr>
  <tr>
    <td><code><b>sensors</b></code></td>
    <td>Paquet lm-sensors. Affiche l'état de la machine. Fonctionne avec <code>sensors-detect</code></td>
  </tr>
  <tr>
    <td><code><b>find . -type f -iname "*.mp3" -exec mp3info -p "%S\n" {} \; | perl -ne '$t+=$_; END { print("Temps total : " . int($t/3600) . "h" . int($t/60 % 60) . "m" . int($t % 60) . "s\n");}'</b></code></td>
    <td>Affiche la durée totale des fichiers MP3 trouvés dans le répertoire courant</td>
  </tr>
  <tr>
    <td><code><b>[Alt]+déplacement_souris</b></code></td>
    <td>Déplace la fenêtre</td>
  </tr>
  <tr>
    <td><code><b>[Shift]+[Numlock]</b></code></td>
    <td>Déplace la souris au clavier</td>
  </tr>
  <tr>
    <td><code><b>xset b off<br>set bell-style none</b></code></td>
    <td>Désactive la cloche sonore</td>
  </tr>
  <tr>
    <td><code><b>gtf</b></code></td>
    <td>Pour déterminer la valeur de la ligne ModeLine (dans le fichier <code>xorg.conf</code>)
      en fonction des caractéristiques de l'écran</td>
  </tr>
  <tr>
    <td><code><b>notify-send</b></code> et <code><b>send-bus</b></code></td>
    <td>Pour interagir avec D-Bus, permet par exemple d'afficher une fenêtre</td>
  </tr>
  <tr>
    <td><code><b>last reboot</b></code></td>
    <td>Affiche la liste des derniers reboot</td>
  </tr>
  <tr>
    <td><code><b>root-tail</b></code></td>
    <td>Affiche le contenu d'un fichier sur la fenêtre racine X-Window, très adapté pour
      suivre le contenu des fichiers se trouvant dans <code>/var/log</code></td>
  </tr>
  <tr>
    <td><code><b>rsync</b></code></td>
    <td>Peut faire beaucoup de choses ! Exemple pour sauvegarde complète&nbsp;:<br>
      <code>rsync -arH --delete --progress --stats /rep/a/sauvegarder /rep/de/sauvegarde</code><br>
      Sauvegarde incrémentale&nbsp;:<br>
      <code>rsync -arHu --delete --progress --stats --link-dest=/rep/de/sauvegarde /rep/a/sauvegarder /rep/de/sauvegarde/incrementale</code></td>
  </tr>
  <tr>
    <td><code><b>stat nom_fichier</b></code></td>
    <td>Affiche de nombreuses informations sur le fichier</td>
  </tr>
  <tr>
    <td><code><b>uptime</b></code></td>
    <td>Statistiques sur le processeur</td>
  </tr>
  <tr>
    <td><code><b>vmstat</b></code></td>
    <td>Statistiques sur la mémoire virtuelle</td>
  </tr>
  <tr>
    <td><code><b>whois nom_domaine</b></code></td>
    <td>Affiche des informations sur le propriétaire d'un domaine Internet</td>
  </tr>
  <tr>
    <td><code><b>dhclient iface</b></code></td>
    <td>Pour renouveler manuellement l'adresse fournie en DHCP</td>
  </tr>
  <tr>
    <td><code><b>sudo update-usbids</b></code></td>
    <td>Mets à jour la base des périphériques USB</td>
  </tr>
  <tr>
    <td><code><b>xrandr</b></code></td>
    <td>Affiche des informations sur les résolutions minimale, actuelle et maximale de l'écran</td>
  </tr>
  <tr>
    <td><code><b>ddcprobe</b></code></td>
    <td>Affiche des informations sur le rafraîchissement de l'écran</td>
  </tr>
  <tr>
    <td><code><b>whereis</b></code></td>
    <td>Détermine le chemin d'une commande</td>
  </tr>
  <tr>
    <td><code><b>lshw</b></code></td>
    <td>Liste le matériel</td>
  </tr>
  <tr>
    <td><code><b>hddtemp device</b></code></td>
    <td>Affiche la température du disque dur</td>
  </tr>
  <tr>
    <td><code><b>mdadm</b></code></td>
    <td>Gestion des disques tels que RAID</td>
  </tr>
</table>

<hr>

<h3><a name="install_mplayer">2.24 Installation de MPlayer</a></h3>

<p>
L'URL <a href="http://www.debian-multimedia.org/mirrors.html">http://www.debian-multimedia.org/mirrors.html</a>
donne les miroirs permettant de récupérer les paquetages.<br>
Page d'accueil de MPlayer&nbsp;:&nbsp;<a href="http://www.mplayerhq.hu">http://www.mplayerhq.hu</a><br>
Exemple de lignes ajoutées au fichier <code>/etc/apt/sources.list</code> (on a commenté
la ligne deb-src, inutile tant que l'on ne recompile pas)&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Multimedia packages - added by Sébastien Millet, February 2007
deb http://mirror.home-dn.net/debian-multimedia testing main
# deb-src http://mirror.home-dn.net/debian-multimedia stable main
</code></pre></td></tr></table>

<p>
Ensuite des erreurs sont affichées par APT (exécution de <code>apt-get update</code>),
en raison d'une clé manquante&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>apt-get update</b>
Réception de : 1 http://mir1.ovh.net testing Release.gpg [189B]
[...]
Lecture des listes de paquets... Fait
W: GPG error: http://mirror.home-dn.net testing Release: Les signatures suivantes n'ont pas pu être vérifiées car la clé publique n'est pas disponible : NO_PUBKEY 07DC563D1F41B907
W: Vous pouvez lancer « apt-get update » pour corriger ces problèmes.
</code></pre></td></tr></table>

<p>
Pour éviter cet avertissement, nous allons utiliser <code>gpg</code> et <code>apt-key</code>,
décrits ci-dessous.<br>
Ensuite, faire l'installation normalement avec <code>apt-get install mplayer mencoder</code>
(mencoder pour faire de l'encodage).
</p>

<hr>

<h3><a name="apt_key">2.25 Le programme <code>apt-key</code></a></h3>

<p>
Pour éviter les avertissements "Les signatures suivantes n'ont pas pu être vérifiées..."
(exemple ci-dessus), il faut faire reconnaître le clé manquante par APT avec <code>apt-key</code>.
Dans l'exemple qui suit, l'utilisateur <em>sebastien</em> a le droit d'exécuter
<code>apt-key</code> avec <code>sudo</code>, cf. <a href="#wheel_sudo">2.9 Autoriser le groupe
wheel à tout exécuter avec <code>sudo</code></a>.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>gpg --keyserver hkp://wwwkeys.eu.pgp.net --recv-keys 1F41B907</b>
gpg: requesting key 1F41B907 from hkp server wwwkeys.eu.pgp.net
gpg: key 1F41B907: public key "Christian Marillat &lt;marillat@debian.org&gt;" imported
gpg: 3 marginal(s) needed, 1 complete(s) needed, classic trust model
gpg: depth: 0  valid:   2  signed:   3  trust: 0-, 0q, 0n, 0m, 0f, 2u
gpg: depth: 1  valid:   3  signed:   1  trust: 1-, 0q, 0n, 1m, 1f, 0u
gpg: Total number processed: 1
gpg:               imported: 1
sebastien@maison-2:~$ <b>gpg --armor --export 1F41B907 | sudo apt-key add -</b>
OK
</code></pre></td></tr></table>

<hr>

<h3><a name="modifier_format_video">2.26 Modifier le format d'une vidéo</a></h3>

<p>
De nombreux programmes peuvent le faire. Mencoder est l'un de ceux-là, son installation
est décrite au-dessus. Ses paramètres sont *très* nombreux.<br>
Utiliser l'option <b>expand</b> à la place de <b>scale</b> pour modifier le format sans modifier l'image
(pas de zoom avant ni arrière), ce qui, au besoin, ajoute des bandes noires ou coupe l'image.
Exemples&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code> Avec le codec ffmpeg (paquetage libavcodec0d), en sortant du MPEG2 448x336
<b>mencoder -ovc lavc -vf scale=448:336 -lavcopts vcodec=mpeg2video -oac copy input.avi -o output.avi</b>

  Avec le codec ffmpeg, en sortant du MPEG4 448x336
<b>mencoder -ovc lavc -vf scale=448:336 -lavcopts vcodec=mpeg4 -oac copy input.avi -o output.avi</b>

  Avec le codec XVid (paquetage libxvidcore4), en limitant la taille du fichier de sortie à 368 000 Ko, format 608x456
<b>mencoder -ovc xvid -xvidencopts bitrate=-368100 -vf scale=608:456 -oac copy input.avi -o output.avi</b>

  Paquetages contenant les codecs ffmpeg et XVid
sebastien@maison-2:~$ <b>dpkg -l "libavcodec*"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  libavcodec0d              0.cvs20060823-6           ffmpeg codec library
sebastien@maison-2:~$ <b>dpkg -l "libxvidcore4"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  libxvidcore4              1.1.2-0.1                 High quality ISO MPEG4 codec library
</code></pre></td></tr></table>

<hr>

<h3><a name="changer_navigateur_kde">2.27 Changer le navigateur par défaut de KDE</a></h3>

<p>
Ouvrir le centre de configuration KDE, rubrique <em>Composants de KDE | Sélecteur de composants | Navigateur web</em>.
</p>

<hr>

<h3><a name="lister_fichiers">2.28 Lister les fichiers par date, sous-répertoires inclus</a></h3>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code> Liste les fichiers en affichant <em>taille&lt;espace&gt;nom_fichier</em>
<b>find . -type f -exec ls -l {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\5 \8/'</b>
  Liste les fichiers par date croissante, en affichant <em>date&lt;espace&gt;heure&lt;espace&gt;nom_fichier</em>
<b>find . -type f -exec ls -l {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\6 \7 \5 \8/' | sort</b>
</code></pre></td></tr></table>

<hr>

<h3><a name="verif_orthographe">2.29 Vérification orthographique</a></h3>

<p>
Vérifier que le paquetage aspell est installé, et exécuter <code>aspell</code>. Commande
exécutée pour vérifier le document présent (<code>howto-miscellaneous-1.0.html</code>)&nbsp;:<br>
<code>aspell --encoding=utf-8 check howto-miscellaneous-1.0.html</code>
</p>

<p>
Fichier <code>~/.aspell.conf</code>&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># ~/.aspell.conf

lang fr_FR
</code></pre></td></tr></table>

<hr>

<h3><a name="stardict">2.30 Stardict (dictionnaire)</a></h3>

<p>
Ce dictionnaire est très complet, et l'interface (GNOME) est pratique.<br>
URL&nbsp;: <a href="http://stardict.sourceforge.net">http://stardict.sourceforge.net</a><br>
Installer le paquetage stardict, et éventuellement, stardict-xmlittre (il s'agit du <em>Littré</em>).
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ dpkg -l "stardict*"
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  stardict                  2.4.8-1                   International dictionary for GNOME 2
ii  stardict-common           2.4.8-1                   International dictionary - data files
un  stardict-gtk              &lt;néant&gt;                  (aucune description n'est disponible)
ii  stardict-xmlittre         1.0-1                     French Littré dictionary for stardict
</code></pre></td></tr></table>

<p>
Copie d'écran.
</p>

<img src="img/stardict.png" width="596" height="350" border="4" alt="">

<hr>

<h3><a name="config_fontes_x">2.31 Configuration des fontes sur X</a></h3>

<p>
La configuration des fontes se trouve dans le répertoire <code>/etc/fonts</code> et dans chaque
fichier <code>~/.fonts.conf</code><br>
Pour afficher de l'aide&nbsp;:
<code><b>man fonts.conf</b></code>
</p>

<hr>

<h3><a name="compilation_noyau">2.32 Compilation du noyau</a></h3>

<h4>2.32.1 Avant-propos</h4>

<p>
Il y aurait ici de quoi écrire un livre entier. Je vais juste indiquer quelques trucs.
</p>

<ul>
  <li>Récupération du source du noyau&nbsp;:<a href="http://www.kernel.org">http://www.kernel.org</a></li>
  <li>Paquetages pour recompilation&nbsp;: libc6-dev, gcc</li>
  <li>Paquetages pour configuration en mode graphique (interface QT&nbsp;=&gt;&nbsp;KDE)&nbsp;:
qt3-dev-tools, libqt3-mt-dev, libqt3-compat-headers, g++</li>
  <li>Paquetages pour compiler proprement (création d'un paquetage Debian)&nbsp;: kernel-package</li>
</ul>

<p>
Les paquetages sont mentionnés ailleurs dans ce même document,
<a href="#paquetages_utiles">2.11 Paquetages que j'ajoute à l'installation de base</a>
</p>

<p>
Avec le noyau par défaut, la plupart des pilotes sont chargés en tant que modules&nbsp;=&gt;
Un <code>lsmod</code> donne des indications utiles sur le code à inclure dans le
noyau.<br>
Ci-dessous, j'indique comment passer de la liste des modules chargés aux
configurations (qui se trouvent typiquement dans <code>/usr/src/linux/.config</code>,
configurées avec <code>make config</code> ou autre). Pour que ça fonctionne, il faut
le faire alors que Linux tourne avec le noyau par défaut fourni avec la distribution.<br>
Attention car&nbsp;:
</p>

<ul>
  <li>Certains paramètres provoquent la compilation de plusieurs modules.</li>
  <li>Certains modules dépendent de la combinaison de plusieurs paramètres.</li>
  <li>Certains modules pertinents peuvent ne pas avoir été montés, si
les programmes qui en ont besoin n'ont pas été utilisés.</li>
</ul>

<p>
Tous ces éléments font que le résultat est incomplet, à manier avec des pincettes.<br>
Néanmoins il permet de gagner un peu de temps.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# <b>cd /usr/src/linux</b>
maison-2:/usr/src/linux# <b>lsmod | sed 's/\s.*//' | egrep -v '^Module$' | tr '_' '.' | sed 's/.*/\\<&amp;\\.o\\>/' > ~/mods.regex</b>
maison-2:/usr/src/linux# <b>egrep -R -f ~/mods.regex * | egrep "\(CONFIG" | sed 's/.*(\(CONFIG[^)]*\)).*/\\<\1\\>/' > ~/config.regex</b>
maison-2:/usr/src/linux# <b>egrep -R -f ~/config.regex .config > ~/resultat</b>
maison-2:/usr/src/linux#
</code></pre></td></tr></table>

<h4>2.32.2 Commandes pour configurer le noyau</h4>

<ul>
  <li><code><b>make config</b></code> (pour les courageux)</li>
  <li><code><b>make menuconfig</b></code> (interface ncurses)</li>
  <li><code><b>make xconfig</b></code> (interface QT&nbsp;=&gt;&nbsp;KDE)</li>
  <li><code><b>make gconfig</b></code> (interface Gnome ; j'ignore quels paquetages sont requis)</li>
  <li>Il existe d'autres cibles pour <code>make</code>, décrites dans le <code>README</code> des sources.</li>
</ul>

<h4>2.32.3 Compilation du noyau</h4>

<p>
Un <code>make&nbsp;&amp;&amp;&nbsp;make modules_install</code> fonctionne (à
condition, ensuite, de copier les fichiers ad hoc dans <code>/boot</code>), mais il est
préférable de faire appel à <code>make-kpkg</code> (paquetage kernel-package).<br>
<code>make-kpkg</code> crée un paquetage <code>.deb</code> permettant un suivi par APT.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/usr/src/linux# <b>make-kpkg --append-to-version=seb --revision=2.6.20.1seb.10 kernel_image</b>
[...]
maison-2:/usr/src/linux# <b>cd ..</b>
maison-2:/usr/src# <b>ls -l</b>
total 3452
lrwxrwxrwx  1 root src       14 2007-03-07 21:54 linux -> linux-2.6.20.1
drwxrwxr-x 21 root root    4096 2007-03-10 18:24 linux-2.6.20.1
-rw-r--r--  1 root src  3523722 2007-03-10 18:23 linux-image-2.6.20.1seb_2.6.20.1seb.10_i386.deb
maison-2:/usr/src# <b>dpkg-deb --info linux-image-2.6.20.1seb_2.6.20.1seb.10_i386.deb</b>
 nouveau paquet Debian, version 2.0.
[...]
<b> Package: linux-image-2.6.20.1seb</b>
<b> Version: 2.6.20.1seb.10</b>
 Section: base
[...]
</code></pre></td></tr></table>

<h4>2.32.4 Installation du noyau</h4>

<p>
Exécuter <code>dpkg&nbsp;-i</code> suivi du nom des paquetages
(noms des <em>fichiers</em> <code>.deb</code>) à installer.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:/usr/src# <b>dpkg -i linux-image-2.6.20.1seb_2.6.20.1seb.10_i386.deb</b>
Sélection du paquet linux-image-2.6.20.1seb précédemment dé-sélectionné.
[...]
Updating /boot/grub/menu.lst ... done

maison-2:/usr/src# <b>dpkg -l "linux-image*"</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
un  linux-image               &lt;néant&gt;                  (aucune description n'est disponible)
un  linux-image-2.6           &lt;néant&gt;                  (aucune description n'est disponible)
ii  linux-image-2.6-486       2.6.18+6                  Linux kernel 2.6 image on x86
ii  linux-image-2.6.17-2-486  2.6.17-9                  Linux 2.6.17 image on 486-class
ii  linux-image-2.6.18-3-486  2.6.18-7                  Linux 2.6.18 image on x86
ii  linux-image-2.6.18-4-486  2.6.18.dfsg.1-11          Linux 2.6.18 image on x86
<b>ii  linux-image-2.6.20.1seb   2.6.20.1seb.10            Linux kernel binary image for version 2.6.20.1seb</b>
</code></pre></td></tr></table>

<hr>

<h3><a name="driver_nvidia">2.33 Installer le driver nVidia</a></h3>

<h4>2.33.1 Méthode 1&nbsp;- Recompilation avec création des paquetages</h4>

<p>
Les informations qui suivent correspondent au driver nVidia version <b>1.0.8776</b>.<br>
Il faut installer nvidia-kernel-common, ce qui installe également (en prenant en compte
les paquets suggérés)&nbsp;:
</p>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td>devscripts (utile si recompilation)</td>
    <td>Scripts pour faciliter la vie des développeurs Debian</td>
  </tr>
  <tr>
    <td>dpatch (utile si recompilation)</td>
    <td>Programme <code>dpatch</code> ("patch maintenance system for Debian")</td>
  </tr>
  <tr>
    <td>nvidia-kernel-common</td>
    <td>Scripts dans <code>/etc/init.d</code>, <code>/etc/modutils</code> et
<code>/etc/modprobe.d</code> pour configurer les périphériques <code>/dev/nvidia*</code>
au démarrage.</td>
  </tr>
  <tr>
    <td>nvidia-kernel-<em>version_noyau</em> (ex.&nbsp;: nvidia-kernel-2.6.18-4-486)</td>
    <td>Installe le module (binaire) dans <code>/lib/modules/<em>version_noyau</em>/nvidia/nvidia.ko</code>
(ex.&nbsp;: <code>/lib/modules/2.6.18-4-486/nvidia/nvidia.ko</code>).<br>
Ce paquetage est utile seulement pour utiliser un module déjà compilé.</td>
  </tr>
  <tr>
    <td>nvidia-glx</td>
    <td>Modules x.org (entre autres, <code>/usr/lib/xorg/modules/drivers/nvidia_drv.o</code>)
et scripts d'initialisation dans /etc/init.d</td>
  </tr>
  <tr>
    <td>nvidia-kernel-source (utile si recompilation)</td>
    <td>Installe <code>/usr/src/nvidia-kernel-source.tar.gz</code>.<br>
Utile si vous souhaitez compiler vous-même le module.</td>
  </tr>
  <tr>
    <td>patchutils (utile si recompilation)</td>
    <td>Suite d'outils de type "diff".<br>
Ici aussi, ce paquetage est utile seulement si vous souhaitez compiler vous-même le module.</td>
  </tr>
  <tr>
    <td>mesa-utils</td>
    <td>Permet de tester l'accélération matérielle avec, entre autres,
<code>glxinfo</code> et <code>glxgears</code>.</td>
  </tr>
</table>

<p>
Pour compiler le module, il faut installer module-assistant. Le programme
<code>module-assistant</code> permet de créer un paquetage Debian contenant le module
compilé.<br>
<code>make-kpkg</code> sait aussi le faire, mais cette méthode n'est pas décrite ici.
</p>

<p>
Paramétrage du noyau&nbsp;: pour que le module nvidia puisse être compilé, il faut
ne pas avoir configuré le framebuffer nvidia.<br>
Ci-dessous, j'indique la commande module-assistant à exécuter pour compiler le module
nvidia puis créer le paquetage Debian.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code><em>Exemple avec /usr/src/nvidia-kernel-source.tar.gz absent</em>
maison-2:/usr/src# <b>module-assistant auto-build -t -k /usr/src/linux nvidia-kernel</b>
The source tarball could not be found!
Package nvidia-kernel-source not installed?
Running "m-a -f get nvidia-kernel-source" may help.
The source tarball could not be found!
Package nvidia-kernel-source not installed?
Running "m-a -f get nvidia-kernel-source" may help.
La construction a échoué. Appuyez sur Entrée pour continuer...

  <em>Exemple avec /usr/src/nvidia-kernel-source.tar.gz présent mais avec le framebuffer nvidia configuré</em>
maison-2:/usr/src# <b>module-assistant auto-build -t -k /usr/src/linux nvidia-kernel</b>
Your kernel was configured to include nvidiafb support!

The nvidiafb driver conflicts with the NVIDIA driver, please
reconfigure your kernel and *disable* nvidiafb support, then
try installing the NVIDIA kernel module again.

  <em>Exemple qui fonctionne</em>
maison-2:/usr/src# <b>module-assistant auto-build -t -k /usr/src/linux nvidia-kernel</b>
Extracting the package tarball, /usr/src/nvidia-kernel-source.tar.gz, please wait...
[...]
make[1]: quittant le répertoire « /usr/src/modules/nvidia-kernel »
maison-2:/usr/src# <b>ls -l</b>
total 6692
lrwxrwxrwx  1 root src       14 2007-03-07 21:54 linux -> linux-2.6.20.1
drwxrwxr-x 21 root root    4096 2007-03-11 09:14 linux-2.6.20.1
-rw-r--r--  1 root src  3460132 2007-03-11 09:03 linux-image-2.6.20.1seb_2.6.20.1seb.11_i386.deb
drwxrwxr-x  3 root src     4096 2007-01-05 05:51 modules
<b>-rw-r--r--  1 root src  1622700 2007-03-11 09:19 nvidia-kernel-2.6.20.1seb_1.0.8776-4+2.6.20.1seb.11_i386.deb</b>
-rw-r--r--  1 root root 1744193 2007-01-05 05:51 nvidia-kernel-source.tar.gz
</code></pre></td></tr></table>

<p>
Dans l'exemple ci-dessus, <code>module-assistant</code> a créé le fichier<br>
<code>/usr/src/nvidia-kernel-2.6.20.1seb_1.0.8776-4+2.6.20.1seb.11_i386.deb</code><br>
Le paquetage est donc <b>nvidia-kernel-2.6.20.1seb</b> version <b>1.0.8776-4+2.6.20.1seb.11</b>.
Ce paquetage contient le module nvidia, installé dans <code>/lib/modules/2.6.20.1seb/nvidia/nvidia.ko</code>.
</p>

<p>
L'inconvénient de cette méthode est qu'elle ne fonctionne pas chez moi&nbsp;!
Mon PC est un Acer Aspire T180-XB7Z, la carte vidéo (intégrée) est une Nvidia GeForce 6100,
référence lspci&nbsp;:<br>
00:0d.0 VGA compatible controller: nVidia Corporation Unknown device 03d1 (rev a2)<br>
Le pilote nVidia à la sauce Debian est en version 8776 (alors que le site nvidia permet de télécharger
le pilote version 9755), et il plante. Cela se produit aussi bien pour le noyau Debian
du paquetage linux-image-2.6.18-4-486, qu'avec un noyau que j'ai compilé moi-même,
de version 2.6.20.1.
</p>

<h4>2.33.2 Méthode 2&nbsp;- Installateur nVidia</h4>

<p>
Eh oui, malgré tous mes efforts pour rester propre, il a fallu que j'utilise l'installateur
fourni par nVidia. Dans mon cas, il s'agit de l'exécutable <code>NVIDIA-Linux-x86-1.0-9755-pkg1.run</code>,
téléchargeable sur le site de nVidia, <a href="http://www.nvidia.com">http://www.nvidia.com</a>.<br>
URL utiles au sujet de Debian et nVidia&nbsp;:<br>
<a href="http://wiki.debian.org/NvidiaGraphicsDrivers#head-783b4c1ece4093dca2810eeff7da15c17a2b031a">http://wiki.debian.org/NvidiaGraphicsDrivers#head-783b4c1ece4093dca2810eeff7da15c17a2b031a</a><br>
<a href="http://www.commentcamarche.net/faq/sujet-3456-debian-howto-xorg7-installer-drivers-nvidia">http://www.commentcamarche.net/faq/sujet-3456-debian-howto-xorg7-installer-drivers-nvidia</a>
</p>

<p>
Pour ne pas trop casser ma Debian, j'ai réalisé un diff sur le contenu des répertoires avant et après
installation. J'ai fait appel au script suivant (avant et après l'installation), puis j'ai comparé les fichiers
avec la commande <code>vi -d</code>.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#/bin/sh

#
# Monitor files sizes and modification date/time
# Sébastien Millet, March 2007
#

find /bin /boot /etc /initrd /lib /lib64 /opt /sbin /selinux /srv /usr -exec ls -ldF {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\6 \7 \5 \8/' | egrep -v "[[:digit:]] \/[^>]*\/$" | egrep -v "[[:digit:]] (\/dev\/.static\/dev\/console|\/etc\/blkid\.tab\.old|\/etc\/adjtime|\/etc\/network\/run\/ifstate|\/etc\/mtab|\/etc\/blkid\.tab|\/lib\/init\/rw\/\.ramfs)$" | egrep -v "[[:digit:]][[:space:]]+\/usr\/src\/"
echo "::::::::::::::::::::::::::::::::::::::::"
echo "::::::::::::::::::::::::::::::::::::::::"
find /dev -type d -exec ls -ldF {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\5 \8/'
echo "::::::::::::::::::::::::::::::::::::::::"
echo "::::::::::::::::::::::::::::::::::::::::"
find /dev -type l -exec ls -ldF {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\5 \8/'
echo "::::::::::::::::::::::::::::::::::::::::"
echo "::::::::::::::::::::::::::::::::::::::::"
find /dev -type b -o -type c -exec ls -ldF {} \; | sed 's/\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\([^[:space:]]\+\)[[:space:]]\+\([^[:space:],]\+\)[[:space:],]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\([^[:space:]]\+\)[[:space:]]\+\(.*\)/\9 \5 \6/' | sort
</code></pre></td></tr></table>

<p>
Cela m'a permis de détecter les modifications suivantes :
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>modifié 2007-03-18 10:20 3689 /etc/X11/xorg.conf
ajouté 2007-03-18 10:20 7504932 /lib/modules/2.6.20.3seb/kernel/drivers/video/nvidia.ko
ajouté 2007-03-18 10:20 1353184 /usr/bin/nvidia-settings*
ajouté 2007-03-18 10:20 213880 /usr/bin/nvidia-installer*
ajouté 2007-03-18 10:20 151052 /usr/bin/nvidia-xconfig*
ajouté 2007-03-18 10:20 10716 /usr/bin/nvidia-bug-report.sh*
ajouté 2007-03-18 10:20 25 /usr/lib/libnvidia-tls.so.1 -> libnvidia-tls.so.1.0.9755*
ajouté 2007-03-18 10:20 25 /usr/lib/libXvMCNVIDIA_dynamic.so.1 -> libXvMCNVIDIA.so.1.0.9755*
ajouté 2007-03-18 10:20 601720 /usr/lib/libGL.so.1.0.9755*
ajouté 2007-03-18 10:20 21 /usr/lib/libGLcore.so.1 -> libGLcore.so.1.0.9755*
ajouté 2007-03-18 10:20 178924 /usr/lib/libXvMCNVIDIA.so.1.0.9755*
ajouté 2007-03-18 10:20 193966 /usr/lib/libXvMCNVIDIA.a
ajouté 2007-03-18 10:20 2352 /usr/lib/libnvidia-tls.so.1.0.9755*
ajouté 2007-03-18 10:20 653 /usr/lib/libGL.la
ajouté 2007-03-18 10:20 18 /usr/lib/xorg/modules/libwfb.so -> libnvidia-wfb.so.1*
ajouté 2007-03-18 10:20 25 /usr/lib/xorg/modules/libnvidia-wfb.so.1 -> libnvidia-wfb.so.1.0.9755*
modifié 2007-03-18 10:20 1396712 /usr/lib/xorg/modules/drivers/nvidia_drv.so*
modifié 2007-03-18 10:20 18 /usr/lib/xorg/modules/extensions/libglx.so -> libglx.so.1.0.9755*
ajouté 2007-03-18 10:20 691852 /usr/lib/xorg/modules/extensions/libglx.so.1.0.9755*
supprimé 2007-03-01 04:09 2396219 /usr/lib/xorg/modules/extensions/libGLcore.so
ajouté 2007-03-18 10:20 279508 /usr/lib/xorg/modules/libnvidia-wfb.so.1.0.9755*
ajouté 2007-03-18 10:20 18 /usr/lib/libnvidia-cfg.so -> libnvidia-cfg.so.1*
ajouté 2007-03-18 10:20 10 /usr/lib/libGL.so -> libGL.so.1*
ajouté 2007-03-18 10:20 25 /usr/lib/libnvidia-cfg.so.1 -> libnvidia-cfg.so.1.0.9755*
ajouté 2007-03-18 10:20 107364 /usr/lib/libnvidia-cfg.so.1.0.9755*
modifié 2007-03-18 10:20 17 /usr/lib/libGL.so.1 -> libGL.so.1.0.9755*
ajouté 2007-03-18 10:20 25 /usr/lib/tls/libnvidia-tls.so.1 -> libnvidia-tls.so.1.0.9755*
ajouté 2007-03-18 10:20 2324 /usr/lib/tls/libnvidia-tls.so.1.0.9755*
supprimé 2007-02-23 01:38 425832 /usr/lib/libGL.so.1.2
ajouté 2007-03-18 10:20 9918780 /usr/lib/libGLcore.so.1.0.9755*
modifié 2007-03-18 10:20 371483 /usr/include/GL/glext.h
modifié 2007-03-18 10:20 14021 /usr/include/GL/glx.h
modifié 2007-03-18 10:20 32000 /usr/include/GL/glxext.h
modifié 2007-03-18 10:20 72949 /usr/include/GL/gl.h
ajouté le répertoire 2007-03-18 10:20 25190 /usr/share/doc/NVIDIA_GLX-1.0/...
ajouté 2007-03-18 10:20 237 /usr/share/applications/nvidia-settings.desktop
ajouté 2007-03-18 10:20 5939 /usr/share/man/man1/nvidia-installer.1.gz
ajouté 2007-03-18 10:20 6554 /usr/share/man/man1/nvidia-settings.1.gz
ajouté 2007-03-18 10:20 5750 /usr/share/man/man1/nvidia-xconfig.1.gz
</code></pre></td></tr></table>

<p>
Le diff est le suivant. J'ai enlevé les différences dont il est inutile de se préoccuper,
comme le cache des librairies <code>/etc/ld.so.cache</code>, les dépendances de modules
reconstruites avec <code>depmod</code>, etc., et j'ai enlevé la liste de tous le fichiers
du répertoire <code>/usr/share/doc/NVIDIA_GLX-1.0</code>.&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>> 2007-03-18 10:20 2912 /etc/X11/xorg.conf.backup
< 2007-03-12 08:11 2912 /etc/X11/xorg.conf
---
> 2007-03-18 10:20 3689 /etc/X11/xorg.conf
---
> 2007-03-18 10:20 7504932 /lib/modules/2.6.20.3seb/kernel/drivers/video/nvidia.ko
---
> 2007-03-18 10:20 1353184 /usr/bin/nvidia-settings*
> 2007-03-18 10:20 213880 /usr/bin/nvidia-installer*
> 2007-03-18 10:20 151052 /usr/bin/nvidia-xconfig*
> 2007-03-18 10:20 10716 /usr/bin/nvidia-bug-report.sh*
> 2007-03-18 10:20 25 /usr/lib/libnvidia-tls.so.1 -> libnvidia-tls.so.1.0.9755*
> 2007-03-18 10:20 25 /usr/lib/libXvMCNVIDIA_dynamic.so.1 -> libXvMCNVIDIA.so.1.0.9755*
> 2007-03-18 10:20 601720 /usr/lib/libGL.so.1.0.9755*
> 2007-03-18 10:20 21 /usr/lib/libGLcore.so.1 -> libGLcore.so.1.0.9755*
> 2007-03-18 10:20 178924 /usr/lib/libXvMCNVIDIA.so.1.0.9755*
> 2007-03-18 10:20 193966 /usr/lib/libXvMCNVIDIA.a
> 2007-03-18 10:20 2352 /usr/lib/libnvidia-tls.so.1.0.9755*
> 2007-03-18 10:20 653 /usr/lib/libGL.la
> 2007-03-18 10:20 18 /usr/lib/xorg/modules/libwfb.so -> libnvidia-wfb.so.1*
> 2007-03-18 10:20 25 /usr/lib/xorg/modules/libnvidia-wfb.so.1 -> libnvidia-wfb.so.1.0.9755*
< 2007-01-05 05:51 1040088 /usr/lib/xorg/modules/drivers/nvidia_drv.so
---
> 2007-03-18 10:20 1396712 /usr/lib/xorg/modules/drivers/nvidia_drv.so*
< 2007-03-01 04:09 493686 /usr/lib/xorg/modules/extensions/libglx.so
---
> 2007-03-18 10:20 18 /usr/lib/xorg/modules/extensions/libglx.so -> libglx.so.1.0.9755*
> 2007-03-18 10:20 691852 /usr/lib/xorg/modules/extensions/libglx.so.1.0.9755*
< 2007-03-01 04:09 2396219 /usr/lib/xorg/modules/extensions/libGLcore.so
> 2007-03-18 10:20 279508 /usr/lib/xorg/modules/libnvidia-wfb.so.1.0.9755*
> 2007-03-18 10:20 18 /usr/lib/libnvidia-cfg.so -> libnvidia-cfg.so.1*
> 2007-03-18 10:20 10 /usr/lib/libGL.so -> libGL.so.1*
> 2007-03-18 10:20 25 /usr/lib/libnvidia-cfg.so.1 -> libnvidia-cfg.so.1.0.9755*
> 2007-03-18 10:20 107364 /usr/lib/libnvidia-cfg.so.1.0.9755*
< 2007-03-11 20:15 12 /usr/lib/libGL.so.1 -> libGL.so.1.2
---
> 2007-03-18 10:20 17 /usr/lib/libGL.so.1 -> libGL.so.1.0.9755*
> 2007-03-18 10:20 25 /usr/lib/tls/libnvidia-tls.so.1 -> libnvidia-tls.so.1.0.9755*
> 2007-03-18 10:20 2324 /usr/lib/tls/libnvidia-tls.so.1.0.9755*
< 2007-02-23 01:38 425832 /usr/lib/libGL.so.1.2
> 2007-03-18 10:20 9918780 /usr/lib/libGLcore.so.1.0.9755*
< 2007-01-04 17:19 342501 /usr/include/GL/glext.h
< 2007-01-04 17:19 15234 /usr/include/GL/glx.h
---
> 2007-03-18 10:20 371483 /usr/include/GL/glext.h
> 2007-03-18 10:20 14021 /usr/include/GL/glx.h
< 2007-01-04 17:19 30134 /usr/include/GL/glxext.h
< 2007-02-22 20:24 90905 /usr/include/GL/gl.h
---
> 2007-03-18 10:20 32000 /usr/include/GL/glxext.h
> 2007-03-18 10:20 72949 /usr/include/GL/gl.h
> 2007-03-18 10:20 25190 /usr/share/doc/NVIDIA_GLX-1.0/NVIDIA_Changelog
[...] 54 lignes, non reproduites ici.
> 2007-03-18 10:20 3485 /usr/share/doc/NVIDIA_GLX-1.0/nvidia-settings.png
> 2007-03-18 10:20 237 /usr/share/applications/nvidia-settings.desktop
> 2007-03-18 10:20 5939 /usr/share/man/man1/nvidia-installer.1.gz
> 2007-03-18 10:20 6554 /usr/share/man/man1/nvidia-settings.1.gz
> 2007-03-18 10:20 5750 /usr/share/man/man1/nvidia-xconfig.1.gz
</code></pre></td></tr></table>

<p>
Et ça marche !<br>
A noter que l'utilisateur qui souhaite bénéficier de l'accélération matérielle doit
faire partie du groupe video.<br>
Résultat de la commande <code>glxinfo</code>&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>glxinfo | grep -i render</b>
direct rendering: Yes
OpenGL renderer string: GeForce 6100 nForce 405/PCI/SSE2/3DNOW!
    GL_NVX_conditional_render, GL_SGIS_generate_mipmap, GL_SGIS_texture_lod,
sebastien@maison-2:~$
</code></pre></td></tr></table>

<p>
Le pilote nVidia installe un panneau de contrôle. Sous KDE, il est accessible dans le
menu&nbsp;<em>"K"&nbsp;-&gt;&nbsp;Système&nbsp;-&gt;&nbsp;NVIDIA&nbsp;X&nbsp;Server&nbsp;Settings</em>.<br>
Copie d'écran du panneau de contrôle&nbsp;:
</p>

<img src="img/nvidia-panel.png" width="665" height="365" border="4" alt="">

<hr>

<h3><a name="copie_ecran_x">2.34 Faire une copie d'écran sous X</a></h3>

<p>
Nous allons utiliser le programme <code>import</code>, appartenant au paquetage imagemagick.
Pour identifier la fenêtre, nous allons faire appel au programme <code>xwininfo</code>, paquetage
xbase-clients (installé par défaut). Une fois <code>xwininfo</code> lancé, il faut cliquer sur la fenêtre
que l'on souhaite capturer.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sebastien@maison-2:~$ <b>dpkg -l imagemagick</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  imagemagick               6.2.4.5.dfsg1-0.14        Image manipulation programs
sebastien@maison-2:~$ <b>dpkg -l xbase-clients</b>
Souhait=inconnU/Installé/suppRimé/Purgé/H=à garder
| État=Non/Installé/fichier-Config/dépaqUeté/échec-conFig/H=semi-installé
|/ Err?=(aucune)/H=à garder/besoin Réinstallation/X=les deux (État,Err: majuscule=mauvais)
||/ Nom                       Version                   Description
+++-=========================-=========================-==================================================================
ii  xbase-clients             7.1.ds1-2                 miscellaneous X clients
sebastien@maison-2:~$ <b>xwininfo | grep -i "window id"</b>
xwininfo: Window id: 0x2e00045 "howto-miscellaneous-1.0.html - Bluefish 1.0.7"
sebastien@maison-2:~$ <b>import -window 0x2e00045 mon_image.png</b>
sebastien@maison-2:~$ <b>identify mon_image.png</b>
mon_image.png PNG 1024x47 1024x47+0+0 DirectClass 39kb
sebastien@maison-2:~$ <b>display mon_image.png</b>
</code></pre></td></tr></table>

<p>
Exécuter <code><b>import -window root</b></code> pour copier la totalité de l'écran X.
</p>

<hr>

<h3><a name="auto_eject_close">2.35 Auto-eject et auto-close</a></h3>

<p>
Exécuter<br>
<code>echo 1 > /proc/sys/dev/cdrom/autoclose</code><br>
ou bien<br>
<code>echo 1 > /proc/sys/dev/cdrom/autoeject</code>
</p>

<hr>

<h3><a name="apt_tour">2.36 Tour très rapide des outils APT</a></h3>

<p>
Programmes APT avec exemples d'utilisation. La source principale (mais non exclusive) du
tableau qui suit est Linux Magazine HS 28, notamment, l'exemple avec apt-rdepends et
le script pour parcourir <code>/var/log/popularity-contest</code>.<br>
URL utile&nbsp;: <a href="http://www.debian.org/doc/manuals/reference/ch-package.fr.html#s-apt-install">http://www.debian.org/doc/manuals/reference/ch-package.fr.html#s-apt-install</a>
</p>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td><b>Exécutable ou fichier</b></td>
    <td>Paquetage</td>
    <td><b>Exemple</b><br>
Explication</td>
  </tr>
  <tr>
    <td><b>apt-get</b></td>
    <td>apt</td>
    <td><code><b>apt-get update</b></code><br>
Mets à jour la liste des paquetages et versions de paquetages.<br><br>
<code><b>apt-get upgrade</b></code><br>
A exécuter après <code>apt-get&nbsp;update</code>. Mets à jour ce qui doit l'être.<br><br>
<code><b>apt-get install planetpenguin-racer</b></code><br>
Installer le paquetage de nom planetpenguin-racer.<br><br>
<code><b>apt-get source planetpenguin-racer</b></code><br>
Récupère les sources du paquetage planetpenguin-racer. Nécessite une ou des
lignes deb-src dans le fichier <code>/etc/apt/sources.list</code>.<br><br>
<code><b>apt-get build-dep planetpenguin-racer</b></code><br>
Récupère les sources du paquetage planetpenguin-racer, ainsi que tout ce qui est nécessaire
pour le construire. Même remarque concernant deb-src.</td>
  </tr>
  <tr>
    <td><b>dpkg</b></td>
    <td>dpkg</td>
    <td><code><b>dpkg -i glest_2.0.0-0~getdeb1_i386.deb glest-data_2.0.0-0~getdeb1_all.deb</b></code><br>
Installer Glest depuis des fichiers paquetages se trouvant dans le répertoire courant.<br><br>
<code><b>dpkg -l "icewea*"</b></code><br>
Lister les paquetages dont le nom commence par icewea.<br><br>
<code><b>dpkg -L "iceweasel"</b></code><br>
Lister les fichiers du paquetage iceweasel.<br><br>
<code><b>dpkg -P quake2</b></code><br>
Efface les fichiers de configuration du paquetage quake2, même s'il n'est pas installé.</td>
  </tr>
  <tr>
    <td><b>dpkg-reconfigure</b></td>
    <td>debconf</td>
    <td><code><b>dpkg-reconfigure xserver-xorg</b></code><br>
Reconfigurer X-Window (seulement si x.org est le serveur X).</td>
  </tr>
  <tr>
    <td>Fichier <code><b>/etc/apt/sources.list</b></code></td>
    <td><em>n/a</em></td>
    <td>Emplacements (réseau ou CDROM) où aller chercher les paquetages. Aide&nbsp;:
<code><b>man sources.list</b></code><br>
Exemple&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># the main Debian packages.
deb http://mir1.ovh.net/debian/ testing main contrib non-free
deb http://mir1.ovh.net/debian/ unstable main contrib non-free
# Uncomment the deb-src line if you want 'apt-get source'
# to work with most packages.
deb-src http://mir1.ovh.net/debian/ testing main contrib non-free
# uncommenting the following line will enable security updates
deb http://security.debian.org/ stable/updates main contrib non-free

# Multimedia packages - added by Sébastien Millet, February 2007
deb http://mirror.home-dn.net/debian-multimedia testing main
# deb-src http://mirror.home-dn.net/debian-multimedia stable main
</code></pre></td></tr></table></td>
  </tr>
  <tr>
    <td>Fichier <code><b>/etc/apt/preferences</b></code></td>
    <td><em>n/a</em></td>
    <td>Règles de précédence dans le choix de la distribution d'où prendre les paquetages
à installer ou mettre à jour. Exemple&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>Package: *
Pin: release a=testing
Pin-Priority: 900

Package: *
Pin: release a=stable
Pin-Priority: 90

Package: *
Pin: release a=unstable
Pin-Priority: 50
</code></pre></td></tr></table></td>
  </tr>
  <tr>
    <td><b>netselect-apt</b></td>
    <td>netselect-apt</td>
    <td><code><b>netselect-apt testing</b></code><br>
Détermine le serveur le plus rapide pour récupérer les paquetages de la distribution Testing.
Modifie <code>/etc/apt/sources.list</code>.</td>
  </tr>
  <tr>
    <td><b>apt-cdrom</b></td>
    <td>apt</td>
    <td><code><b>apt-cdrom add</b></code><br>
Référence (dans <code>/etc/apt/sources.list</code>) le CD se trouvant dans le lecteur de CDROM.</td>
  </tr>
  <tr>
    <td><b>aptoncd</b></td>
    <td>aptoncd</td>
    <td><code><b>aptoncd</b></code><br>
Lance aptoncd, pour récupérer les paquets installés sur une machine.</td>
  <tr>
    <td><b>apt-cache</b></td>
    <td>apt</td>
    <td><code><b>apt-cache show vim</b></code><br>
Affiche des informations (description, dépendances, etc.) au sujet du paquetage de nom vim.<br><br>
<code><b>apt-cache search tux</b></code><br>
Cherche tous les paquetages où il est question de tux.<br><br>
<code><b>apt-cache showsrc noatun</b></code><br>
Affiche quels paquets source sont nécessaires pour recompiler noatun.</td>
  </tr>
  <tr>
    <td><b>apt-show-versions</b></td>
    <td>apt-show-versions</td>
    <td><code><b>apt-show-versions -a tree</b></code><br>
Affiche les différentes versions de tree, toutes distributions confondues.</td>
  </tr>
  <tr>
    <td><b>apt-file</b></td>
    <td>apt-file</td>
    <td><code><b>apt-file search rcconf</b></code><br>
Affiche le nom du paquetage dans lequel se trouve un fichier de nom <code>rcconf</code>.</td>
  </tr>
  <tr>
    <td><b>apt-key</b></td>
    <td>apt</td>
    <td><code><b>gpg --armor --export 1F41B907 | sudo apt-key add -</b></code><br>
Ajoute la clé 1F41B907 (=&gt; signature des paquetages MPlayer) dans le gestionnaire APT. Pour que cette commande
fonctionne, la clé 1F41B907 doit se trouver dans le trousseau de gpg (GnuPG), cf.
<a href="#apt_key">2.25 Le programme <code>apt-key</code></a>.</td>
  </tr>
  <tr>
    <td><b>apt-rdepends</b></td>
    <td>apt-rdepends</td>
    <td><code><b>apt-rdepends vim</b></code><br>
Affiche les dépendances (en parcourant récursivement l'arbre dans les niveaux inférieurs) du paquetage
de nom vim.<br><br>
Pour se la jouer&nbsp;:<br>
<code><b>apt-rdepends -d rcconf | dot -Tps > ~/rcconf.ps &amp;&amp; kghostview ~/rcconf.ps</b></code><br>
Affiche sous forme graphique (fichier PostScript) les dépendances du paquetage rcconf.<br>
<code>dot</code> est fourni par le paquetage graphviz, kghostview est un programme KDE. Essayez avec
<b>gftp</b>, le résultat est amusant.</td>
  </tr>
  <tr>
    <td><b>deborphan</b></td>
    <td>deborphan</td>
    <td><code><b>deborphan</b></code><br>
Affiche les paquetages orphelins.</td>
  </tr>
  <tr>
    <td><b>wajig</b></td>
    <td>wajig</td>
    <td><code><b>wajig list-orphans</b></code><br>
Comparable à deborphan mais avec un peu plus de possibilités.</td>
  </tr>
  <tr>
    <td><b>cruft</b></td>
    <td>cruft</td>
    <td><code><b>cruft</b></code><br>
Affiche les fichiers qui ne font partie d'aucun paquetage.</td>
  </tr>
  <tr>
    <td><b>apt-show-source</b></td>
    <td>apt-show-source</td>
    <td><code><b>apt-show-source</b></code><br>
Affiche les paquets avec leur version binaire et leur version source.</td>
  </tr>
  <tr>
    <td><b>apt-spy</b></td>
    <td>apt-spy
  <tr>
    <td><b>-</b></td>
    <td>popularity-contest</td>
    <td>Une fois installé, participe au <em>Popularity&nbsp;Contest</em>, permettant de savoir quels
paquetages sont les plus utilisés par les utilisateurs Debian. Les données se trouvent dans le
fichier <code>/var/log/popularity-contest</code>. Les nombres en début de ligne indiquent
la date/heure à laquelle le fichier de référence du paquet a été accédé pour la dernière fois.
Ce nombre est le nombre de secondes écoulées depuis le 1/1/70 à minuit.<br><br>
Pour l'afficher de manière lisible&nbsp;:<br>
<code><b>date -d '1970-01-01 UTC <em>nombre</em> seconds' '+%d/%m/%Y'</b></code><br>
ou bien<br>
<code><b>date -d '@<em>nombre</em>' '+%d/%m/%Y'</b></code><br><br>
Script pour parcourir <code>/var/log/popularity-contest</code> et l'afficher de manière lisible
(exécuter <code><b>./monscript.pl&nbsp;/var/log/popularity-contest</b></code>)&nbsp;:
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#!/usr/bin/perl -w
mainloop: while (<>) {
  my $l = $_;
  @t = split(' ', $l);
  if (defined($t[2])) {
    $d0 = `date -d '\@$t[0]' '+%d/%m/%Y'`;
    $d1 = `date -d '\@$t[1]' '+%d/%m/%Y'`;
    chomp($d0);
    chomp($d1);
    print "$d0 $d1 $t[2]\n"
  }
}'
</code></pre></td></tr></table></td>
  </tr>
  <tr>
    <td><b>dh_make</b></td>
    <td>dh-make</td>
    <td><code><b>dh_make -e machin@domaine.net -f ../mypackage.tar.gz -c gpl</b></code><br>
dh_make crée et pré-remplit le répertoire debian/ dans l'arobrescence source du paquet</td>
  <tr>
    <td><b>dpkg-buildpackage</b></td>
    <td>dpkg-dev</td>
    <td><code><b>dpkg-buildpackage -b -rfakeroot</b></code><br>
Construis le paquetage se trouvant dans le répertoire courant.</td>
  </tr>
  <tr>
    <td><b>apt-src</b></td>
    <td>apt-src</td>
    <td><code><b>apt-src install ethtool</b></code><br>
Récupère les sources du paquetage ethtool, ainsi que les paquetages nécessaires
à sa construction.</td>
  </tr>
  <tr>
    <td><b>apt-build</b></td>
    <td>apt-build</td>
    <td><code><b>apt-build install tree</b></code><br>
Récupère les sources du paquetage tree, ainsi que les paquetages nécessaires
à sa construction, puis le construis, et enfin, l'installe&nbsp;!<br><br>
<code><b>apt-build world</b></code><br>
Reconstruis le système.</td>
  </tr>
  <tr>
    <td><b>debtags</b></td>
    <td>debtags</td>
    <td><code><b>debtags show iceweasel</b></code><br>
Affiche les tags du paquetage iceweasel.<br><br>
<code><b>debtags tagsearch browser</b></code><br>
Affiche les paquetages ayant un tag browser.<br><br>
<code><b>debtags tagshow sound::player</b></code><br>
Affiche des renseignements sur le tag sound::player.</td>
  </tr>
  <tr>
    <td><b>make-kpkg</b></td>
    <td>kernel-package</td>
    <td><code><b>make-kpkg --append-to-version=seb --revision=2.6.20.1seb.10 kernel_image</b></code><br>
Construis un paquetage contenant le noyau compilé, cf.
<a href="#compilation_noyau">2.32 Compilation du noyau</a>.</td>
  </tr>
  <tr>
    <td><b>make-jpkg</b></td>
    <td>java-package</td>
    <td><code><b>fakeroot make-jpkg jre-1_5_0_11-linux-i586.bin</b></code><br>
Construis un paquetage contenant la JRE de Sun&nbsp;&reg;,
cf. <a href="#jvm_iceweasel">2.7 JAVA Sun&nbsp;&reg; sur Iceweasel (firefox)</a>.</td>
  </tr>
  <tr>
    <td><b>reportbug</b></td>
    <td>reportbug</td>
    <td><code><b>reportbug</b></code><br>
Démarre le programme reportbug.</td>
  </tr>
  <tr>
    <td><b>dpkg-divert</b></td>
    <td>dpkg</td>
    <td><code><b>dpkg-divert --list</b></code><br>
Affiche la liste des diversions.</td>
  </tr>
  <tr>
    <td><b>apt-proxy</b></td>
    <td>apt-proxy</td>
    <td>Système de proxy pour APT.</td>
  </tr>
  <tr>
    <td><b>debootstrap</b></td>
    <td>debootstrap</td>
    <td>Installation d'un système de base.</td>
  </tr>
  <tr>
    <td><b>dgrep</b></td>
    <td>debian-goodies</td>
    <td>Recherche un motif dans les paquetages spécifiés en argument</td>
  </tr>
  <tr>
    <td><b>dglob</b></td>
    <td>debian-goodies</td>
    <td>Génère la liste des paquetages qui correspondent à un motif</td>
  </tr>
  <tr>
    <td><b>debget</b></td>
    <td>debian-goodies</td>
    <td>Récupère un paquetage dans le répertoire courant</td>
  </tr>
  <tr>
    <td><b>dpigs</b></td>
    <td>debian-goodies</td>
    <td>Pour afficher quels paquetages installés occupent le plus d'espace</td>
  </tr>
  <tr>
    <td><b>debman</b></td>
    <td>debian-goodies</td>
    <td>Pour consulter la page de manuel d'un paquetage non encore installé</td>
  </tr>
  <tr>
    <td><b>debmany</b></td>
    <td>debian-goodies</td>
    <td>Détermine et visualise la documentation relative à un paquetage</td>
  </tr>
  <tr>
    <td><b>checkrestart</b></td>
    <td>debian-goodies</td>
    <td>Détermine quels processus sont en attente de redémarrage pour utiliser des fichiers de configuration qui viennent d'être mis à jour</td>
  </tr>
  <tr>
    <td><b>popbugs</b></td>
    <td>debian-goodies</td>
    <td>Affiche la liste des bogues critiques d'un paquetage installé</td>
  </tr>
  <tr>
    <td><b>which-pkg-broke</b></td>
    <td>debian-goodies</td>
    <td>Affiche la liste des dépendances d'un paquetage</td>
  </tr>
</table>

<hr>

<h3><a name="syslogconf">2.37 Modification de <code>syslog.conf</code></a></h3>

<p>
Ajouter ces deux lignes pour afficher les LOGs messagerie sur le terminal virtuel 5, et
les LOGs système sur le terminal virtuel 6.<br>
<code>mail.*  /dev/tty5<br>
*.*;auth,authpriv.none  /dev/tty6</code><br>
Modifier <code>/etc/inittab</code> en conséquence.<br>
Résultat&nbsp;:
</p>

<p>
Fichier <code><b>/etc/syslog.conf</b></code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#  /etc/syslog.conf  Configuration file for syslogd.
#
#     For more information see syslog.conf(5)
#     manpage.

#
# First some standard logfiles.  Log by facility.
#

auth,authpriv.*     /var/log/auth.log
*.*;auth,authpriv.none    -/var/log/syslog
#cron.*       /var/log/cron.log
daemon.*      -/var/log/daemon.log
kern.*        -/var/log/kern.log
lpr.*       -/var/log/lpr.log
mail.*        -/var/log/mail.log
user.*        -/var/log/user.log
uucp.*        /var/log/uucp.log

#
# Logging for the mail system.  Split it up so that
# it is easy to write scripts to parse these files.
#
mail.info     -/var/log/mail.info
mail.warn     -/var/log/mail.warn
mail.err      /var/log/mail.err

# Logging for INN news system
#
news.crit     /var/log/news/news.crit
news.err      /var/log/news/news.err
news.notice     -/var/log/news/news.notice

#
# Some `catch-all' logfiles.
#
*.=debug;\
  auth,authpriv.none;\
  news.none;mail.none -/var/log/debug
*.=info;*.=notice;*.=warn;\
  auth,authpriv.none;\
  cron,daemon.none;\
  mail,news.none    -/var/log/messages

#
# Emergencies are sent to everybody logged in.
#
*.emerg       *

#
# I like to have messages displayed on the console, but only on a virtual
# console I usually leave idle.
#

<b># Sébastien Millet, Feb 2007</b>
<b>mail.* /dev/tty5</b>
<b>*.*;auth,authpriv.none /dev/tty6</b>

# The named pipe /dev/xconsole is for the `xconsole' utility.  To use it,
# you must invoke `xconsole' with the `-file' option:
#
#    $ xconsole -file /dev/xconsole [...]
#
# NOTE: adjust the list below, or you'll go crazy if you have a reasonably
#      busy site..
#
daemon.*;mail.*;\
  news.crit;news.err;news.notice;\
  *.=debug;*.=info;\
  *.=notice;*.=warn |/dev/xconsole
</code></pre></td></tr></table>

<p>
Fichier <code><b>/etc/inittab</b></code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># /etc/inittab: init(8) configuration.
# $Id: inittab,v 1.91 2002/01/25 13:35:21 miquels Exp $

# The default runlevel.
id:2:initdefault:

# Boot-time system configuration/initialization script.
# This is run first except when booting in emergency (-b) mode.
si::sysinit:/etc/init.d/rcS

# What to do in single-user mode.
~~:S:wait:/sbin/sulogin

# /etc/init.d executes the S and K scripts upon change
# of runlevel.
#
# Runlevel 0 is halt.
# Runlevel 1 is single-user.
# Runlevels 2-5 are multi-user.
# Runlevel 6 is reboot.

l0:0:wait:/etc/init.d/rc 0
l1:1:wait:/etc/init.d/rc 1
l2:2:wait:/etc/init.d/rc 2
l3:3:wait:/etc/init.d/rc 3
l4:4:wait:/etc/init.d/rc 4
l5:5:wait:/etc/init.d/rc 5
l6:6:wait:/etc/init.d/rc 6
# Normally not reached, but fallthrough in case of emergency.
z6:6:respawn:/sbin/sulogin

# What to do when CTRL-ALT-DEL is pressed.
ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now

# Action on special keypress (ALT-UpArrow).
#kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."

# What to do when the power fails/returns.
pf::powerwait:/etc/init.d/powerfail start
pn::powerfailnow:/etc/init.d/powerfail now
po::powerokwait:/etc/init.d/powerfail stop

# /sbin/getty invocations for the runlevels.
#
# The "id" field MUST be the same as the last
# characters of the device (after "tty").
#
# Format:
#  &lt;id&gt;:&lt;runlevels&gt;:&lt;action&gt;:&lt;process&gt;
#
# Note that on most Debian systems tty7 is used by the X Window System,
# so if you want to add more getty's go ahead but skip tty7 if you run X.
#
1:2345:respawn:/sbin/getty 38400 tty1
2:23:respawn:/sbin/getty 38400 tty2
3:23:respawn:/sbin/getty 38400 tty3
4:23:respawn:/sbin/getty 38400 tty4
<b># 5:23:respawn:/sbin/getty 38400 tty5</b>
<b># 6:23:respawn:/sbin/getty 38400 tty6</b>

# Example how to put a getty on a serial line (for a terminal)
#
#T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
#T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100

# Example how to put a getty on a modem line.
#
#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
</code></pre></td></tr></table>

<hr>

<h3><a name="compress_cd">2.38 Récupérer un CD audio sous forme de fichier son</a></h3>

<p>
Il existe de *très* nombreux programmes pour le faire, si bien qu'il est difficile de s'y
retrouver.
</p>

<p>
Pour récupérer un CD tel quel sous forme de fichiers .wav (un fichier par morceau),
sans se préoccuper de CDDB&nbsp;:
</p>

<pre><code> <b>cdparanoia -B -w 1-</b></code>, paquetage cdparanoia</pre>

<p>
Pour récupérer un CD tel quel sous forme de fichiers .wav, avec consultation de CDDB&nbsp;:
</p>

<pre><code> <b>icedax -B -D <code>/dev/hda</code> -L 1</b></code>, paquetage icedax, remplace cdda2wav</pre>

<p>
Pour encoder un fichier non compressé (par exemple, au format .wav) en mp3&nbsp;:
</p>

<pre><code> <b>lame <em>fichier_départ</em> <em>fichier_arrivée</em></b></code></pre>

<p>
Pour afficher des informations techniques sur un fichier mp3&nbsp;:<br>
<pre><code> <b>mp3info -x</b></code>, paquetage mp3info</pre>

<p>
Pour afficher les TAGs d'un fichier mp3 - ce programme permet aussi l'édition de
TAGs&nbsp;:
</p>

<pre><code> <b>id3v2 -l</b></code>, paquetage id3v2</pre>

<p>
Pour lire un CD audio et le convertir en MP3 avec lame, avec consultation CDDB&nbsp;:
</p>

<pre><code> <b>abcde -o mp3</b></code>, paquetage abcde</pre>

<p>
Je convertis mes CD audio en MP3 avec la configuration et la commande ci-dessous.
A noter qu'en l'absence d'option fournie à lame (<code>~/.abcde.conf</code>
ou <code>/etc/abcde.conf</code>), l'encodage est effectué à 128 kbps, 44 kHz.
</p>

<p>
Fichier <code><b>~/.abcde.conf</b></code>
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># ~/.abcde.conf

# To have a constant bitrate of 192 kbps.
# LAMEOPTS="-b 192"

# To have a variable bitrate
LAMEOPTS="-v"
</code></pre></td></tr></table>

<p>
Commande <code><b>abcde -x -o mp3</b></code>
</p>

<hr>

<h3><a name="ape_to_mp3">2.39 Convertir une image APE, compressée en RAR, en un ensemble de fichiers MP3</a></h3>

<ol>
  <li><b>Paquetages requis</b></li>
  <ul>
    <li>unrar, shntool, cuetools et monkeys-audio<br>
Pour être vu dans la base des paquetages monkeys-audio nécessite la ligne<br>
<code><b>deb http://www.rarewares.org/debian/packages/unstable/ ./</b></code><br>
dans le fichier <code>/etc/apt/sources.list</code>.</li>
  </ul><br>
  <li><b>Décompresser le fichier .rar</b></li>
  <ul>
    <li>Exécuter la commande<br>
<pre><code> <b>unrar x <em>fichier.rar</em></b></code></pre><br>
Cela produit (entre autres) un couple de fichiers {<code>CDImage.ape</code>, <code>CDImage.cue</code>}.</li>
  </ul><br>
  <li><b>Convertir {<code>CDImage.ape</code>, <code>CDImage.cue</code>} en plusieurs .wav</b></li>
  <ul>
    <li>Exécuter<br>
<pre><code> <b>cuebreakpoints CDImage.cue | shnsplit -o wav CDImage.ape</b></code></pre></li>
  </ul><br>
  <li><b>Convertir les fichiers .wav en .mp3 à débit variable</b></li>
  <ul>
    <li>Exécuter<br>
<pre><code><b>for f in `ls *.wav`; do f=`echo $f | sed 's/\.wav$//'`; lame -v $f.wav $f.mp3; done</b></code></pre></li>
  </ul>
</ol>

<hr>

<h3><a name="hwclock_ko">2.40 L'heure système est décalée</a></h3>

<h4>2.40.1 Symptôme</h4>

<p>
L'heure système - commande <code>date</code> et affichage KDE - est
systématiquement en avance de 2h après démarrage. Un réglage ne dure que jusqu'au démarrage suivant.<br>
C'est comme si le paramètre <code>UTC=no</code>, dans le fichier <code>/etc/default/rcS</code>,
était ignoré. Linux prend l'heure du BIOS, que j'ai choisie de régler sur l'heure
locale plutôt que UTC, et y ajoute deux heures car le fuseau horaire courant est réglé
à "Europe/Paris" = GMT+2 en été.<br>
Pour le réglage du fuseau horaire, cf. <a href="#reglage_fuseau_courant">2.14 Régler le fuseau horaire courant</a>.
</p>

<p>
Un test rapide (modification de <code>/etc/inid.d/hwclock.sh</code>) montre que <code>hwclock</code>
est bien invoqué avec l'option <em>--localtime</em>.<br>
L'exécution de <code>hwclock</code> en mode debug révèle l'origine de l'erreur&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# hwclock --debug --hctosys --localtime
hwclock from util-linux-2.12r
Using /dev/rtc interface to clock.
Assuming hardware clock is kept in local time.
Waiting for clock tick...
select() to /dev/rtc to wait for clock tick timed out
...got clock tick
maison-2:~#
</code></pre></td></tr></table>

<h4>2.40.2 Solution</h4>

<p>
L'une des solutions trouvée sur Internet consiste à exécuter <code>hwclock</code> avec
l'option <em>--directisa</em>. Ce n'est pas la plus propre mais c'est
la plus simple. A l'exécution&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>maison-2:~# hwclock --debug --hctosys --localtime --directisa
hwclock from util-linux-2.12r
Using direct I/O instructions to ISA clock.
Assuming hardware clock is kept in local time.
Waiting for clock tick...
...got clock tick
Time read from Hardware Clock: 2007/09/20 23:00:36
Hw clock time : 2007/09/20 23:00:36 = 1190322036 seconds since 1969
Calling settimeofday:
        tv.tv_sec = 1190322036, tv.tv_usec = 0
        tz.tz_minuteswest = -120
maison-2:~#
</code></pre></td></tr></table>

<p>
Comment donner cette option à <code>hwclock</code> au démarrage&nbsp;? Le script
<code>/etc/init.d/hwclock.sh</code> prend en compte la variable <em>HWCLOCKPARS</em>.
Cette variable pourrait être définie en modifiant directement <code>hwclock.sh</code>.
Ce n'est pas raisonnable en raison des mises à jour de paquet Debian à venir.<br>
Je préfère modifier le fichier <code>/etc/default/rcS</code>, en y ajoutant la ligne
<code>HWCLOCKPARS="$HWCLOCKPARS --directisa"</code>. Fichier complet&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>#
# /etc/default/rcS
#
# Default settings for the scripts in /etc/rcS.d/
#
# For information about these variables see the rcS(5) manual page.
#
# This file belongs to the "initscripts" package.

TMPTIME=0
SULOGIN=no
DELAYLOGIN=no
UTC=no
HWCLOCKPARS="$HWCLOCKPARS --directisa"
VERBOSE=no
FSCKFIX=no
</code></pre></td></tr></table>

<p>
A noter que <em>HWCLOCKPARS</em> n'est pas mentionné dans <code><b>man rcS</b></code>.
</p>

<hr>

<h3><a name="unilignes_perl">2.41 Quelques uni-lignes PERL</a></h3>

<p>
Ces uni-lignes proviennent tous de <i>GNU LINUX MAGAZINE FRANCE NUMÉRO 100</i> (décembre 2007),
avec parfois des modifications mineures.
</p>

<p>
<code><b>perl -ne '/<em>regexp</em>/&amp;&amp;print'</b></code><br>
Équivalent à <code><b>grep <em>regexp</em></b></code>.
</p>

<p>
<code><b>perl -ne '/<em>regexp</em>/||print'</b></code><br>
Équivalent à <code><b>grep -v <em>regexp</em></b></code>.
</p>

<p>
<code><b>perl -lne '}{print$.'</b></code><br>
Équivalent à <code><b>wc -l</b></code>.
</p>

<p>
<code><b>perl -e 'print chr(32 + rand 95) for 1..8; print "\n"'</b></code><br>
Génère un mot de passe aléatoire.
</p>

<p>
<code><b>perl -ne 'print if 14 .. 42' fichier</b></code><br>
Imprime les lignes 14 à 42. <code>unless</code> à la place de <code>if</code>
pour imprimer tout sauf cet intervalle.
</p>

<p>
<code><b>perl -MMIME::Base64=decode_base64 -e 'print decode_base64 join "", <>'</b></code><br>
Un décodeur BASE64.
</p>

<p>
<code><b>perl -MMIME::Base64=encode_base64 -e 'print encode_base64 join "", <>'</b></code><br>
Un encodeur BASE64.
</p>

<p>
<code><b>perl -pe 'tr/A-Za-z/N-ZA-Mn-za-m/'</b></code><br>
Encodeur/décodeur ROT13.
</p>

<p>
<code><b>perl -MSocket -nle 'print"$_";$_=gethostbyaddr inet_aton($_),AF_INET;print"\t$_"'</b></code><br>
Convertit une liste d'adresses IP en noms d'hôtes.
</p>

<p>
<code><b>perl -MSocket -nle '$h=$_;printf("%s\t%d.%d.%d.%d\n",$h,unpack"C4", $_) for splice @{[gethostbyname$_]},4'</b></code>
<br>Convertit une liste de noms d'hôtes en adresses IP.
</p>

<hr>

<h3><a name="cd_console">2.42 Gravage de CD en ligne de commande</a></h3>

<p>
<code><b>cdrecord -scanbus</b></code><br>
Détecte le graveur disponible.
</p>

<p>
<code><b>cdrecord -v -dev=ATA:1000,0,0 -blank=fast -eject gracetime=3</b></code><br>
Efface le CD-RW, éjecte-le quand c'est terminé et n'attends que 3 secondes après
exécution de la commande pour démarrer l'effacement.<br>
Remplacer 1000,0,0 par les valeurs trouvées à l'exécution de
<em><code>cdrecord&nbsp;-scanbus</code></em>.
</p>

<p>
Wodim permet également le gravage de CD en ligne de commande
</p>

<hr>

<h3><a name="bash">2.43 Maîtrise de bash</a></h3>

<p>
Ce qui suit est tiré du livre "Le shell bash", 3e édition, 2005-2006, éditions O'Reilly,
de Cameron Newham et Bill Rosenblatt, traduction de Hervé Soulard.
</p>

<h4>2.43.1 Substitutions</h4>

<pre><code><b>cd -</b></code>
  Aller au dernier répertoire dans lequel on se trouvait avant
  d'exécuter "cd" (pour aller dans son répertoire personnel)

<code><b>cd ~seb</b></code>
  Aller dans le répertoire personnel de l'utilisateur seb

<code><b>ls *[!0-9]</b></code>
  Lister les fichiers dont le dernier caractère n'est pas un chiffre

<code><b>ls *.[!a-zA-Z]*</b></code>
  Lister les fichiers dont l'extension ne commence pas par une lettre

<code><b>ls *.[!a-zA-Z]</b></code>
  Lister les fichiers dont l'extension est un seul caractère, qui ne doit pas être une lettre

<code><b>ls *.{gz,tar*}</b></code>
  Lister les fichiers dont l'extension est gz, ou bien est toute chaîne commençant par tar

<code><b>ls a{b}c</b></code>
  Lister le fichier de nom a{b}c (avec les accolades.) Différent du shell C.
  Le shell C listerait le fichier de nom abc, alors que bash considère que
  l'accolade comportant un seul élément, elle ne doit pas être interprétée.

<code><b>echo 1..5</b></code>
  Afficher 1..5

<code><b>echo {1..5}</b></code>
  Afficher 1 2 3 4 5

<code><b>echo {5..1}</b></code>
  Afficher 5 4 3 2 1

<code><b>echo {0,1}{0,1}{0,1}{0,1}{0,1}{0,1}{0,1}{0,1}</b></code>
  Afficher (en notation binaire) les 256 premiers entiers naturels

<code><b>echo {a..z}</b></code>
  Afficher toutes les lettres de l'alphabet, en minuscules (séparées par un espace.)

<code><b>echo {A..z}</b></code>
  Résultat dépendant du système&nbsp;! Sur un système ASCII (cas de loin le
  plus fréquent chez un particulier), affiche toutes les lettres majuscules,
  puis quelques caractères non alphanumériques, puis toutes les lettres
  minuscules.</pre>

<h4>2.43.2 Clavier (mode emacs)</h4>

<pre><b>CTRL-A</b>, <b>CTRL-E</b>
  Déplace le curseur sur le premier (A) ou dernier (E) caractère de la
  ligne de commande

<b>CTRL-K</b>, <b>CTRL-U</b>
  Efface tout depuis le curseur vers la gauche (U) ou vers la droite (K)

<b>CTRL-Y</b>
  Ramène la dernière chaîne de caractère effacée

<b>ECHAP-&lt;</b>, <b>ECHAP-&lt;</b>
  Va à la première (<) ou dernière (>) ligne de l'historique

<b>CTRL-R</b>
  Recherche en arrière

<b>CTRL-R CTRL-R</b>
  Recommence la dernière recherche arrière

<b>ECHAP-?</b>
  Liste les complétions possibles

<b>CTRL-O</b>
  Exécute les commandes en parcourant l'historique

<b>ECHAP-.</b>
  Insère le dernier mot de la ligne de commande précédente après le curseur

<b>CTRL-V</b>
  Protège le caractère suivant</pre>

<h4>2.43.3 Rappel des dernières lignes de commande</h4>

<pre><code><b>!!chaine</b></code>
  Exécute la première commande de l'historique commençant par
  chaine

<code><b>!?chaine</b></code>
  Exécute la dernière commande de l'historique commençant par
  chaine

<code><b>!!:0</b></code>
  Dernière commande exécutée, mais sans argument

<code><b>!!:0 !:2-$</b></code>
  Exécute la dernière commande, en enlevant son premier argument

<code><b>echo !*</b></code>
  Affiche les argument de la dernière commande exécutée

<code><b>^chaine1^chaine2</b></code>
  Exécute la commande précédente, en remplaçant chaine1 par chaine2

<code><b>!:1</b></code>, <code><b>!:$</b></code>, <code><b>!:^</b></code>, <code><b>!:2</b></code>, <code><b>!:2-4</b></code>
  Premier, dernier, premier, deuxième, et deuxième+troisième+quatrième
  argument(s) de la dernière ligne de commande

<code><b>!!:0 !:2-$:p</b></code>
  Rappelle la dernière commande, en supprimant le premier argument, et sans l'exécuter

<code><b>!-2:p</b></code>
  Affiche (sans l'exécuter) l'avant-dernière ligne de commande

<code><b>!507</b></code>
  Rappelle la commande numéro 507 dans l'historique</pre>

<h4>2.43.4 Fichier <code>~/.inputrc</code></h4>

<pre><code><b>"\C-A": "Bonjour chez vous !"</b></code>
  Provoque l'entrée de <em>Bonjour chez vous !</em> chaque fois que l'on appuie sur Control-A

<code><b>bind -P</b></code>
  Associations (de touches) en cours

<code><b>bind -V</b></code>
  Configuration actuelle de readline</pre>

<h4>2.43.5 Options bash</h4>

<pre><code><b>set -o (ou bien shopt -o)</b></code>
  Affiche certaines options

<code><b>shopt</b></code> (<code><b><i>shopt -p</i></b></code> pour un affichage réutilisable en ligne de commande)
  Affiche-s-en d'autres...

<code><b>set -o</b></code>
  <b>emacs</b> (mode emacs)
  <b>ignoreeof</b> (pas de sortie du shell avec \C-D)
  <b>noclobber</b> (pas d'écrasement de fichier avec >)
  <b>noglob</b> (* et ? ne sont pas remplacés)
  <b>nounset</b> (erreur si variable n'existe pas)
  <b>vi</b> (mode vi)

<code><b>shopt -s ou shopt -u</b></code>
  <b>cdable_vars</b> (cd prend le nom comme un nom de variable si rép n'existe pas)
  <b>checkhash</b> (hash des commandes pour ne pas parcourir $PATH)
  <b>dotglob</b> (les fichiers cachés sont pris en compte dans * et ?)</pre>

<h4>2.43.6 Variables de bash</h4>

<pre><b>HISTCONTROL</b>, liste de valeurs séparées par le caractère ':'
  <b>ignorespace</b> (n'entre pas la commande dans l'historique
    si elle commence par un espace)
  <b>ignoredups</b> (n'entre pas la commande dans l'historique
    si elle est identique à la précédente)
  <b>erasedups</b> (toutes les lignes précédentes correspondant
    à la ligne précédente sont effacées de l'historique)
  <b>ignoreboth</b> (active ignorespace et ignoredups)

<b>HISTTIMEFORMAT</b>
  <code>HISTTIMEFORMAT="%a %e %T "
  HISTTIMEFORMAT="%d/%m/%y %T "</code>

  Ajoute date ou date+heure à l'affichage de l'historique

<b>MAILPATH</b>
  <code>MAILPATH="/usr/mail/machin?machin vous a écrit !:\
  /usr/mail/bidule?Un message de bidule vous attend dans $_"</code>

  Pour vérifier l'arrivée de courrier (lié à l'option mailwarn de shopt)

<b>CDPATH</b>
  Recherche automatique de sous-répertoires (avec la commande <code>cd</code>)

<b>SECONDS</b>
  Secondes écoulées depuis l'ouverture du shell

<b>PWD</b>
  Répertoire courant

<b>OLDPWD</b>
  Ancien répertoire courant</pre>

<h4>2.43.7 Commandes</h4>

<pre><code><b>type programme</b></code> (ou mieux <code><b><i>type -all programme</i></b></code>)
  Indique où le programme se trouve, ou bien les alias définis sur ce nom

<code><b>hash</b></code>
  Affiche la table de hachage

<code><b>declare -f</b></code>
  Fonctions définies dans le shell, et leur définition

<code><b>declare -F</b></code>
  Uniquement les noms de fonctions définies</pre>

<h4>2.43.8 extglob</h4>

<pre><code><b>ls *@(.pl|mp3)</b></code>
  Liste tous les fichiers se terminant par .pl ou mp3

<code><b>ls *.@(pl|pm)</b></code>
  Liste les fichiers se terminant par .pl ou .pm

<code><b>ls -d !(*@(.pl|+([0-9])))</b></code>
  Liste (sans lister le contenu des répertoires) les fichiers ne se terminant pas
  par .pl ni par un chiffre</pre>

<hr>

<h3><a name="trucs_google">2.44 Trucs Google</a></h3>

<p>
Tiré de <em>Lunix Pratique Essentiel numéro 6</em>, Février-Mars 2009
</p>

<table cellpadding="2" cellspacing="1" border="1">
  <tr>
    <td>Saisie</td>
    <td>Description</td>
    <td>Exemple</td>
  </tr>
  <tr>
    <td><code><b>+ et -</b></code></td>
    <td>Rend un terme obligatoire (+) ou interdit (-) dans la recherche</td>
    <td><code>+unix -linux</code></td>
  </tr>
  <tr>
    <td><code><b>define:</b></code></td>
    <td>Trouve des définitions du terme</td>
    <td><code>define:thomisme</code></td>
  </tr>
  <tr>
    <td><code><b>site:</b></code></td>
    <td>Restreint la recherche à une URL</td>
    <td><code>ubuntu site:http://www.lea-linux.org</code></td>
  </tr>
  <tr>
    <td><code><b>filetype: ou ext:</b></code></td>
    <td>Restreint les résultats à un type de fichier</td>
    <td><code>tutoriel latex ext:pdf</code></td>
  </tr>
  <tr>
    <td><code><b>allintitle:, allinurl: ou allintext:</b></code></td>
    <td>Recherche uniquement dans le titre, l'URL ou le contenu des pages</td>
    <td><code>allintitle:randonnée grenoble</code></td>
  </tr>
  <tr>
    <td><code><b>book: ou movie:</b></code></td>
    <td>Recherche le livre ou le film ou bien, <em>movie:</em> étant suivi d'un nom
      de ville ou d'un code postal, affiche les salles et séances aux alentours</td>
    <td><code>movie:the chaser<br>movie:38000</code></td>
  </tr>
  <tr>
    <td><code><b>weather:</b></code></td>
    <td>Météo pour la ville qui suit</td>
    <td><code>weather:grenoble</code></td>
  </tr>
</table>

<hr>

<h3><a name="magic_sysrq">2.45 Combinaisons de touches avec CONFIG_MAGIC_SYSRQ activé</a></h3>

<ul>
  <li><b>[Alt+Syst+S]</b>&nbsp;: synchronise les disques (comme la commande flush)</li>
  <li><b>[Alt+Syst+E]</b>&nbsp;: termine les processus (TERM)</li>
  <li><b>[Alt+Syst+I]</b>&nbsp;: tue les processus (KILL)</li>
  <li><b>[Alt+Syst+U]</b>&nbsp;: démonte les volumes et remonte-les en lecture-seule</li>
  <li><b>[Alt+Syst+B]</b>&nbsp;: reboote</li>
</ul>

<hr>

<h3><a name="ssh_config">2.46 Chiffrer avec SSH un protocole qui ne l'est pas</a></h3>

<p>
D'après Linux Pratique numéro 61, septembre/octobre 2010.
</p>

<p>
Éditer le fichier <b>~/.ssh/config</b> (ou bien <b>/etc/ssh/ssh_config</b>), pour y créer un profil configuré ainsi.
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>Host MyProfile
  MyHost 192.168.1.99
  CheckHostIp no
  Port 22
  LocalForward 12345 127.0.0.1:12345
  Compression yes
</code></pre></td></tr></table>

<p>
Ouvrir la connexion avec la commande <b>ssh MyProfile</b>. Ensuite, lancer le programme client-serveur
(qui fonctionne sur le port 12345) en le connectant à localhost.
</p>

<hr>

<h3><a name="gimp_plastic">2.47 GIMP - créer un objet en plastique translucide</a></h3>

<p>
D'après Linux Pratique Essentiel numéro 13, avril-mai 2010
</p>

<ol>
  <li>Créer une image à fond gris (#BCBCBC)</li>
  <li>Créer un calque transparent dessus et y dessiner la forme, en blanc. Ce calque sera désigné comme "blanc"</li>
  <li>Créer un claque transparent, dit "brun"</li>
  <li>Clic droit sur le calque "blanc", menu "Alpha vers sélection"</li>
  <li>Dans le calque "brun", remplir la sélection avec un brun, #846A4F, puis désactiver la sélection</li>
  <li>Appliquer un flou gaussien 5 pixels (RLE) au calque "blanc"</li>
  <li>Dans le calque "brun", appliquer Filtres - Repoussage d'après une carte, profondeur 4 pixels, d'après le calque "blanc"</li>
  <li>Cliquer sur le calque "brun" avec l'outil Sélection par couleur (l'option Échantillonner sur tous les calques
    doit être désactivée)</li>
  <li>Réduire la sélection de 3 pixels, l'adoucir de 2 pixels</li>
  <li>Toujours sur cette sélection, aller dans le menu Couleurs - Courbes, sélectionner le canal Alpha, et descendre
    le point blanc à droite à une position de 1,2 environ (1 = 1 carreau)</li>
  <li>Dupliquer le calque "brun", revenir au calque "brun" et supprimer la sélection, puis désactiver la sélection</li>
  <li>Appliquer Couleurs - Inverser au calque "Copie de brun"</li>
  <li>Appliquer un flou gaussien de 10 pixels (RLE) au calque "brun", puis le décaler de 12 pixels en bas à droite en allant
    dans le menu Calque - Transformer - Décalage</li>
  <li>Passer le calque "brun" en mode "Multiplier" et ajuster son opacité</li>
  <li>Pour modifier la couleur de l'objet : dans le calque "Copie de brun", menu Couleurs - Teinte-Saturationn déplacer
    le curseur Teinte</li>
</ol>

<hr>

<h3><a name="gconf">2.48 configuration avec gconf-editor</a></h3>

<ul>
  <li><b>apps/metacity/general/button_layout</b>&nbsp;: mettre la valeur <i>menu:minimize,maximize,close</i> pour positionner
    les boutons de commande des fenêtres à droite</li>
    <li><b>apps/nautilus/desktop</b>&nbsp;: cocher ou décocher les éléments que l'on souhaite voir sur le bureau</li>
</ul>

<hr>

<h3><a name="conky">2.49 Configuration conky</a></h3>

<p>
Paquetage : <b>conky</b>. Après installation, exécuter<br>
<code>cp -i /etc/conky/conky.conf ~/.conkyrc</code>
</p>

<ul>
  <li>Pour afficher les dernières du log système&nbsp;: <code>Messages : ${tail /var/log/syslog 10 (2)}</code></li>
  <li>Réglages de l'affichage : utiliser <em>max_text_width</em>, <em>text_buffer_size</em> et <em>maximum_width</em></li>
  <li>Météo : utiliser <a href="http://aspnetresources.com/tools/WeatherIdResolver">http://aspnetresources.com/tools/WeatherIdResolver</a> pour déterminer la référence de la ville, puis l'URL <a href="http://xoap.weather.com/weather/local/ FRXX0153 item">http://xoap.weather.com/weather/local/ FRXX0153 <em>item</em></a> pour afficher les caractéristiques de la météo item par item, <em>item</em> peut être par exemple temperature, cloud_cover, pressure, wind_speed, wind_dir, humidity.</li>
  <li>Exemples de fichiers de configuration : <a href="http://conky.sourceforge.net/screenshots.html">http://conky.sourceforge.net/screenshots.html</a></li>
</ul>

<p>
Exemple de fichier ~/.conkyrc
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code># Conky, a system monitor, based on torsmo
#
# Any original torsmo code is licensed under the BSD license
#
# All code written since the fork of torsmo is licensed under the GPL
#
# Please see COPYING for details
#
# Copyright (c) 2004, Hannu Saransaari and Lauri Hakkarainen
# Copyright (c) 2005-2010 Brenden Matthews, Philip Kovacs, et. al. (see AUTHORS)
# All rights reserved.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#

alignment top_left
background no
border_width 1
cpu_avg_samples 2
default_color white
default_outline_color white
default_shade_color white
draw_borders no
draw_graph_borders yes
draw_outline no
draw_shades no
use_xft yes

# Mis à jour par Sébastien Millet en mars 2011
xftfont FreeSans:normal:size=10

gap_x 5
gap_y 60
minimum_size 5 5
net_avg_samples 2
no_buffers yes
out_to_console no
out_to_stderr no
extra_newline no
own_window yes
own_window_class Conky
own_window_type desktop
stippled_borders 0
update_interval 5.0
uppercase no
use_spacer none
show_graph_scale no
show_graph_range no

TEXT
${color}${font FreeSans:bold:size=10}SYSTÈME ${hr 2}
${color grey}$nodename (${addr wlan0})  -  $sysname $kernel on $machine
$hr
${color lightgrey}Temps d'exécution :$color $uptime ${color lightgrey}- Charge :$color $loadavg
${color lightgrey}Utilisation CPU :${color #5000a0} ${cpu}% ${cpubar}
${color black}${cpugraph 000000 5000a0}
${color grey}Utilisation RAM :$color $mem/$memmax - $memperc% ${membar 4}
${color grey}Utilisation Swap :$color $swap/$swapmax - $swapperc% ${swapbar 4}
${color grey}Température disque :${hddtemp /dev/sda}°C
$hr
${color grey}Système de fichiers : / $color${fs_used /}/${fs_size /} ${fs_bar 6 /}
$color$stippled_hr
${color lightgrey}Réseau :
 Descendant :${color #8844ee} ${downspeed wlan0} k/s${color lightgrey} ${offset 70}Montant :${color #22ccff} ${upspeed wlan0} k/s
${color black}${downspeedgraph wlan0 32,150 ff0000 0000ff} $alignr${color black}${upspeedgraph wlan0 32,150 0000ff ff0000}
${color}${font FreeSans:bold:size=10}MÉTÉO ${hr 2}
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 temperature }°C
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 cloud_cover }°C
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 pressure }°C
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 humidity }°C
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 wind_speed }°C
#${color grey}Température :${weather http://xoap.weather.com/weathel/local/ FRXX0153 wind_dir }°C
</code></pre></td></tr></table>

<hr>

<h3><a name="cpp11">2.50 Nouveautés C++11</a></h3>

<ul>
  <li>Initialisation par accolade, ex. <code>int t[2]{1, 2};</code></li>
  <li>Mot-clé <code>auto</code> pour que le compilateur devine le type, ex. <code>for (auto it = v.begin(); it != v.end(); it++)</code></li>
  <li>Les <code>enum class</code>, pour définir les constantes dans l'espace de nommage de la classe. Avec GCC 4.5 il faut écrire <code>enum class</code>, avec c++11 <code>enum</code> est suffisant</li>
  <li>Le <code>&amp;&amp;</code> permet de gérer le constructeur par déplacement</li>
  <li>Les expressions lambda permettent d'utiliser des 'fonctions muettes' là où un foncteur est attendu</li>
  <li>Les chaînes brutes permettent l'écriture littérale de chaînes contenant des caractères tels que double quote, saut de ligne, antislash,
elles sont délimitées par "( et )" (configurable) et doivent commencer par un R, exemple : <code>const char *s = R"(a\b\c)";</code></li>
  <li><code>bind</code> permet de gérer plus de paramètres que <code>bind1st</code> et <code>bind2nd</code></li>
  <li>Le mot-clé <code>function</code> permet de gérer des fonctions normales, des objets fonction et des méthodes</li>
  <li>On peut parcourir les éléments d'un tableau (du moment qu'il implémente <code>begin()</code> et <code>end()</code>) avec auto, ex. <code>for (auto v : MonTableau)</code>, <code>auto &amp;x</code> pour parcourir par référence, <code>const auto &amp;x</code> par référence constante, <code>const auto x</code> par valeur constante</li>
  <li>Typage des énumérations, ex. <code>enum ll :char {error, warning, information};</code></li>
  <li>Les énumérations peuvent être déclarées en avance (comme les classes), ex. <code>enum class ll;</code> qui peut ensuite être invoqué alors que l'énumération n'est pas encore définie</li>
  <li>Introduction de <code>nullptr</code> pour éviter les soucis avec <code>NULL</code> qui peut être ambiguë entre le type pointeur et entier - <code>nullptr</code> est forcément un pointeur</li>
  <li>Initialisation d'attributs non statiques dans la définition d'une classe, pour ne pas avoir à répéter toujours la meme chose dans les différents constructeurs</li>
  <li>Il est possible d'invoquer un constructeur depuis un autre constructeur (délégation de constructeur)</li>
  <li>Introduction du mot-clé <code>override</code> pour annoncer que l'on surcharge (évite la création d'une nouvelle méthode non dérivée en raison d'une différence minime dans la déclaration)</li>
  <li>Introduction du mot-clé <code>final</code> pour annoncer que la méthode ne pourra plus être dérivée</li>
  <li>Définition de littéraux personnalisés comme <code>50kg</code> pour un type kilo... Mais l'initialisation se fait à l'exécution pas à la compilation</li>
  <li><code>std::thread</code> pour gérer le threading</li>
  <li><code>mutex</code> pour gérer l'exclusion avec les threads, avec <code>mutex.lock()</code> et <code>mutex.unlock(),</code> ou mieux avec des gardiens de verrou, <code>lock_guard&lt;mutex&gt;</code> pour gérer l'exclusion avec la construction et destruction de l'objet ce qui est plus sûr et conforme au C++</li>
  <li><code>condition_variable</code> permet de surveiller le changement d'une variable</li>
  <li><code>future</code> permet d'exécuter une fonction de manière asynchrone</li>
</ul>

<hr>

<h3><a name="weboob">2.51 Weboob, WEB Out Of Browser</a></h3>

<p>
D'après GNU Linux Pratique numéro 79, septembre-octobre 2013.
</p>

<p>
Installation&nbsp;:
</p>

<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>sudo apt-get install git
git clone git://git.symlink.me/pub/weboob/stable.git
sudo apt-get install python-setuptools pyqt4-dev-tools python-dev libxml2-dev libxslt1-dev python-html2text python-prettytable zlib1g-dev

sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib
  <b>*</b> Cette dernière instruction provoque une erreur car le lien existe déjà, le problème est donc résolu (mis ici pour mémoire)

  <b>*</b> Ajout par rapport à LP79 : l'installation des exécutables produit une erreur
    "ImportError: No module named dateutil.parser" ainsi que
    "ImportError: Please install python-mechanize"
    Il faut donc installer ces modules avec la commande :
sudo apt-get install python-dateutil python-mechanize
  <b>*</b> Par la suite une erreur se produit si cssselect n'est pas trouvé, à installer :
sudo apt-get install python-cssselect

cd stable
./tools/local_install.sh ~/weboob
  <b>*</b> Ici les exécutables sont installés dans ~/weboob, à ajouter au PATH dans le rc du shell
</code></pre></td></tr></table>

<hr>

<h3><a name="abcde_ancien">2.52 Installer une version antérieure du logiciel abcde</a></h3>

<p>
Dans sa versions actuelle (2.5.4), abcde ne modifie plus les tags ID3 à l'issue d'un encodage en MP3.
Ce bug s'est produit sur une Ubuntu raring.<br>
Pour revenir à la dernière version dépourvue de ce bug j'ai procédé comme suit :
</p>

<ul>
  <li>Après une recherche rapide sur Internet, on trouve que désormais abcde utilise eyeD3 au lieu de id3v2 pour l'écriture des tags ID3, et les discussions motrent que c'est ce changement qui provoque le bug.</li>
  <li>Précision : une solution qui ne fonctionne pas est de modifier <code><b>~/.abcde.conf</b></code> pour forcer l'utilisation d'id3v2.</li>
  <li>J'ai donc recherché en quelle version ce changement a eu lieu</li>
  <ul>
    <li>J'ai installé les sources en exécutant <code><b>sudo apt-get source abcde</b></code>
    <li>En examinant le fichier <code><b>abcde-2.5.4/changeLog</b></code>, on voit que eyeD3 est utilisé à partir de la version 2.5.4</li>
    <li>En recherchant l'historique des versions sur Internet, on trouve cette URL&nbsp;: <a href="https://launchpad.net/ubuntu/+source/abcde/+publishinghistory">https://launchpad.net/ubuntu/+source/abcde/+publishinghistory</a></li>
    <li>C'est la version 2.5.3 qui m'intéresse et d'après ce site elle est disponible sous quantal (universe) au lieu de raring</li>
  </ul>
  <li>J'ai modifié le fichier <code><b>/etc/apt/sources.list</b></code> en y ajoutant la ligne :<br>
<code><em>deb http://fr.archive.ubuntu.com/ubuntu/ quantal universe</em></code><br>
en-dessous de la ligne<br>
<code><em>deb http://fr.archive.ubuntu.com/ubuntu/ raring universe</em></code><br>
Ce point est important (ajout *en-dessous*) car les paquets apparaissant dans plusieurs dépôts sont pris par défaut dans le dépôt mentionné en premier. Or avec cet ajout un grand nombre de paquets apparaîtront dans les deux dépôts.</li>
  <li>J'ai désinstallé abcde en exécutant <code><b>sudo apt-get remove abcde</b></code></li>
  <li>J'ai installé abcde en exécutant <code><b>sudo apt-get install abcde/quantal</b></code></li>
  <li>L'affichage d'apt-get est clair, on peut toutefois vérifier avec la commande <code><b>dpkg -l abcde</b></code> ou bien sûr la commande <code><b>abcde -v</b></code></li>
</ul>

<p>
Un test rapide montre que l'encodage de CD fonctionne bien en version 2.5.3, les TAGs ID3, vérifiés avec <code><b>id3v2</b></code>, sont bien mis à jour.
</p>

<hr>

<h3><a name="selection_logicielle">2.53 Sauvegarder et rétablir la sélection logicielle</a></h3>

<p>
Pour enregistrer la sélection&nbsp;:
</p>
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>dpkg --get-selections &gt; liste-logiciels
</code></pre></td></tr></table>
<p>
Pour restorer la sélection&nbsp;:
</p>
<table bgcolor="#E5E5E5" style="margin-left: 1cm;" cellpadding="5"><tr><td>
<pre><code>dpkg --set-selections &lt; liste-logiciels
apt-get dselect-upgrade
</code></pre></td></tr></table>

<hr>

<h3><a name="debian_wheezy">2.54 Quelques trucs sur Debian Wheezy</a></h3>

<ul><b>Lu dans <em>Linux Identity Pack N°28</em>, DEBIAN&nbsp;7.6</b>
  <li>Pour avoir des paquets moins libres&nbsp;: dépôts <code><b>contrib</b></code> et <code><b>non-free</b></code></li>
  <li>Mise à jour automatique&nbsp;: installer le paquet <code><b>unattended-upgrades</b></code></li>
  <li>Mise à jour automatique de l'heure&nbsp;: installer le paquet <code><b>ntp</b></code></li>
  <li>Jeux en ligne de commande&nbsp;: <code><b>bsdgames</b></code> et <code><b>ninvaders</b></code></li>
  <li>Carte NVIDIA : installer <code><b>nvidia-glx</b></code>, <code><b>nvidia-settings</b></code> et <code><b>nvidia-xconfig</b></code>, ensuite exécuter <code><b>nvidia-xconfig</b></code><br>
  Par la suite il est possible de configurer NVIDIA avec <code><b>nvidia-settings</b></code></li>
  <li>Pour faire des modifications importantes (type d'installation)&nbsp;: <code><b>tasksel --list-tasks</b></code><br>
  Retrouver un méta-paquet&nbsp;: <code><b>tasksel --task-packages <i>métapaquet</i></b></code><br>
  Ensuite le nom du méta-paquet est à installer normalement avec <code><b>apt-get install</b></code></li>
  <li>Environnement KDE&nbsp;: paquet <code><b>task-kde-desktop</b></code><br>
  Environnement LXDE&nbsp;: paquet <code><b>task-lxde-desktop</b></code><br>
  Environnement Xfce&nbsp;: paquet <code><b>task-xfce-desktop</b></code><br>
  Environnement GNOME (installé par défaut)&nbsp;: paquet <code><b>task-gnome-desktop</b></code></li>
  <li><code><b>gparted</b></code> pour gérer les partitions</b></code></li>
  <li><code><b>ttf-mscorefonts-installer</b></code> pour avoir plus de polices de caractères</li>
</ul>
<ul><b>Quelques codecs utiles</b>
  <li>Modifier le fichier <code><b>/etc/apt/sources.list</b></code> pour y ajouter<br>
  <code><b>deb http://www.deb-multimedia.org wheezy main non-free<br>
  deb-src http://www.deb-multimedia.org wheezy main non-free</b></code></li>
  <li>Récupérer la clé d'authentification en suivant la procédure décrite ici&nbsp;:<a href="#apt_key">2.25 Le programme <code>apt-key</code></a>
  <li>Ensuite après mise à jour de la base, installer ces codecs&nbsp;: <code><b>w32codecs libdvdcss2 gstreamer0.10-fluendo-mp3 gstreamer0.10-ffmpeg ffmpeg sox twolame vorbis-tools lame faad libmatroska5 libav-tools</b></code></li>
</ul>

<ul><b>Installer des paquets récents</b>
  <li>Modifier le fichier <code><b>/etc/apt/sources.list</b></code> pour y ajouter<br>
  <code><b>deb http://ftp.fr.debian.org/debian wheezy-backports main<br>
  deb-src http://ftp.fr.debian.org/debian wheezy-backports main</b></code></li>
  <li>Ensuite après mise à jour de la base, installer un paquet comme ceci&nbsp;:<br>
  <code><b>apt-get -t wheezy-backports install <i>paquet</i></b></code></li>
</ul>

<hr>

<h3><a name="kde_fonts">2.55 Améliorer le rendu des applications GTK dans KDE</a></h3>

<p>
Installer les paquets <code><b>qtcurve system-config-gtk-kde</b></code>.<br>
Ensuite aller dans la fenêtre de configuration de KDE, <em>Apparence&nbsp;-&gt; Styles et polices GTK</em>. Dans le champ <em>Utiliser un autre style</em> sélectionner <code><b>QtCurve</b></code>.
</p>

<hr>

<h3><a name="build_deb_rpm">2.56 Construire des paquetages DEB et RPM</a></h3>

<p>
D'après <em>Inside Linux Hors-série n° 8</em>
</p>

<h4>1ère partie : DEB</h4>

<p>
Les paquetages permettant de compiler sont&nbsp;: <b>build-essential autoconf automake autotools-dev</b><br>
La construction des paquetages est faite par&nbsp;: <b>dh-make debhelper devscripts fakeroot xutils lintian pbuilder</b>
</p>

<ol>
  <li>Il faut disposer d'une clé gpg (paire privée/publique) gnupg, je passe cette partie</li>
  <li>Exécuter dh_make pour préparer les sources. Typiquement il faut se rendre dans le répertoire
    racine des sources du logiciel et exécuter ceci&nbsp;:<br>
    <code>dh_make -e <em>AdresseEmail</em> -c <em>Licence</em> -f ../<em>FichierArchive</em></code><br>
    Par exemple&nbsp;:<br>
    <code>dh_make -e milletseb@laposte.net -c gpl3 -f ../prpn-0.5.5.tar.gz</code></li>
  <li>Éditer le fichier <code>debian/control</code></li>
  <li>Exécuter <code>dpkg-depcheck -d ./configure</code> pour détecter les dépendances</li>
  <li>Selon les résultats de la commande précédente, éditer le fichier <code>debian/control</code></li>
  <li>Éditer le fichier <code>changelog</code></li>
  <li>Exécuter <code>dpkg-buildpackage -b</code></li>
  <li>Vérifier la confirmité du paquetage créé avec <code>lintian</code></li>
</ol>

<h4>2ème partie : RPM</h4>

<ol>
  <li>Exécuter les commandes suivantes pour disposer des paquets nécessaires à la construction&nbsp;:<br>
    <code>yum groupinstall «Development Tools»</code><br>
    <code>yum install gcc-c++ fedora-packager</code><br>
    S'ajouter au groupe <code>mock</code> pour ne pas avoir à tout faire en tant que root</li>
  <li>Exécuter <code>rpmdev-setuptree</code>, cela crée ~/rpmbuild dans lequel le travail sera effectué</li>
  <li>Déplacer l'archive dans <code>~/rpmbuild/SOURCES</code></li>
  <li>Exécuter <code>rpmdev-newspec <em>NomPkg</em></code> dans le répertoire <code>~/rpmbuild/SPECS</code></li>
  <li>Modifier le fichier <code>~/rpmbuild/SPECS/<em>NomPkg</em>.spec</code> avec les dépendances et autres paramètres</li>
  <li>Si la construction depuis la source peut être entièrement prise en charge automatiquement, exécuter <code>yum-builddep <em>NomPkg</em></code></li>
  <li>Sinon exécuter <code>rpmbuild -ba <em>NomPkg</em>.spec</code></li>
  <li>Pour installer le paquetage&nbsp;: <code>rpm -ivh <em>NomPkg</em></code></li>
  <li>Pour vérifier qu'il est bien installé&nbsp;: <code>rpm -qa</code></li>
</ol>

<hr>

<h3><a name="commandes">2.57 Quelques trucs bien utiles en ligne de commande</a></h3>

<p>
D'après <em>Linux Planète Août-Septembre 2018</em>.
</p>

<table cellpadding="2" cellspacing="1" border="1">
    <tr><td><b><code>sort -h</code></b></td>
        <td>Trie en fonction de tailles affichées avec une unité (M, G, etc.).</td>
    </tr>
    <tr><td><b><code>progress</code></b></td>
        <td>Affiche la progression de commandes longues à exécuter (cp, du, etc.)</td>
    </tr>
    <tr><td><b><code>ip</code></b></td>
        <td>A paraît-il remplacé <b><code>ifconfig</code></b></td>
    </tr>
    <tr><td><b><code>ps -ejH</code></b></td>
        <td>Affiche les processus en cours d'exécution, sous forme hiérarchique (voir aussi <b><code>pstree</code></b>)</td>
    </tr>
    <tr><td><b><code>ps -e -o %cpu,%mem,command | sort -nr -k 2 | head -10</code></b></td>
        <td>Affiche les 10 programmes qui consomment le plus de mémoire.
            Le magazine donne <b><code>ps -euxf | sort -nr -k 4 | head -10</code></b>, le résultat est touffu...</td>
    </tr>
    <tr><td><b><code>iostat <em>n</em></code></b></td>
        <td><b><code>iostat</code></b> fait partie du paquetage <b><code>sysstat</code></b>.
            Affiche la charge des disques toutes les <em>n</em> secondes.</td>
    </tr>
    <tr><td><b>Fermeture automatique du terminal</b></td>
        <td>Modifier le fichier <b><code>/etc/profile</code></b> et y ajouter :<br>
            <pre><b><code># Exit Terminal
TMOUT=1200
export TMOUT</code></b></pre></td>
    </tr>
    <tr>
        <td><b><code>apt --no-install-recommends install <em>nom_paquet</em></code></b></td>
        <td>Installe un paquetage, sans installer les paquets recommandés.
            Pour rendre cette option permanente&nbsp;: ajouter la ligne
            <pre><b><code>APT::Install-Recommends "false";</code></b></pre>
            au fichier <b><code>/etc/apt/apt.conf</code></b>.<br><br>
            Ajouter la ligne
            <pre><b><code>APT::Install-Suggests "true";</code></b></pre>
            pour installer automatiquement les paquetages suggérés.</td>
    </tr>
    <tr><td><b><code>apt changelog <em>nom_paquet</em></code></b></td>
        <td>Pour connaitre les ChangeLog d'un paquetage.</td>
    </tr>
    <tr><td><b><code>gdebi</code></b></td>
        <td>Installation d'un fichier <b><code>.deb</code></b>.</td>
    </tr>
    <tr><td><b>Mettre des étoiles à <em>sudo</em></b></td>
        <td>Lancer <b><code>visudo</code></b> et remplacer la ligne
            <pre><b><code>Defaults   env_reset</code></b></pre> par
            <pre><b><code>Defaults   env_reset,pwfeedback</code></b></pre></td>
    </tr>
    <tr><td><b>Prolonger les droits dans <em>sudo</em></b></td>
        <td>Toujours dans <b><code>visudo</code></b>, écrire :
            <pre><b><code>Defaults   env_reset,timestamp_timeout=30</code></b></pre>
            La durée est en minutes (0 pour que le mot de passe soit demandé à chaque fois).</td>
    </tr>
    <tr><td><b><code>systemctl</code></b></td>
        <td>Affiche l'état de <em>systemd</em>.</td>
    </tr>
    <tr><td><b><code>systemd-analyze blame</code></b></td>
        <td>Affiche une analyse du démarrage système</td>
    </tr>
    <tr><td><b><code>cat /rpco/cmdline</code></b></td>
        <td>Affiche les paramètres du noyau</td>
    </tr>
    <tr><td><b><code>hwinfo --wlan --short</code></b></td>
        <td>Affiche des informations sur la carte wifi</td>
    </tr>
</table>
</p>

<hr>

<h3><a name="openvpn_autostart">2.58 Démarrage automatique d'openvpn</a></h3>

<p>
D'après <em>Linux Planète Août-Septembre 2018</em>.
</p>
<p>
Créer le fichier <b><code>/etc/systemd/system/openvpn@VPNTunnel</code></b> ainsi :
<pre><code>[Unit]
Description=OpenVPN connexion VPNTunnel
After=network.target
[Service]
Type=forking
ExecStart=/usr/sbin/openvpn --config /etc/openvpn/vpntunnel/Amsterdam.ovpn --daemon openvpn@VPNTunnel
WorkingDirectory=/etc/openvpn/vpntunnel/
[Install]
WantedBy=multi-user.target
</code></pre>
Ensuite, enregistrer le script dans la base <em>systemctl</em> avec la commande&nbsp;:<br>
<b><code>sudo systemctl enable openvpn@VPNTunnel.service</code></b><br><br>
Afficher l'adresse IP&nbsp;:<br>
<b><code>curl ifconfig.co</code></b>
</p>

<hr>

<h3><a name="copie_dvd">2.59 Copie de DVD</a></h3>

<p>
<b>1ère méthode</b>&nbsp;: exécuter la commande
<pre><b><code>vobcopy -m</code></b></pre>
(cette première méthode nécessite <b><code>libdvdcss2</code></b>)
</p>

<p>
<b>2ème méthode</b>&nbsp;: exécuter la commande
<pre><b><code>mplayer -dumpstream -dumpfile output.mpg dvd://1</code></b></pre>
</p>

<hr>

<h3><a name="lancer_logiciel_sans_reseau">2.60 Lancer un logiciel en bloquant son accès au réseau</a></h3>

<p>
D'après <em>Linux Planète</em> de février - mars 2019.

<pre><code>
# Créer une un espace de nomage vide :
ip netns add no-network

# Démarrer un logiciel sans accès réseau
ip netns exec no-network su <i>utilisateur</i> -c <i>logiciel</i></code></pre>
</p>

<hr>

<h3><a name="easy2boot">2.61 Easy2Boot</a></h3>

<p>
D'après <em>Linux Pratique numéro 112</em> (mars - avril 2019).<br>
Auteur de l'article : Benoît Benedetti.
</p>

<p>
Il n'y a pas de paquet à installer.
Il faut télécharger l'archive ZIP disponible sur le site Easy2Boot,
d'adresse <a href="http://www.easy2boot.com/download/">http://www.easy2boot.com/download/</a>.
</p>

<p>
Une fois téléchargée et décompressée, on obtient un
dossier de 550 MO environ, contenant Easy2Boot.<br>
Par la suite, on suppose que le dossier où l'archive a été décompressée est
<code>/opt/Easy2Boot_v1.A9</code>.
</p>

<p>
Ci-dessous, <code>##</code> indique un commentaire, <code>#</code>
indique une commande exécutée en tant que root.
</p>

<p>
<pre><code>## Créer deux partitions sur une clé USB, 80%/20%,
## de type W95 FAT32 (LBA) :
## (exemple avec une clé de 62 GO sur /dev/sda)

# <b>fdisk -l /dev/sda</b>
Disque /dev/sda : 57,9 GiB, 62109253632 octets, 121307136 secteurs
Modèle de disque : Ultra
Unités : secteur de 1 × 512 = 512 octets
Taille de secteur (logique / physique) : 512 octets / 512 octets
taille d'E/S (minimale / optimale) : 512 octets / 512 octets
Type d'étiquette de disque : dos
Identifiant de disque : 0x30ddf2c3

Périphérique Amorçage    Début       Fin Secteurs Taille Id Type
/dev/sda1                 2048  97046527 97044480  46,3G  c W95 FAT32 (LBA)
/dev/sda2             97046528 121307135 24260608  11,6G  c W95 FAT32 (LBA)

## Formatter la deuxième partition en exfat :
# <b>mkfs.exfat -n "DATA-EASY2BOOT" /dev/sda2</b>

## Initialiser la première partition (formattage, copie de fichiers
## et configuration pour rendre amorçable).
## ATTENTION
##   D'après Linux Pratique, le script affiche propose souvent un
##   mauvais volume par défaut (dans mon cas : il n'affiche rien,
##   donc il faut corriger de toute façon).
# <b>bash /opt/Easy2Boot_v1.A9/_ISO/docs/linux_utils/fmt.sh</b>
## Une fois lancé, répondre 'n' en général et indiquer la première
## partition, dans notre exemple, <b>/dev/sda1</b>.

## Tester la clé
# <b>qemu-system-x86_64 -m 512 -drive format=raw,file=/dev/sda</b>

## Les fichiers ISO doivent être copiés dans des sous-répertoires
## de _ISO.
## Pour changer le nom d'affiche d'une entrée, créer un fichier
## ayant le même nom que l'image, mais l'extention remplacée par txt
## IMPORTANT
##   Après avoir copié les images à booter, il faut défragmenter
##   la clé, avec l'utilitaire :
##   _ISO/docs/linux_utils/defragfs
##   exécuté en lui indiquant le dossier et l'option -f
##   Par exemple :
$ <b>perl /opt/Easy2Boot_v1.A9/_ISO/docs/linux_utils/defragfs /mnt/usbkey -f</b>
</code></pre>

<hr>

<h3><a name="sortieprocessus">2.62 Changer la sortie d'un processus en cours d'exécution</a></h3>

<p>
D'après <a href="https://superuser.com/questions/732503/redirect-stdout-stderr-of-a-background-job-from-console-to-a-log-file">https://superuser.com/questions/732503/redirect-stdout-stderr-of-a-background-job-from-console-to-a-log-file</a>.
</p>

<p>
<pre><code># 1. Attacher gdb au processus en cours d'exécution avec l'option -p
gdb -p <em>PID</em>
# Ou bien (cette commande nécessite d'être root)
sudo gdb -p <em>PID</em>
# 2. Exécuter les commandes suivantes dans gdb :
p (int)dup2((int)open("/nom/complet/du/fichier",577,420),1)
p (int)dup2(1,2)
# D'après l'URL donnée ci-dessus, les constantes correspondent à :
# 577 = O_CREAT|O_WRONLY|O_TRUNC
# 420 = S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH
# 3. Détacher gdb et quitter
detach
quit
</code></pre>
</p>

<p>
La sortie et l'erreur standards du processus <em>PID</em> sera effectuée dans
le fichier /nom/complet/du/fichier, au lieu du terminal.
</p>

<hr>

<h3><a name="manips_pdf">2.63 Manipulations de fichier PDF</a></h3>

<p>
D'après <em>Linux Pratique numéro 113, mai-juin 2019</em>.
</p>

<p>
<pre><code>
# 1. Manips

<b>pdfcrop</b> --margins '-10 -20 30 40' in.pdf out.pdf
# <b>pdfshuffler</b> et <b>pdfarranger</b> pour modifier au niveau page (ré-ordonner,
supprimer, changer la disposition paysage-portrait, recadrer)
# <b>pdftk</b>, pour tout faire :
<b>pdftk</b> in.pdf cat 1-3 5-end output out.pdf  # Supprimer la page 4
<b>pdftk</b> in1.pdf in2.pdf cat output out.pdf   # Concatène deux fichiers
<b>pdftk</b> in.pdf burst                         # Écris un fichier par page
<b>pdf-remove-blank-pages</b> in.pdf out.pdf      # Supprime les pages blanches (ne fonctionne pas si images)
<b>pdf-zip</b> in1.pdf in2.pdf out.pdf            # Alterne les pages du 1er et 2e fichier

# 2. Gestion / OCR
# <b>Paperwork</b> pour classer des documents scannés (fonctionne avec OCR)
<b>ocrmypdf</b> -l fra in.pdf out.pdf  # Ajoute un calque avec le texte

# 3. Extraction
<b>pdftotext</b> in.pdf  # Extrais le texte de in.pdf
# <b>pdfminer</b>, même chose (extraction de texte)
<b>pdfimages</b> -all -- in.pdf <em>répertoire_images</em>

# 4. Recherche et comparaison
# <b>pdfgrep</b>, pour faire des recherches
# <b>diffpdf</b>, pour visualiser la différence entre deux PDF

# 5. Optimisation
<b>pdfsizeopt</b> in.pdf out.pdf  # Optimise
<b>gs</b> -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/ebook -dSAFER -dNOPAUSE -dQUIET -dBATCH -sOutputFile="out.pdf" "in.pdf"
# En plus simple :
<b>ps2pdf</b> -dPDFSETTINGS=/ebook in.pdf out.pdf
# Pour choisir la qualité, choisir entre : screen, ebook, printer et prepress

# 6. Visualisation
# <b>Evince</b>, <b>Okular</b>, <b>mupdf</b>, <b>xpdf</b>
# <b>Zathura</b> : affiche avec des commandes à la vi !

# 7. Sécurité
<b>pdftk</b> in.pdf input_pw "x" output out.pdf   # Supprime le mot de passe
<b>qpdf</b> --decrypt --password=x in.pdf out.pdf # Supprime le mot de passe
<b>pdfcrack</b> in.pdf                   # Craque le fichier
<b>pdfcrack</b> -c 'abcdefgh123-_$@' in.pdf # Craque le fichier, en utilisant certains caractères
# <b>jsignpdf</b>, pour gérer la signature des PDF
</code></pre>
</p>

<hr>

<h3><a name="retouche_photos">2.64 Retouche photographies</a></h3>

<p>
D'après <em>Linux Pratique numéro 113, mai-juin 2019</em>.
</p>

<p>
<ol>
    <li>Rappel : cocher <em>Éclater la vue</em> permet de visualiser le réglage
    sur la moitié gauche de la photo (la moitié droite n'est pas
    modifiée).</li>
    <li>Réglage de la teinte-saturation : menu
        <em>Couleurs&nbsp;-&gt;&nbsp;Teinte-Saturation</em>. L'auteur propose
        -15,2 pour atténuer la couleur orange qui prédomine en cas d'éclairage
        insuffisant.</li>
    <li>Si la photo est trop sombre, aller dans le menu
        <em>Couleurs&nbsp;-&gt;&nbsp;Niveaux</em>. Décaler le niveau de droite
        (qui se trouve à l'extrémité) à la fin du pic de couleurs, ensuite
        décaler vers la gauche le niveau du milieu (couleurs médianes).</li>
</ol>
</p>

<hr>

<h3><a name="journalctl">2.65 Logs avec journalctl</a></h3>

<p>
D'après <em>Planète Linux numéro 110, août-septembre 2019</em>.
</p>

<p><code><pre>
# Logs depuis le démarrage
journalctl -b

# Logs avec critère de date
journalctl --since today
journalctl --since 17:00 --until 17:25

# Logs indiquant une erreur
journalctl -b -p err

# Les 25 dernières entrées
journalctl -n 25

# Encore plus de log
journalctl -o verbose

# Logs du démon sshd (_EXE pour indiquer un exécutable)
journalctl --since today _COMM=sshd

# Pas de pager
journalctl -b --no-pager

# Réglages dans le fichier /etc/systemd/journald.conf
# Par exemple, utiliser l'option ForwardToSyslog=yes pour que tout soit envoyé à syslog
# (dans ce cas, installer syslog-ng)
</pre></code></p>

<hr>

<h3><a name="linuxpratiqueessential1">2.97 Résumé Linux Pratique Essentiel numéro 1</a></h3>

<ul><b>Environnements graphiques</b>
  <li>Gnome et Kde, les plus connus et les plus puissants</li>
  <li>Xfce, léger</li>
  <li>Enlightenment (e16 et surtout e17), totalement dans l'esprit UNIX</li>
  <li>WindowMaker et AfterStep (et GNUStep), dans l'esprit NeXTStep - un peu sombre...</li>
</ul>
<ul><b>BitTorrent</b>
  <li>Transmission, <a href="http://www.transmissionbt.com">http://www.transmissionbt.com</a>, le plus simple</li>
  <li>Deluge, <a href="http://deluge-torrent.org">http://deluge-torrent.org</a>, plus puissant</li>
  <li>Azureus, <a href="http://azureus.sourceforge.net">http://azureus.sourceforge.net</a>, puissant et en JAVA</li>
</ul>
<ul><b>Navigateurs</b>
  <li>Konqueror, sait tout faire (en KDE 4, se spécialise comme navigateur Internet ; Dolphin devient le gestionnaire de fichiers)</li>
  <li>Firefox, pas besoin de le présenter (Iceweasel sur Debian)</li>
</ul>
<ul><b>Clients de messagerie</b>
  <li>Evolution, le client de GNOME - distancé à mon avis par KMail, et de loin, pour la seule messagerie.</li>
  <li>Kmail, à mon avis, le meilleur (messagerie uniquement)</li>
  <li>Thunderbird (Icedove sur Debian, basé sur Thunderbird 1.5 d'après wiki), le pendant de Firefox pour la messagerie</li>
  <li>Claws-mail (augmentation de sylpheed), contient un module "spamassassin", intéressant...</li>
</ul>
<ul><b>Messagerie instantanée</b>
    <li>Amsn, clone de MSN Messenger</li>
    <li>Xchat</li>
    <li>Kopete</li>
    <li>Kvirc</li>
    <li>Pidgin</li>
</ul>
<ul><b>Lecteurs et gestionnaires audio</b>
  <li>Listen, lecteur GNOME</li>
  <li>Rythmbox, autre lecteur GNOME</li>
  <li>Banshee</li>
  <li>Exaile</li>
  <li>Amarok, lecteur KDE</li>
  <li>Gtkpod</li>
</ul>
<ul><b>Éditeurs audio</b>
  <li>Audacity</li>
</ul>
<ul><b>Encodeur de CD</b>
  <li>Grip</li>
  <li>Sound Juicer</li>
  <li>Xcfa</li>
</ul>
<ul><b>Graveur de CD et DVD</b>
  <li>K3b</li>
  <li>Serpentine</li>
  <li>Brasero</li>
  <li>XFBurn</li>
</ul>
<ul><b>Visionneur d'images</b>
  <li>Gqview, configurable</li>
  <li>Gthumb, visionneur de GNOME (le meilleur à mon avis ; simple et efficace, permet de créer un site web de toutes pièces)</li>
  <li>Mirage, simple et léger</li>
  <li>F-Spot, spécialisé dans le catalogage</li>
  <li>Digikam, boîte à outils pour KDE, gère les étiquettes dans les images et permet la création de calendrier souvenir</li>
  <li>Imgseek, pour les recherches</li>
  <li>XnView, gère (tout comme Digikam) les étiquettes dans les images</li>
  <li>Phototonic, visionneur simple</li>
</ul>
<ul><b>Montage vidéo</b>
  <li>Kino, pour débuter</li>
  <li>Kdenlive, un peu plus performant</li>
  <li>Cinelerra, le plus puissant</li>
  <li>OpenShot Video Editor</li>
  <li>dvdstyler, pour faire de l'authoring de DVD</li>
  <li>Lightworks, niveau professionnel</li>
  <li>Flowblade, plus simple</li>
</ul>
<ul><b>Lecteurs vidéo</b>
  <li>Totem, lecteur GNOME</li>
  <li>Kaffeine, lecteur KDE</li>
  <li>Mplayer, un lecteur polyvalent (le meilleur à mon avis, mais l'interface est sommaire)</li>
  <li>VLC, très puissant, spécialisé dans la diffusion de vidéo sur réseau (projet VideoLAN)</li>
</ul>
<ul><b>Bureautique</b>
  <li>Koffice, suite de KDE</li>
  <li>Openoffice, que l'on ne présente plus</li>
</ul>
<ul><b>Comptabilité</b>
  <li>Grisbi, comptabilité personnelle</li>
  <li>Gnucach, comptabilité professionnelle</li>
  <li>Kmymoney, comptabilité personnelle de KDE</li>
</ul>
<ul><b>Virtualisation</b>
  <li>Qemu, interface en mode texte (donc le meilleur je suppose, a priori... ;-))</li>
  <li>Virtualbox, programme en mode graphique</li>
</ul>
<ul><b>Visionneur de PDF</b>
  <li>Xpdf, simple</li>
  <li>Kpdf, lecteur de KDE, complet</li>
  <li>Evince, lecteur de GNOME, d'après Linux Pratique Essentiel, il est intermédiaire entre Xpdf et Kpdf</li>
</ul>

<hr>

<h3><a name="logiciels_a_etudier">2.98 Logiciels non testés, à étudier un jour</a></h3>

<ul>
  <li><b>Sauvegarde</b>
  <ul>
    <li>rdiff-backup&nbsp;- Linux Pratique 40</li>
    <li>Keep (KDE), basé sur rdiff-backup&nbsp;- Linux Pratique 40</li>
    <li>rsnapshot, surcouche de rsync qui gère des sauvegardes avec une notion de quotidien, hebdomadaire, mensuel, etc.</li>
    <li>luckyBackup</li>
    <li>bacula, sauvegarde à base d'agents</li>
    <li>MondoRescue, pour "ghoster" une image disque et restorer si nécessaire</li>
    <li>clonezilla, idem mondorescue</li>
  </ul></li>

  <li><b>Jeux de GO, d'après Linux Pratique 26</b>
  <ul>
    <li>GnuGO, <a href="http://www.gnu.org/software/gnugo/gnugo.html">http://www.gnu.org/software/gnugo/gnugo.html</a></li>
    <li>CGoban&nbsp;1&nbsp;: <a href="http://cgoban1.sourceforge.net">http://cgoban1.sourceforge.net</a></li>
    <li>GlGO, <a href="http://www.pandanet.co.jp/English/glgo">http://www.pandanet.co.jp/English/glgo</a></li>
    <li>RubyGO, <a href="http://rubygo.rubyforge.org">http://rubygo.rubyforge.org</a></li>
    <li>ViziGO, <a href="http://vizigo.sourceforge.net">http://vizigo.sourceforge.net</a></li>
    <li>ccGO, <a href="http://ccdw.org/~cjj/prog/ccgo">http://ccdw.org/~cjj/prog/ccgo</a></li>
    <li>uliGO, <a href="http://www.u-go.net/uligo">http://www.u-go.net/uligo</a></li>
    <li>Voir aussi le lien vers <em>goproblems.com</em>, rubrique suivante</li>
  </ul></li>

  <li><b>Jeux</b>
  <ul>
    <li>lineo, ressemble à Quarto&nbsp;- Linux Pratique 40</li>
    <li>gnome-sudoku</li>
    <li>KSudoku</li>
    <li>Wordbiz, jeu de scrabble, <a href="http://www.isc.ro/fr/">http://www.isc.ro/fr/</a></li>
  </ul></li>

  <li><b>Vidéo</b>
  <ul>
    <li>Cinelerra</li>
    <li>Jahshaka (http://www.jahshaka.org/)</li>
    <li>KDEnlive</li>
    <li>Kino</li>
    <li>Lives</li>
    <li>Cinepaint</li>
    <li>Totem</li>
    <li>MPlayer (et mencoder)</li>
    <li>Kaffeine</li>
    <li>VCDImager</li>
    <li>Garbure Project</li>
    <li>transcode</li>
    <li>EKD, post-production vidéo</li>
    <li>Miro, lecteur vidéo et TV internet</li>
    <li>Devede</li>
    <li>ManDVD, pour créer des DVD à partir de photos (utilisé pour DVD MAPA)</li>
    <li>Imagination, alternative à ManDVD</li>
  </ul></li>

  <li><b>Gravage et rip</b>
  <ul>
    <li>K9copy, sauvegarde DVD vidéo&nbsp;- Linux Pratique 39</li>
    <li>DVGrab</li>
    <li>DVD::Rip</li>
    <li>Acidrip</li>
    <li>dvdrip</li>
    <li>LxDvdRip</li>
    <li>Katiuska</li>
    <li>Avidemux</li>
    <li>Konverter</li>
    <li>Ogmrip</li>
  </ul></li>

  <li><b>Musique</b>
  <ul>
    <li>Jalmus, apprentissage lecture musicale&nbsp;- Linux Pratique 39</li>
    <li>GODON</li>
    <li>TRIFACE</li>
    <li>BOTH</li>
  </ul></li>

  <li><b>Audio</b>
  <ul>
    <li>oggenc</li>
    <li>vorbize</li>
    <li>lame</li>
    <li>bladeenc</li>
    <li>cd-discid</li>
    <li>ide3/ide3v2</li>
    <li>cdparanoia</li>
    <li>ABCDE</li>
    <li>Grip</li>
    <li>Goobox (lié à grip)</li>
    <li>Kaudiocreator</li>
    <li>Sound Juicer</li>
    <li>Gnome Baker</li>
    <li>Juk</li>
    <li>mixxx, mixage audio et DJ</li>
    <li>Ripperx</li>
    <li>XCFA</li>
  </ul></li>

  <li><b>Image</b>
  <ul>
    <li>GQView (http://gqview.sourceforge.net/)</li>
    <li>ImageMagick: display, identify, import, convert, animate, montage, mogrify**, KIM, NIS</li>
    <li>MetaPixel, create an image made of small images (<a href="http://freshmeat.net/redir/metapixel/6356/url_homepage/metapixel">http://freshmeat.net/redir/metapixel/6356/url_homepage/metapixel</a>)</li>
    <li>Pixelize, create an image made of small images (<a href="http://lashwhip.com/pixelize.html">http://lashwhip.com/pixelize.html</a>)</li>
    <li>ZenPhoto</li>
    <li>ImgSeek</li>
    <li>F-Spot</li>
    <li>Gtk-gallery</li>
    <li>Phatch, traitement d'images en batch (<a href="http://photobatch.wikidot.com">http://photobatch.wikidot.com</a> ou <a href="http://photobatch.stani.be/">http://photobatch.stani.be/</a>)</li>
    <li>Arachne, pour redimensionner une image en respectant les proportions de certaines
      zones (&laquo;seam carving&raquo;)</li>
    <li>Qtpfsgui, pour faire du HRD = mélanger des photos identiques prises avec des paramètres différents</li>
    <li>Fotoxx, retouche photo</li>
    <li>Tamanoir, pour dépoussiérer les photos scannées</li>
    <li>SIR (Simple Image Resier), pour redimmensionner les images</li>
    <li>Smartshine Photo, pour corriger l'exposition</li>
    <li>SmartDeblur, pour améliorer la netteté</li>
    <li>Urban Lightscape, pour améliorer l'éclairage</li>
    <li>Tintii, pour séparer les couleurs</li>
    <li>Luminance-HDR, pour gérer le HDR</li>
    <li>PhotoPrint, le nom parle de lui-même</li>
    <li>Aseprite, pour créer des sprites</li>
    <li>collectd, perfwatcher, pour optimiser...</li>
    <li>Amavis, pour inspecter le contenu des emails</li>
    <li>Modoba, serveur de messagerie</li>
    <li>gcov, pour la couverture de code</li>
    <li>Lcov, pour la couverture de code (plus convivial)</li>
    <li>gprof, pour le profilage de code</li>
    <li>Oprofile, pour le profilage de code</li>
    <li>CppCheck, Splint, Frama-C, SonarCube, CCCC, pour vérifier le code</li>
    <li>Valgrind, Mudflap, Mcheck, Mprobe, Mtrace, Purify (com), BoundsChecker (com), Insure++ (com), pour détecter les fuites de mémoire</li>
    <li>Check, CUnit, pour les tests unitaires</li>
  </ul></li>

  <li><b>Outils RSS</b>
  <ul>
    <li>RssOwl</li>
    <li>FireFox/Sage (RSS reader)</li>
    <li>Akregator</li>
    <li>Liferea</li>
  </ul></li>

  <li><b>Extensions Firefox</b>
  <ul>
    <li>BookmarksHome, affiche les marque-pages en page d'accueil</li>
    <li>DownthemAll, télécharge tous les liens d'une page et accélère le téléchargement</li>
    <li>Reveal, affiche une vignette des pages dans l'historique</li>
    <li>Fuzzy time, affiche l'heure de manière "floue"&nbsp;- Linux Pratique 39</li>
    <li>Hyperwords, menu contextuel sur sélection de texte (top google, traduction, ...)</li>
    <li>Pdf it !, convertit une page web en PDF</li>
    <li>ThumbStrip, affiche l'historique de navigation avec des vignettes</li>
    <li>AutoPager, affiche automatiquement les pages suivantes (sur Google par ex.) à la suite sur la même page, indéfiniment</li>
    <li>FoxTab, pour afficher et sélectionner les onglets Firefox dans une fenêtre en 3D</li>
    <li>Fast Dial, pour afficher une page avec des vignettes de bookmarks</li>
    <li>Collector, pour gérer les extensions dans des collections</li>
    <li>Firefox Sync, pour synchroniser les préférences entre plusieurs machines</li>
    <li>NoScript, pour empêcher l'exécution de script</li>
    <li>Classic Theme Restorer, pour redonner à Firefox le <em>vrai</em> look (celui d'avant&nbsp;! :-) )</li>
    <li>Lightning, pour ajouter des fonctionnalités de calendrier à <em>thunderbird</em></li>
    <li>FireSSH, pour faire du µSSH avec Firefox</li>
    <li>Wallabag, pour afficher du contenu offline (et sans fioritures)</li>
    <li>
  </ul></li>

  <li><b>Banner</b>
  <ul>
    <li>figlet</li>
    <li>boxes</li>
    <li>cowsay</li>
  </ul></li>

  <li><b>Éducatifs</b>
  <ul>
    <li>Celestia</li>
    <li>Stellarium</li>
    <li>SkyChart</li>
    <li>Kalzium</li>
    <li>Jct (cartes géographiques)</li>
    <li>Verbiste</li>
    <li>Galculate, <a href="http://qalculate.sourceforge.net/">http://qalculate.sourceforge.net/</a></li>
    <li>Claroline, solution d'e-Learning, <a href="http://www.claroline.net">http://www.claroline.net</a></li>
  </ul></li>

  <li><b>Copie d'écran</b>
  <ul>
    <li>Ksnapshot</li>
    <li>gnome-panel-screenshot</li>
    <li>xwd (xwdtopnm)</li>
    <li>import</li>
    <li>snapscreenshot</li>
    <li>Shutter, GNOME, capture d'écran très puissante</li>
    <li>HotShots</li>
  </ul></li>

  <li><b>Comptabilité personnelle</b>
  <ul>
    <li>Grisbi, <a href="http://www.grisbi.org">http://www.grisbi.org</a></li>
    <li>KMyMoney2</li>
    <li>GnuCash</li>
    <li>HomeBank, <a href="http://homebank.free.fr">http://homebank.free.fr</a></li>
  </ul></li>

  <li><b>Divers</b>
  <ul>
    <li>Xfce</li>
    <li>Katapult (lanceur d'application KDE)&nbsp;- Linux Pratique 39</li>
    <li>Cliparts libres (openclipart.org)</li>
    <li>DIA (diagramme) (www.gnome.org/projects/dia)</li>
    <li>Squid/SquidGuard, proxy Internet - projet Cohorte</li>
    <li>GWhere</li>
    <li>Baobab</li>
    <li>Autopackage (http://autopackage.org/)</li>
    <li>WifiRadar (http://sourceforge.net/projects/wifiradar/)</li>
    <li>Memtest</li>
    <li>scponly</li>
    <li>socat</li>
    <li>sysstat</li>
    <li>iftop</li>
    <li>sntop</li>
    <li>software-suspend</li>
    <li>fcron</li>
    <li>wipe</li>
    <li>knl, tune kernel image parameters</li>
    <li>KsmoothDock</li>
    <li>Firewall Builder</li>
    <li>bvi (http://bvi.sourceforge.net/), binary editor (interface similar to vi)</li>
    <li>biew (http://biew.sourceforge.net/), binary editor in console mode</li>
    <li>Gourmet Recipe Manager (<a href="http://grecipe-manager.sourceforge.net/">http://grecipe-manager.sourceforge.net/</a>)</li>
    <li>Bastille Linux</li>
    <li>Framakey (logiciels libres pour Windows installés sur clé USB ; http://www.framakey.org)</li>
    <li>MELD, comparaison de fichiers ou de contenus de répertoires</li>
    <li>Auto Adjust Photo (aaphoto), pour optimiser le contraste et la luminosité en lots</li>
    <li>lwatch, pour afficher les journaux système sous forme colorisée</li>
    <li>xaos, affichage de fractales</li>
    <li>gDesklets, gadgets à afficher sur l'écran</li>
    <li>smartmontools, pour surveiller de manière très fine les disques (et anticiper une panne)</li>
    <li><a href="http://www.solfege.org">http://www.solfege.org</a>, apprendre le solfège sur GNOME</li>
    <li>ldapvi, pour faire du LDAP... sous VI</li>
    <li>screen, pour multiplexer les terminaux</li>
    <li>tmux, alternative à screen</li>
    <li>curl, pour télécharger depuis Internet (alternative à wget, bien qu'ils soient complémentaires)</li>
    <li>Fotowall (KDE), manslide (KDE), pour transformer les photos et en faire un fond d'écran par exemple</li>
    <li>fdm, remplace procmail et fetchmail</li>
    <li>freevo, remplace geekbox</li>
    <li>Sweet home 3D, pour l'aménagement intérieur</li>
    <li>pdfcube, lecture de PDF en 3D</li>
    <li>METISSE, bureau développé par l'INRIA, projet In Situ, <a href="http://insitu.lri.fr/metisse/">http://insitu.lri.fr/metisse/</a></li>
    <li>GCStar, pour gérer les collections</li>
    <li>SCLEANER, pour nettoyer les fichiers inutiles</li>
    <li>NEMO, présente les fichiers dans un calendrier, <a href="http://www.iola.dk/nemo/">http://www.iola.dk/nemo/</a></li>
    <li>Slitaz, distribution mini (25 Mo), <a href="http://www.slitaz.org">http://www.slitaz.org</a></li>
    <li>Tout ce que vous avez toujours voulu savoir sur LaTeX sans jamais oser le demander, <a href="http://www.framabook.org/latex.html">http://www.framabook.org/latex.html</a></li>
    <li>Aide et tutoriel au sujet d'OpenOffice, <a href="http://zeelay.free.fr/OpenOfficeMax">http://zeelay.free.fr/OpenOfficeMax</a></li>
    <li>trickle, pour limiter la bande passante d'une application sur le réseau</li>
    <li>QMagneto, pour afficher les programmes TV, les lire et les enregistrer</li>
    <li>Images libres sur <a href="http://www.freemages.fr">http://www.freemages.fr</a></li>
    <li>Sweet Home 3D, pour réaménager son intérieur<a href="http://www.sweethome3d.eu/fr">http://www.sweethome3d.eu/fr</a></li>
    <li>TrueCrypt, chiffrer des volumes - sous Linux et Windows <a href="http://www.truecrypt.org">http://www.truecrypt.org</a></li>
    <li>Elements, plugin de Compiz Fusion pour afficher entre autres de la
      neige qui tombre à l'écran, <a href="http://www.elementsplugin.com">http://www.elementsplugin.com</a></li>
    <li>Gestion de dépôts de toutes sortes (rpm et deb entre autres), mrepo (anciennement connu comme Yam),
    <a href="http://dag.wieers.com/home-made/mrepo/">http://dag.wieers.com/home-made/mrepo/</a></li>
    <li>WIA, Where Is Application, pour localiser une application rapidement</li>
    <li>Xbmc, programme de juke-box</li>
    <li>Moovida, idem Xbmc (= juke-box)</li>
    <li>Coverfinder, pour récupérer les couvertures de CD</li>
    <li>gDesklets, GNOME, pour afficher des widgets</li>
    <li>gufw, GNOME, configuration pare-feu</li>
    <li>Bleachbit, GNOME, pour nettoyer le disque des fichiers temporaires, cache, etc.</li>
    <li>GBrainy, GNOME, entraînement cérébral</li>
    <li>HUGIN, pour faire du stitching</li>
    <li>Xournal, pour annoter des PDF</li>
    <li>Nemo, gestion de fichier par date</li>
    <li>Fontmatrix, gestion de police</li>
    <li>Unison, Unison-gtk, synchronisation de fichier (bidirectionnelle ; unidirectionnelle&nbsp;: rsync est adapté)</li>
    <li>Foremost, pour récupérer des fichiers effacés</li>
    <li>Photorec, idem Foremost</li>
    <li>agp, génération de mot de passe aléatoire</li>
    <li>pwgen, idem agp</li>
    <li>tzclock, 4 horloges en applet GNOME, <a href="http://tzclock.org">http://tzclock.org</a></li>
    <li>KIG, entraînement à la géométrie sous KDE</li>
    <li>Gnome Commander (paquet gnome-commander), un gestionnaire de fichiers inspiré de Norton Commander</li>
    <li>ShapeCollage, pour assembler des photos selon une forme</li>
    <li>cairo-dock, barre hyperbolique</li>
    <li>docky, barre hyperbolique</li>
    <li>Dynamic Wallpaper, comme son nom l'indique...</li>
    <li>Outils Google en ligne de commande, <a href="http://code.google.com/p/googlecl">http://code.google.com/p/googlecl</a></li>
    <li>svnsync, pour synchroniser plusieurs dépôts subversion</li>
    <li>uck, Ubuntu Customization Kit</li>
    <li>mtpaint, pour faire du Pixel Art</li>
    <li>localepurge, pour supprimer les fichiers de localisation inutiles</li>
    <li>Xpad, pour afficher des post-it sur l'écran</li>
    <li>Deja Dup, logiciel de sauvegarde ultra-simple</li>
    <li>Redshift, pour adapter la luminosité de l'écran à l'heure du jour</li>
    <li>Pdfimages, pour extraire les images d'un document PDF</li>
    <li>Parcellite, pour gérer un historique du presse-papier</li>
    <li>Zenity, pour programmer une interface graphique en shell</li>
    <li>Wubi, pour installer Ubuntu sur Windows</li>
    <li>chkconfig, pour démarrer ou arrêter un service</li>
    <li>alsamixer, mixer en ligne de commande pour ALSA</li>
    <li>bluetile, x-tile, pour faire du tiling sous GNOME</li>
    <li>GNOME Nanny, pour contrôler ce qui est fait sur l'ordinateur selon les horaires</li>
    <li>FoxFilter, le contrôle parental pour Firefox</li>
    <li>scrotwm, gestionnaire de fenêtre en tiling (idem wmii)</li>
    <li>B-Sides, paquets supplémentaires pour Ubuntu</li>
    <li>Cream, une surcouche de VI</li>
    <li>Iptux, chat sur le réseau local</li>
    <li>HTMLDoc, pour convertir une page Web en PDF, entre autres</li>
    <li>Cryptkeeper, pour chiffrer un dossier</li>
    <li>apt-mirror, pour installer un miroir de dépôt local</li>
    <li>wammu, pour sauvegarder son mobile</li>
    <li>logkeys, pour loguer les touches pressées...</li>
    <li>links, lynx et w3m, navigateurs en mode texte</li>
    <li>git-svn, pour utiliser git avec svn</li>
    <li>Eagle Mode, un gestionnaire de fichiers en mode ZUI (Zomming User Interface)</li>
    <li>pdktk, le couteau suisse pour manipuler les PDF (assembler, séparer, ajouter un filigrane, ...)</li>
    <li>pdfposter, pour "agrandir" un PDF en l'imprimant sur plusieurs feuilles</li>
    <li>diffpdf, pour comparer deux documents PDF</li>
    <li>PdfMod, pour modifier rapidement un document PDF</li>
    <li>FocusWriter, pour écrire, uniquement écrire</li>
    <li>conky, pour afficher un tableau de bord rapide</li>
    <li>Barry Backup, pour sauvegarder les données de son BlackBerry</li>
    <li>parchive, par2 : pour créer et exploiter des fichiers de parité (correction d'erreur)</li>
    <li>Gammu, sauvegarde des données de smartphones</li>
    <li>genisoimage, remplace mkisofs</li>
    <li>FSlint, pour détecter les fichiers en double sur le disque dur</li>
    <li>OnTV, programmes télé sur Ubuntu</li>
    <li>ROXterm, un terminal alternatif</li>
    <li>Areca Backup, gestionnaire de sauvegardes</li>
    <li>TimeVault (Back in Time), pour sauvegarder en continu</li>
    <li>OpenSUSE Build Service, pour construire des paquets multi-systèmes</li>
    <li>APTonCD, pour sauvegarder les paquets installés sur sa machine</li>
    <li>FreeNAS, pour construire son NAS multimédia</li>
    <li>SUSE Studio, pour créer sa distribution</li>
    <li>UCK, Ubuntu Customization Kit</li>
    <li>pmap, pour afficher la cartographie mémoire d'un processus</li>
    <li>mpstat (paquet sysstat), pour afficher des infos systèmes sur les CPUs</li>
    <li>emacs/splint, pour éditer et vérifier le code</li>
    <li>Wally, fonds d'écran changeants</li>
    <li>tweetdeck, pour gérer le tweet</li>
    <li>G'MIC, plug-ins pour GIMP</li>
    <li>Maringouin, GIMP modifié avec plein de nouvelles fonctionnalités</li>
    <li>FX Foundry, plug-ins pour GIMP</li>
    <li>Liquid rescale, plug-in pour GIMP pour redimensionner une image sans déformer certaines zones</li>
    <li>Hybride (Eldorados), pour tester différents bureaux en quelques clics</li>
    <li>subdownloader, pour faciliter le téléchargement des fichiers de sous-titres</li>
    <li>getabook, getgbook, getbnbook, pour récupérer les pages de démo des sites Amazon, Google, Barnes and Noble, respectivement</li>
    <li>SMS, super mini server, un serveur tout en un qui fonctionne dès l'installation ("out of the box")</li>
    <li>NX - FreeNX, accès à un bureau à distance</li>
    <li>FreeMind, Semantik, Labyrinth, View Your Mind (VYM), organisateurs d'idées</li>
    <li>Zorin OS, distribution ressemblant à Windows</li>
    <li>palimpsest, pour surveiller les disques</li>
    <li>Bless Hex Editor, <a href="http://home.gna.org/bless">http://home.gna.org/bless</a></li>
    <li>reptyr pour changer le terminal dans lequel un processus s'exécute</li>
    <li>Klavaro, pour apprendre à taper au clavier</li>
    <li>Ubuntu Builder, pour construire son propre Ubuntu</li>
    <li>recordmydesktop, pour faire des screencasts</li>
    <li>duplicati, pour sauvegarder sur le cloud</li>
    <li>grive, pour la synchro Google Drive</li>
    <li>Multisystem, comparable à UNetbootin, pour créer des disques USB bootables</li>
    <li>simplescreenrecorder, pour faire des screencast</li>
    <li>mandelbulber, pour afficher des fractales en 3D</li>
    <li>OpenMediaVault, pour faire tourner un NAS</li>
    <li>ascii.io, pour enregistrer le terminal</li>
    <li>IPVS / Keepalived pour gérer la redondance d'adresse IP (un peu comme NLB)</li>
    <li>Paperwork, pour gérer les papiers et documents virtuels</li>
    <li>Wyrd, agenda en console</li>
    <li>Modifier l'extension d'un fichier : ${f/%.avant/.apres}, ex.&nbsp;: <code>for f in *.jpg; do convert $f ${f/%.jpg/.png}; done</code> (on peut aussi utiliser <code>basename</code>)</li>
    <li>Octopussy, pour analyser les logs</li>
    <li>systemd-analyze, pour analyser le démarrage de la machine</li>
    <li>dtrx (do the right thing) pour extraire n'importe quelle archive</li>
    <li>google-drive-ocamlfuse, pour gérer les fichiers google drive comme locaux. Sur le dépôt ppa:alessandro-strada/ppa</li>
    <li>weather-util, WeatherLog, xfce4-weather-plugin, pour afficher les prévisions météo</li>
    <li>openvpn, pour construire son propre VPN</li>
    <li>Tails (0.20), The Amnesic Incognito Live System, système live (basé sur Debian)</li>
    <li>debsums, pour vérifier l'intégrité des fichiers par rapport à leur paquet</li>
    <li>rkhunter, pour détecter les RootKits</li>
    <li>Packer, pour automatiser la création de machines virtuelles</li>
    <li>Le format reStructuredText permet un formattage (notamment en HTML) à partir de texte plan. Disponible dans le paquet <b>python-docutils</b></li>
    <li>txt2html également permet également ma conversion de texte plan en HTML, avec des marqueurs légèrement différents pour la mise en forme (txt2html est beaucoup moins puissant que le système reStructuredText)</li>
    <li>App Grid (paquet appgrid, ppa:appgrid/stable), alternative à la logithèque Ubuntu</li>
    <li>Writer2ePub, extension LibreOffice pour exporter au format ePub</li>
    <li>Animoto, Videoclip Maker (Youtube), Explee, ces 3 sites permettent de faire des vidéos en ligne</li>
    <li>CopyQ, gestionnaire de presse-papier</li>
    <li>Krop, pour découper des documents PDF</li>
    <li>Y PPA Manager, pour gérer les dépôts PPA</li>
    <li>rxvt, terminator, xterm, konsole, lxterminal, sakura, autant de terminaux...</li>
    <li>PC-BSD, pour faire tourner le PC sous BSD</li>
    <li>Sushi, extension Nautilus pour la pré-visualisation de document</li>
    <li>FreeFileSync, synchronisation de fichier</li>
    <li>glabels, pour créer sa carte de visite</li>
    <li>aufs, overlayfs&nbsp;: systèmes de fichier d'union</li>
    <li>squashfs&nbsp;:système compressé</li>
    <li>GitLab, pour gérer son propre site Git</li>
    <li>Jenkins, pour faire de l'intégration continue</li>
    <li>Allura, le moteur de sourceforge</li>
    <li>doxygen, pour extraire des informations du code (avec des commentaires @param, @author, @date, etc.) et créer une documentation de code automatique</li>
    <li>DokuWiki, pour gérer ses propres wiki</li>
    <li>DKMS = Dynamic Kernel Module Support, système créé par DELL</li>
    <li>register_printf_function(), pour enrichir printf</li>
    <li>Gallica, pour accéder aux œuvres de la banque de France</li>
    <li>DJL Manager, plateforme de jeu pour Linux</li>
    <li>Bedtime, pour contrôler les horaires d'accès à Internet</li>
    <li>GeoGebra, pour faire de la géométrie</li>
    <li>Xowa, pour accéder à wikipedia hors ligne</li>
    <li>nautilus-wipe, pour écraser de façon définitive des fichiers</li>
    <li>nautilus-image-converter, pour... le nom dit tout</li>
    <li>nautilus-open-terminal, pour ouvrir un terminal là où l'on est</li>
    <li>nautilus-terminal, pour intégrer un terminal à Nautilus</li>
    <li>VDE2, pour créer un réseau virtuel</li>
    <li>Rythmbox, *Clementine*, Audacious, Banshee&nbsp;: lecteurs audio</li>
    <li>Linux Multimedia Studio, pour l'écriture musicale</li>
    <li>Bluemind, système de messagerie d'entreprise</li>
    <li>wondershaper, pour limiter la bande passante sur une interface</li>
    <li>ssmtp, pour faire un simple envoi en SMTP (pas de réception, pas de démon, etc.)</li>
    <li>lynis, rkhunter, pour vérifier la sécurité de Linux</li>
    <li>Zentyal, serveur pour entreprise incluant (entre autres) dns, dhcp, proxy, av, vpn, mail</li>
    <li>Mediacrush, pour la mise à disposition online de contenu media...</li>
    <li>Shorewall, pour gérer le pare-feu</li>
    <li>Doxygen, Docurium, Dokuwiki, MediaWiki, WikiWikiWeb, gestion de documentation</li>
    <li>Bugzilla, Redmine, Mantis, pour gérer les projets</li>
    <li>Dia, Umbrello, Modelio, pour gérer la modélisation UML</li>
    <li>Jenkins, Apache Continuum, TeamCity, tests d'intégration</li>
    <li>Ampache, pour diffuser de la musique</li>
    <li>Y-PPA Manager, pour mieux gérer les PPA</li>
    <li>Gmrun, Gnome-Do, Kupfer, lanceurs d'application</li>
    <li>Mailveope, pour crypter le webmail</li>
    <li>uGet, téléchargement sur Firefox</li>
    <li>Geary, client de messagerie léger</li>
    <li>mp3splt, pour découper des mp3</li>
    <li>SRM, SMEM, SFILL, SSWAP, pour effacer définitivement les données</li>
    <li>Utilitaire acpi (paquetage <em>acpi</em>), pour afficher (entre autres) l'état de la batterie</li>
    <li>binwalk, pour trouver des données (typiquement dans des firmware) dans des images binaires</li>
    <li>distcc, compilation distribuée</li>
    <li>End-to-End, plug-in pour gmail pour chiffrer de bout en bout</li>
    <li>Tutanota, webmail intégralement chiffré depuis le client</li>
    <li>XXClone, pour ghoster le disque dur</li>
    <li>uTox, skype 100% chiffré</li>
    <li>miniLock pour chiffrer des fichiers</li>
    <li>Spider Oak, pour tout crypter dans le cloud</li>
    <li>Maltego, pour collecter tous les renseignements (publics) sur quelqu'un et les afficher sous forme de graph</li>
    <li>Recuva, Glary undelete, testdisk (orienté partitions), isobuster (pour CDs/DVDs) pour récupérer des données effacées</li>
    <li>recALL pour récupérer des mots de passe sur le disque dur</li>
    <li>ownCloud pour gérer son propre cloud</li>
    <li>no-ip, un DNS dynamique gratuit</li>
    <li>GEGeek Tech Toolkit, une compilation d'outils de hack</li>
    <li>WhatChanged, pour suivre les modifications del a base de registre</li>
    <li>MooO File Monitor, pour les activités sur les fichiers</li>
    <li>Babun, terminal pour wkindows inspiré d'Unix</li>
    <li>vidmasta, pour télécharger des films ou des séries</li>
    <li>EmuControlCenter, pour centraliser les ressources liées à l'émulation - très complet</li>
    <li>movienr, pour trouver des films</li>
    <li>Piskel, pixel art en ligne</li>
    <li>Free OCR, reconnaissance optique de caractères</li>
    <li>ufw (version gui : gufw), uncomplicated firewall, surcouche d'iptables d'Ubuntu pour une configuration plus simple</li>
    <li>ipfire, squidgard: outils de contrôle parental</li>
    <li>shred pour supprimer définitivement des fichiers</li>
    <li>foremost, pour récupérer des fichiers effacés en donnant l'extension à récupérer</li>
    <li>handbrake, pour encoder de la vidéo</li>
    <li>GhostBSD, à l'image de PC-BSD</li>
    <li>LightBeam, pour afficher qui nous piste en ligne</li>
    <li>ViewTube, pour afficher youTube dans flash</li>
    <li>Cozy Cloud, cloud privé</li>
    <li>Astromenace, jeu de shoot'em up</li>
    <li>dwb, navigateur en mode console</li>
    <li>GPRename, renommage par lot</li>
    <li><b>Unity Tweak Tool</b> pour configurer unity</li>
    <li><b>compizconfig-settings-manager</b> pour configurer compiz, pour minimiser une application en cliquant sur son lanceur&nbsp;: <em>Ubuntu Unity Plugin, Launcher, Minimize Single Window Applications (unsupported)</em></li>
    <li><b>ubuntu-restricted-addons</b> et <b>ubuntu-restricted-extras</b> pour ajouter des paquets très utiles</li>
    <li><b>nautilus-open-terminal nautilus-image-manipulator nautilus-image-converter ooo-thumbnailer seahorse-nautilus</b> pour enrichir nautilus</li>
    <li>Shutter pour faire des captures d'écran</li>
    <li>Chromium, chrome libre</li>
    <li>Site Gnome Look pour personnaliser Gnome</li>
    <li>gnome-shell, une alternative au bureau Gnome par défaut</li>
    <li>pydf, un df enrichi</li>
    <li>rainloop, serveur webmail</li>
    <li>openvpn, un serveur vpn</li>
    <li>mercurial, système de egstion de version</li>
    <li>gnuplot,  pour tracer des graphiques (plutôt scientifiques)</li>
    <li>gprof, pour profiler du code (temps d'exécution par fonction)</li>
    <li>pfsense, pare-feu configurable avec interface web</li>
    <li>LyX, pour faire du LaTeX facilement</li>
    <li>GlusterFS, pour construire son NAS</li>
    <li>Visionneurs graphiques de GIT&nbsp;: git-cola (6), gitg (5), Giggle (7), QGit (9)</li>
    <li>Ubuntu MATE, pour un ubuntu basé sur Gnome 2</li>
    <li>mailhog, un serveur SMTP de débogage (comme MailCatcher)</li>
    <li>recode, iconv poiur modifier l'encodage d'un fichier</li>
    <li>Gogs, auto-hébergement de dépôts GIT</li>
    <li>HAProxy, pour répartir la charge serveur</li>
    <li>devuan, fork de Debian - <a href="https://www.devuan.fr">https://www.devuan.fr</a></li>
    <li>backbox, pour faire des audits de sécurité</li>
    <li>webmin, pour configurer le système en HTTP</li>
    <li>Ubuntu Builder, pour créer une distribution live personnalisée</li>
    <li>Debreate, création de paquetages pour Debian</li>
    <li>openVAS, scanner de vulnérabilité</li>
    <li>Florence Virtual Keyboard, clavier à l'écran pour ne pas taper de mot de passe au clavier</li>
    <li>tlp (paquetage tlp et tlp-rdw), ou bien powertop, pour économiser la batterie</li>
    <li>Gadget USB, primitives de programmation USB pour faciliter le développement de driver</li>
    <li>Embedian, à examiner de près pour cross-compiler</li>
    <li>Let's Encrypt, CA gratuite pour tout le monde</li>
    <li>Powerline Shell, très puissant pour personnaliser le prompt de la ligne de commande</li>
    <li>hugo, pour gérer un site web statique</li>
    <li>BumpTop 3D, bureau en 3D impressionnant</li>
    <li>docker.io, pour segmenter ('containeriser') les programmes</li>
    <li>monitorix, pour... monitorer</li>
    <li>Foxit, lecteur de PDF</li>
    <li>UAI, Ubuntu After Install, une sélection d'applis après install d'Ubuntu</li>
    <li>OpenShot, sorte de Windows Movie Maker pour Linux</li>
    <li>HomeBank, gestion compte banquaire</li>
    <li>kmymoney, gnucash, idem</li>
    <li>Zathura, lecture PDF</li>
    <li>Shutter, copie d'écran</li>
    <li>aria2, pour télécharger très efficacement (protocoles différents en parallèle) en ligne de commande</li>
    <li>aptoncd, pour conserver les paquets installés</li>
    <li>Grub Customizer</li>
    <li>Boot Repair, pour réparer le boot</li>
    <li>nethogs, pour afficher les processus en train de consommer de la bande passante</li>
    <li>vbindiff, pour afficher les différences entre deux fichiers, en binaire</li>
    <li>bbe, pour éditer un fichier binaire en batch, un peu comme sed</li>
    <li>gitolite, auto-hébergement de dépôt GIT</li>
    <li>antiX, distribution pour matériel ancien</li>
    <li>graphviz, pour générer des graphiques (au sens "graph" : des nœuds et des liens entre)</li>
    <li><a href="https://googleplaymusicdesktopplayer.com">https://googleplaymusicdesktopplayer.com</a>, pour gérer youtube depuis une application</li>
    <li><a href="https://haveibeenpwned.com">https://haveibeenpwned.com</a>, pour détecter si un compte est dans les bd pirates</li>
    <li>Tiny Core Linux 9.0, très très petite distribution (image de 15 à 85 MO !)</li>
    <li>mp3splt, pour couper un fichier .mp3 avec un fichier de description .cue</li>
    <li>Dans firefox, dans <em>about:config</em>, mettre <em>false</em> à la valeur de <em>media.autoplay.enabled</em>
        pour éviter le démarrage automatique des vidéos</li>
    <li><a href="registry.gimp.org/files/arrow.scm">registry.gimp.org/files/arrow.scm</a>, pour dessiner des flèches dans Gimp facilement</li>
    <li>cpufreq-info pour afficher des infos sur... la fréquence du CPU</li>
    <li>fichier .hidden&nbsp;: liste des fichiers que l'on souhaite cacher</li>
    <li>cat /sys/block/sda/queue/rotational pour savoir si le disque est un SSD ou pas</li>
    <li>Converseen, pour convertir des photos en batch</li>
    <li>Fish (fishshell.com), un shell alternatif avec une complétion très élaborée</li>
    <li>StreamTuner2, toutes les radios du monde</li>
    <li>LightZone, édition d'images au format RAW</li>
    <li>ReactOS (reactos.org), distribution Linux qui imite Windows NT...</li>
    <li>FF Multi Converter, pour convertir les vidéos</li>
    <li>openpics (<a href = "https://openpics.xyz">https://openpics.xyz</a>), pour trouver des images libres de droit (nécessite d'installer l'appli)</li>
    <li>auditd, pour surveiller les accès aux fichiers (binaire&nbsp;: auditctl)</li>
    <li>xclip, pour manipuler le presse-papier depuis la ligne de commande</li>
    <li>SAR, pour enregistrer des sysstat</li>
    <li>terminalizer, pour créer un GIF animé avec les commandes exécutées dans un terminal</li>
    <li>Pour faire des screencast : kazam, Open Broadcaster Software Studio, SimpleScreenRecorder, GreenRecorder, Peek, VLC</li>
    <li>zuluCrypt, pour chiffrer au niveau fichier, dossier ou volumne (Luks)</li>
    <li>arp-scan, pour scanner rapidement et facilement le réseau local</li>
    <li>updatedb/locate (paquet mlocate dans Arch Linux)</li>
    <li>tshark, plus léger que WireShark et plus 'CLI-proof'</li>
    <li>firejail, pour tester une application en la sandboxant</li>
    <li>nethogs (pour les processus), iftop et iptraf-ng, pour mesurer la consommation de bande passante</li>
    <li>fzf, command-line fuzzy finder, permet de parcourir la sortie d'une commande (essayer <em>history | fzf</em>)</li>
    <li>fd, une alternative intéressante à find</li>
    <li>ag (de <em>the_silver_searcher</em>), rg at ack, alternatives au mix find/grep, pour rechercher dans une arborescence de code source</li>
    <li>powerline-fonts, zsh-theme-powerlevel9k, pour avoir un prompt sexy, fonctionne avec zsh</li>
    <li>Krita, pour dessiner (mieux que Gimp paraît-il...)</li>
    <li>flatpak, pour installer sans dépendances</li>
    <li>drop down terminal, pour ouvrir un terminal avec une seul touche</li>
    <li>nomacs, pour afficher des photos</li>
    <li>debsecan, pour vérifier la sécurité d'un système Linux</li>
    <li>Lynis, pour durcir la config d'un système Unix</li>
    <li>ProtonMail, une messagerie sécurisée...</li>
    <li>podcastaddict, pour gérer les podcast et radio sur le mobile</li>
    <li>back in time, pour sauvegarder et parcourir le système de fichier tel que sauvegardé</li>
    <li>pacman -Scc, pour nettoyer pacman</li>
    <li>tldr, pour afficher une aide concise et rapide</li>
    <li>cheat.sh (cht.sh), pour afficher l'usage d'un grand nombre de commandes, exemple&nbsp;:&nbsp;&nbsp;<code>curl cht.sh/rsync</code>&nbsp;&nbsp;pour afficher l'aide de rsync</li>
    <li><a href="https://explainshell.com/">https://explainshell.com/</a>, pour décortiquer les commandes shell</li>
    <li>commandlinefu, kommandr, pour afficher des exemples de commandes shell</li>
    <li>regex101, pour afficher de l'aide sur les regex</li>
    <li>AppArmor, pour isoler les processus</li>
    <li>NF ZF1-300, nouvelle norme de clavier français</li>
    <li>Jeux dans le terminal&nbsp;: Bastet, Pacman4console, Nudoku, Greed, Moon-Buggy, Ninvaders, Nethack, Nsnake, Robot Find Kitten (d'après <em>Linux Planète numéro 109, juin-juillet 2019</em></li>
    <li>Friture, analyseur de spectre audio</li>
    <li>q4os, Linux ayant une apparence très proche de Microsoft Windows&nbsp;&trade;</li>
    <li>Visualiseurs d'utilisation disque&nbsp;: Xdiskusage, DUC, Filelight, Baobab</li>
    <li>nethogs, pour afficher la consommation réseau <em>par processus</em></li>
    <li>x11vnc, un serveur vnc</li>
    <li>x2go, pour la prise de main à distance (nécessite un serveur)</li>
    <li>guacamole, pour la prise de main à distance sans pré-requis client (juste un navigateur web)</li>
    <li>Pygments, pour colorer le code partout</li>
    <li>Guake (Yakuuake sous KDE), émulateur de terminal</li>
    <li>blackarch, distrib pour hackin</li>
    <li>digiKam, meilleur gestionnaire de photos d'après <em>Linux Inside numéro 47</em> (Oct - Nov - Déc 2019)</li>
    <li>font-manager, gestionnaire GNOME pour les fontes</li>
    <li>Suckless Tools, pour compiler des distributions très petites et optimisées</li>
    <li>Cumulus, pour afficher la météo</li>
    <li>Slate, pour faire du pixel art</li>
    <li>Wizardli, pour télécharger la piste audio d'une vidéo youtube</li>
    <li>GoTTY, terminal dans un mini serveur Web</li>
    <li>hugo, pour créer un site statique</li>
    <li>FreeTube, youtube sans tracker</li>
    <li>Skanlite, pour scanner</li>
    <li>ElectronMail, pour la messagerie ProtonMail</li>
    <li>Scrcpy, pour afficher l'écran d'un Android sur le PC</li>
    <li>Darktable, pour traiter les images RAW</li>
    <li>Variety, pour gérer des images (changeantes, entre autres options) sur le fons d'écran</li>
    <li>Bauh, pour gérer les différents formats d'applis (AppImage, Snap, etc.) dans une seule interface</li>
    <li>ncdu, sorte de baobab en mode texte</li>
    <li>nms, la commande qui affiche n'importe quoi !</li>
  </ul></li>

  <li><b>Où trouver des logiciels</b>
  <ul>
    <li>Freshmeat, <a href="http://freshmeat.net">http://freshmeat.net</a></li>
    <li>KDE-APPS, <a href="http://www.kde-apps.org">http://www.kde-apps.org</a></li>
    <li>Framasoft, <a href="http://www.framasoft.net">http://www.framasoft.net</a></li>
    <li>GNOME-APPS, <a href="http://gnome-apps.berlios.de">http://gnome-apps.berlios.de</a></li>
    <li>GNOMEFILES, <a href="http://www.gnomefiles.org">http://www.gnomefiles.org</a></li>
    <li>PLAYDEB, <a href="http://www.playdeb.net">http://www.playdeb.net</a></li>
  </ul>

</ul>

<hr>

<h3><a name="quelques_url">2.99 Quelques URL utiles</a></h3>

<ul>
  <li><b>Debian</b></li>
  <ul>
    <li>Formation Debian, indispensable&nbsp;: <a href="http://formation-debian.via.ecp.fr/">http://formation-debian.via.ecp.fr/</a></li>
    <li>Guide pour créer un paquetage Debian&nbsp;: <a href="http://wiki.debian.org/HowToPackageForDebian">http://wiki.debian.org/HowToPackageForDebian</a></li>
    <li>Aide sur Debian, 100% français&nbsp;: <a href="http://www.andesi.org">http://www.andesi.org</a></li>
    <li>Créer une Debian ex nihilo&nbsp;! Debian From Scratch&nbsp;: <a href="http://people.debian.org/~jgoerzen/dfs/html">http://people.debian.org/~jgoerzen/dfs/html</a></li>
    <li>Aide au sujet de APT&nbsp;: <a href="http://www.debian.org/doc/manuals/reference/ch-package.fr.html#s-apt-install">http://www.debian.org/doc/manuals/reference/ch-package.fr.html#s-apt-install</a></li>
    <li><a href="http://ubuntu-fr.org">http://ubuntu-fr.org</a>
  </ul>
  <li><b>Linux</b></li>
  <ul>
    <li>The Linux Documentation Project&nbsp;: <a href="http://www.tldp.org">http://www.tldp.org</a></li>
    <li>Chercher des applications&nbsp;: <a href="http://linuxappfinder.com">http://linuxappfinder.com</a></li>
    <li>Knoppix (live CD) 100% français&nbsp;: <a href="http://www.kaella.org">http://www.kaella.org</a></li>
    <li>Linux sur les portables&nbsp;: <a href="http://www.linux-on-laptops.com">http://www.linux-on-laptops.com</a></li>
    <li>Programmer le clavier multimédia&nbsp;: <a href="http://qliu.free.fr/Linux/programmer-touche.html">http://qliu.free.fr/Linux/programmer-touche.html</a></li>
    <li>Exemple de fichier <code>~/.bashrc</code> avec des fonctions utiles&nbsp;: <a href="http://www.guilde.asso.fr/ressources/contrib/bash/bashrc.txt">http://www.guilde.asso.fr/ressources/contrib/bash/bashrc.txt</a></li>
    <li>Linux FR, <a href="http://linuxfr.org">http://linuxfr.org</a></li>
    <li>Site de "OpenSource Magazine", <a href="http://gratuit.opensource-magazine.com/">http://gratuit.opensource-magazine.com/</a>, magazines en PDF, <a href="http://www.pdf.opensource-magazine.com">http://www.pdf.opensource-magazine.com</a></li>
    <li>The Linux Beginner Search Engine, <a href="http://home.windstream.net/joelwest/">http://home.windstream.net/joelwest/</a></li>
  </ul>
  <li><b>Jeux</b></li>
  <ul>
    <li><a href="http://happypenguin.org">http://happypenguin.org</a></li>
    <li><a href="http://www.linux-gamers.net">http://www.linux-gamers.net</a></li>
    <li><a href="http://linux-games.com">http://linux-games.com</a></li>
    <li><a href="http://nekeme.net">http://nekeme.net</a></li>
    <li>goproblems.com&nbsp;: <a href="http://www.goproblems.com">http://www.goproblems.com</a></li>
    <li><a href="http://www.lebottindesjeuxlinux.tuxfamily.org">http://www.lebottindesjeuxlinux.tuxfamily.org</a></li>
    <li>PlayOnLinux</li>
    <li>Steam</li>
  </ul>
  <li><b>Généalogie</b></li>
  <ul>
    <li>GRAMPS&nbsp;: paquetage gramps, <a href="http://gramps-project.org">http://gramps-project.org</a><br>
&nbsp;&nbsp;Ce site distribue également le <em>Linux Genealogy CD</em>.</li>
    <li>GeneWeb&nbsp;: paquetage geneweb, <a href="http://www.geneweb.org">http://www.geneweb.org</a></li>
    <li>LifeLines&nbsp;: paquetage lifelines, <a href="http://lifelines.sourceforge.net">http://lifelines.sourceforge.net</a></li>
  </ul>
  <li><b>Vidéo</b></li>
  <ul>
    <li>Formats vidéo&nbsp;: <a href="http://www.weethet.nl/english/video_formats.php">http://www.weethet.nl/english/video_formats.php</a></li>
    <li>Utilisation de mencoder&nbsp;: <a href="http://forum.hardware.fr/hfr/VideoSon/Traitement-Video/topic-unique-mencoder-sujet_87558_1.htm">http://forum.hardware.fr/hfr/VideoSon/Traitement-Video/topic-unique-mencoder-sujet_87558_1.htm</a></li>
    <li>Fréquences moniteur et résolution&nbsp;: <a href="http://xtiming.sourceforge.net/cgi-bin/xtiming.pl">http://xtiming.sourceforge.net/cgi-bin/xtiming.pl</a></li>
  </ul>
  <li><b>Méta-sites</b></li>
  <ul>
    <li>DMoz&nbsp;: <a href="http://www.dmoz.org">http://www.dmoz.org</a></li>
  </ul>
</ul>

</body>

</html>
